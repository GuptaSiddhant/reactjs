(this.webpackJsonpreactjs=this.webpackJsonpreactjs||[]).push([[2],[function(e,t,n){"use strict";e.exports=n(19)},function(e,t,n){"use strict";function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(u){i=!0,o=u}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";function r(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";(function(e){var r=n(6),i=n.n(r),o=n(14),a=n.n(o),s=n(0),u=n.n(s),c=n(15),l=n(7),h=n(8),f=(n(29),n(16)),d=n(17),p=function(e,t){for(var n=[e[0]],r=0,i=t.length;r<i;r+=1)n.push(t[r],e[r+1]);return n},m="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},g=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},b=function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},w=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n},E=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t},S=function(e){return"object"===("undefined"===typeof e?"undefined":m(e))&&e.constructor===Object},T=Object.freeze([]),C=Object.freeze({});function I(e){return"function"===typeof e}function k(e){return e.displayName||e.name||"Component"}function N(e){return e&&"string"===typeof e.styledComponentId}var D="undefined"!==typeof e&&(Object({NODE_ENV:"production",PUBLIC_URL:"/reactjs"}).REACT_APP_SC_ATTR||Object({NODE_ENV:"production",PUBLIC_URL:"/reactjs"}).SC_ATTR)||"data-styled",A="undefined"!==typeof window&&"HTMLElement"in window,_="boolean"===typeof SC_DISABLE_SPEEDY&&SC_DISABLE_SPEEDY||"undefined"!==typeof e&&(Object({NODE_ENV:"production",PUBLIC_URL:"/reactjs"}).REACT_APP_SC_DISABLE_SPEEDY||Object({NODE_ENV:"production",PUBLIC_URL:"/reactjs"}).SC_DISABLE_SPEEDY)||!1;var x=function(e){function t(n){y(this,t);for(var r=arguments.length,i=Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];var a=E(this,e.call(this,"An error occurred. See https://github.com/styled-components/styled-components/blob/master/packages/styled-components/src/utils/errors.md#"+n+" for more information."+(i.length>0?" Additional arguments: "+i.join(", "):"")));return E(a)}return b(t,e),t}(Error),O=/^[^\S\n]*?\/\* sc-component-id:\s*(\S+)\s+\*\//gm,R=function(e){var t=""+(e||""),n=[];return t.replace(O,(function(e,t,r){return n.push({componentId:t,matchIndex:r}),e})),n.map((function(e,r){var i=e.componentId,o=e.matchIndex,a=n[r+1];return{componentId:i,cssFromDOM:a?t.slice(o,a.matchIndex):t.slice(o)}}))},P=/^\s*\/\/.*$/gm,M=new i.a({global:!1,cascade:!0,keyframe:!1,prefix:!1,compress:!1,semicolon:!0}),L=new i.a({global:!1,cascade:!0,keyframe:!1,prefix:!0,compress:!1,semicolon:!1}),F=[],q=function(e){if(-2===e){var t=F;return F=[],t}},V=a()((function(e){F.push(e)})),U=void 0,B=void 0,j=void 0,z=function(e,t,n){return t>0&&-1!==n.slice(0,t).indexOf(B)&&n.slice(t-B.length,t)!==B?"."+U:e};L.use([function(e,t,n){2===e&&n.length&&n[0].lastIndexOf(B)>0&&(n[0]=n[0].replace(j,z))},V,q]),M.use([V,q]);var Q=function(e){return M("",e)};function W(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"&",i=e.join("").replace(P,""),o=t&&n?n+" "+t+" { "+i+" }":i;return U=r,B=t,j=new RegExp("\\"+B+"\\b","g"),L(n||!t?"":t,o)}var K=function(){return n.nc},G=function(e,t,n){n&&((e[t]||(e[t]=Object.create(null)))[n]=!0)},H=function(e,t){e[t]=Object.create(null)},Y=function(e){return function(t,n){return void 0!==e[t]&&e[t][n]}},$=function(e){var t="";for(var n in e)t+=Object.keys(e[n]).join(" ")+" ";return t.trim()},X=function(e){if(e.sheet)return e.sheet;for(var t=e.ownerDocument.styleSheets.length,n=0;n<t;n+=1){var r=e.ownerDocument.styleSheets[n];if(r.ownerNode===e)return r}throw new x(10)},J=function(e,t,n){if(!t)return!1;var r=e.cssRules.length;try{e.insertRule(t,n<=r?n:r)}catch(i){return!1}return!0},Z=function(e){return"\n/* sc-component-id: "+e+" */\n"},ee=function(e,t){for(var n=0,r=0;r<=t;r+=1)n+=e[r];return n},te=function(e,t){return function(n){var r=K();return"<style "+[r&&'nonce="'+r+'"',D+'="'+$(t)+'"','data-styled-version="4.4.0"',n].filter(Boolean).join(" ")+">"+e()+"</style>"}},ne=function(e,t){return function(){var n,r=((n={})[D]=$(t),n["data-styled-version"]="4.4.0",n),i=K();return i&&(r.nonce=i),u.a.createElement("style",v({},r,{dangerouslySetInnerHTML:{__html:e()}}))}},re=function(e){return function(){return Object.keys(e)}},ie=function(e,t){return e.createTextNode(Z(t))},oe=function e(t,n){var r=void 0===t?Object.create(null):t,i=void 0===n?Object.create(null):n,o=function(e){var t=i[e];return void 0!==t?t:i[e]=[""]},a=function(){var e="";for(var t in i){var n=i[t][0];n&&(e+=Z(t)+n)}return e};return{clone:function(){var t=function(e){var t=Object.create(null);for(var n in e)t[n]=v({},e[n]);return t}(r),n=Object.create(null);for(var o in i)n[o]=[i[o][0]];return e(t,n)},css:a,getIds:re(i),hasNameForId:Y(r),insertMarker:o,insertRules:function(e,t,n){o(e)[0]+=t.join(" "),G(r,e,n)},removeRules:function(e){var t=i[e];void 0!==t&&(t[0]="",H(r,e))},sealed:!1,styleTag:null,toElement:ne(a,r),toHTML:te(a,r)}},ae=function(e,t,n,r,i){if(A&&!n){var o=function(e,t,n){var r=document;e?r=e.ownerDocument:t&&(r=t.ownerDocument);var i=r.createElement("style");i.setAttribute(D,""),i.setAttribute("data-styled-version","4.4.0");var o=K();if(o&&i.setAttribute("nonce",o),i.appendChild(r.createTextNode("")),e&&!t)e.appendChild(i);else{if(!t||!e||!t.parentNode)throw new x(6);t.parentNode.insertBefore(i,n?t:t.nextSibling)}return i}(e,t,r);return _?function(e,t){var n=Object.create(null),r=Object.create(null),i=void 0!==t,o=!1,a=function(t){var i=r[t];return void 0!==i?i:(r[t]=ie(e.ownerDocument,t),e.appendChild(r[t]),n[t]=Object.create(null),r[t])},s=function(){var e="";for(var t in r)e+=r[t].data;return e};return{clone:function(){throw new x(5)},css:s,getIds:re(r),hasNameForId:Y(n),insertMarker:a,insertRules:function(e,r,s){for(var u=a(e),c=[],l=r.length,h=0;h<l;h+=1){var f=r[h],d=i;if(d&&-1!==f.indexOf("@import"))c.push(f);else{d=!1;var p=h===l-1?"":" ";u.appendData(""+f+p)}}G(n,e,s),i&&c.length>0&&(o=!0,t().insertRules(e+"-import",c))},removeRules:function(a){var s=r[a];if(void 0!==s){var u=ie(e.ownerDocument,a);e.replaceChild(u,s),r[a]=u,H(n,a),i&&o&&t().removeRules(a+"-import")}},sealed:!1,styleTag:e,toElement:ne(s,n),toHTML:te(s,n)}}(o,i):function(e,t){var n=Object.create(null),r=Object.create(null),i=[],o=void 0!==t,a=!1,s=function(e){var t=r[e];return void 0!==t?t:(r[e]=i.length,i.push(0),H(n,e),r[e])},u=function(){var t=X(e).cssRules,n="";for(var o in r){n+=Z(o);for(var a=r[o],s=ee(i,a),u=s-i[a];u<s;u+=1){var c=t[u];void 0!==c&&(n+=c.cssText)}}return n};return{clone:function(){throw new x(5)},css:u,getIds:re(r),hasNameForId:Y(n),insertMarker:s,insertRules:function(r,u,c){for(var l=s(r),h=X(e),f=ee(i,l),d=0,p=[],m=u.length,y=0;y<m;y+=1){var g=u[y],v=o;v&&-1!==g.indexOf("@import")?p.push(g):J(h,g,f+d)&&(v=!1,d+=1)}o&&p.length>0&&(a=!0,t().insertRules(r+"-import",p)),i[l]+=d,G(n,r,c)},removeRules:function(s){var u=r[s];if(void 0!==u&&!1!==e.isConnected){var c=i[u];!function(e,t,n){for(var r=t-n,i=t;i>r;i-=1)e.deleteRule(i)}(X(e),ee(i,u)-1,c),i[u]=0,H(n,s),o&&a&&t().removeRules(s+"-import")}},sealed:!1,styleTag:e,toElement:ne(u,n),toHTML:te(u,n)}}(o,i)}return oe()},se=/\s+/,ue=void 0;ue=A?_?40:1e3:-1;var ce=0,le=void 0,he=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A?document.head:null,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];y(this,e),this.getImportRuleTag=function(){var e=t.importRuleTag;if(void 0!==e)return e;var n=t.tags[0];return t.importRuleTag=ae(t.target,n?n.styleTag:null,t.forceServer,!0)},ce+=1,this.id=ce,this.forceServer=r,this.target=r?null:n,this.tagMap={},this.deferred={},this.rehydratedNames={},this.ignoreRehydratedNames={},this.tags=[],this.capacity=1,this.clones=[]}return e.prototype.rehydrate=function(){if(!A||this.forceServer)return this;var e=[],t=[],n=!1,r=document.querySelectorAll("style["+D+'][data-styled-version="4.4.0"]'),i=r.length;if(!i)return this;for(var o=0;o<i;o+=1){var a=r[o];n||(n=!!a.getAttribute("data-styled-streamed"));for(var s,u=(a.getAttribute(D)||"").trim().split(se),c=u.length,l=0;l<c;l+=1)s=u[l],this.rehydratedNames[s]=!0;t.push.apply(t,R(a.textContent)),e.push(a)}var h=t.length;if(!h)return this;var f=this.makeTag(null);!function(e,t,n){for(var r=0,i=n.length;r<i;r+=1){var o=n[r],a=o.componentId,s=o.cssFromDOM,u=Q(s);e.insertRules(a,u)}for(var c=0,l=t.length;c<l;c+=1){var h=t[c];h.parentNode&&h.parentNode.removeChild(h)}}(f,e,t),this.capacity=Math.max(1,ue-h),this.tags.push(f);for(var d=0;d<h;d+=1)this.tagMap[t[d].componentId]=f;return this},e.reset=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];le=new e(void 0,t).rehydrate()},e.prototype.clone=function(){var t=new e(this.target,this.forceServer);return this.clones.push(t),t.tags=this.tags.map((function(e){for(var n=e.getIds(),r=e.clone(),i=0;i<n.length;i+=1)t.tagMap[n[i]]=r;return r})),t.rehydratedNames=v({},this.rehydratedNames),t.deferred=v({},this.deferred),t},e.prototype.sealAllTags=function(){this.capacity=1,this.tags.forEach((function(e){e.sealed=!0}))},e.prototype.makeTag=function(e){var t=e?e.styleTag:null;return ae(this.target,t,this.forceServer,!1,this.getImportRuleTag)},e.prototype.getTagForId=function(e){var t=this.tagMap[e];if(void 0!==t&&!t.sealed)return t;var n=this.tags[this.tags.length-1];return this.capacity-=1,0===this.capacity&&(this.capacity=ue,n=this.makeTag(n),this.tags.push(n)),this.tagMap[e]=n},e.prototype.hasId=function(e){return void 0!==this.tagMap[e]},e.prototype.hasNameForId=function(e,t){if(void 0===this.ignoreRehydratedNames[e]&&this.rehydratedNames[t])return!0;var n=this.tagMap[e];return void 0!==n&&n.hasNameForId(e,t)},e.prototype.deferredInject=function(e,t){if(void 0===this.tagMap[e]){for(var n=this.clones,r=0;r<n.length;r+=1)n[r].deferredInject(e,t);this.getTagForId(e).insertMarker(e),this.deferred[e]=t}},e.prototype.inject=function(e,t,n){for(var r=this.clones,i=0;i<r.length;i+=1)r[i].inject(e,t,n);var o=this.getTagForId(e);if(void 0!==this.deferred[e]){var a=this.deferred[e].concat(t);o.insertRules(e,a,n),this.deferred[e]=void 0}else o.insertRules(e,t,n)},e.prototype.remove=function(e){var t=this.tagMap[e];if(void 0!==t){for(var n=this.clones,r=0;r<n.length;r+=1)n[r].remove(e);t.removeRules(e),this.ignoreRehydratedNames[e]=!0,this.deferred[e]=void 0}},e.prototype.toHTML=function(){return this.tags.map((function(e){return e.toHTML()})).join("")},e.prototype.toReactElements=function(){var e=this.id;return this.tags.map((function(t,n){var r="sc-"+e+"-"+n;return Object(s.cloneElement)(t.toElement(),{key:r})}))},g(e,null,[{key:"master",get:function(){return le||(le=(new e).rehydrate())}},{key:"instance",get:function(){return e.master}}]),e}(),fe=function(){function e(t,n){var r=this;y(this,e),this.inject=function(e){e.hasNameForId(r.id,r.name)||e.inject(r.id,r.rules,r.name)},this.toString=function(){throw new x(12,String(r.name))},this.name=t,this.rules=n,this.id="sc-keyframes-"+t}return e.prototype.getName=function(){return this.name},e}(),de=/([A-Z])/g,pe=/^ms-/;function me(e){return e.replace(de,"-$1").toLowerCase().replace(pe,"-ms-")}var ye=function(e){return void 0===e||null===e||!1===e||""===e},ge=function e(t,n){var r=[];return Object.keys(t).forEach((function(n){if(!ye(t[n])){if(S(t[n]))return r.push.apply(r,e(t[n],n)),r;if(I(t[n]))return r.push(me(n)+":",t[n],";"),r;r.push(me(n)+": "+(i=n,null==(o=t[n])||"boolean"===typeof o||""===o?"":"number"!==typeof o||0===o||i in c.a?String(o).trim():o+"px")+";")}var i,o;return r})),n?[n+" {"].concat(r,["}"]):r};function ve(e,t,n){if(Array.isArray(e)){for(var r,i=[],o=0,a=e.length;o<a;o+=1)null!==(r=ve(e[o],t,n))&&(Array.isArray(r)?i.push.apply(i,r):i.push(r));return i}return ye(e)?null:N(e)?"."+e.styledComponentId:I(e)?"function"!==typeof(s=e)||s.prototype&&s.prototype.isReactComponent||!t?e:ve(e(t),t,n):e instanceof fe?n?(e.inject(n),e.getName()):e:S(e)?ge(e):e.toString();var s}function be(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return I(e)||S(e)?ve(p(T,[e].concat(n))):ve(p(e,n))}function we(e){for(var t,n=0|e.length,r=0|n,i=0;n>=4;)t=1540483477*(65535&(t=255&e.charCodeAt(i)|(255&e.charCodeAt(++i))<<8|(255&e.charCodeAt(++i))<<16|(255&e.charCodeAt(++i))<<24))+((1540483477*(t>>>16)&65535)<<16),r=1540483477*(65535&r)+((1540483477*(r>>>16)&65535)<<16)^(t=1540483477*(65535&(t^=t>>>24))+((1540483477*(t>>>16)&65535)<<16)),n-=4,++i;switch(n){case 3:r^=(255&e.charCodeAt(i+2))<<16;case 2:r^=(255&e.charCodeAt(i+1))<<8;case 1:r=1540483477*(65535&(r^=255&e.charCodeAt(i)))+((1540483477*(r>>>16)&65535)<<16)}return((r=1540483477*(65535&(r^=r>>>13))+((1540483477*(r>>>16)&65535)<<16))^r>>>15)>>>0}var Ee=52,Se=function(e){return String.fromCharCode(e+(e>25?39:97))};function Te(e){var t="",n=void 0;for(n=e;n>Ee;n=Math.floor(n/Ee))t=Se(n%Ee)+t;return Se(n%Ee)+t}function Ce(e,t){for(var n=0;n<e.length;n+=1){var r=e[n];if(Array.isArray(r)&&!Ce(r,t))return!1;if(I(r)&&!N(r))return!1}return!t.some((function(e){return I(e)||function(e){for(var t in e)if(I(e[t]))return!0;return!1}(e)}))}var Ie,ke=function(e){return Te(we(e))},Ne=function(){function e(t,n,r){y(this,e),this.rules=t,this.isStatic=Ce(t,n),this.componentId=r,he.master.hasId(r)||he.master.deferredInject(r,[])}return e.prototype.generateAndInjectStyles=function(e,t){var n=this.isStatic,r=this.componentId,i=this.lastClassName;if(A&&n&&"string"===typeof i&&t.hasNameForId(r,i))return i;var o=ve(this.rules,e,t),a=ke(this.componentId+o.join(""));return t.hasNameForId(r,a)||t.inject(this.componentId,W(o,"."+a,void 0,r),a),this.lastClassName=a,a},e.generateName=function(e){return ke(e)},e}(),De=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:C,r=!!n&&e.theme===n.theme,i=e.theme&&!r?e.theme:t||n.theme;return i},Ae=/[[\].#*$><+~=|^:(),"'`-]+/g,_e=/(^-|-$)/g;function xe(e){return e.replace(Ae,"-").replace(_e,"")}function Oe(e){return"string"===typeof e&&!0}var Re={childContextTypes:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDerivedStateFromProps:!0,propTypes:!0,type:!0},Pe={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},Me=((Ie={})[l.ForwardRef]={$$typeof:!0,render:!0},Ie),Le=Object.defineProperty,Fe=Object.getOwnPropertyNames,qe=Object.getOwnPropertySymbols,Ve=void 0===qe?function(){return[]}:qe,Ue=Object.getOwnPropertyDescriptor,Be=Object.getPrototypeOf,je=Object.prototype,ze=Array.prototype;function Qe(e,t,n){if("string"!==typeof t){var r=Be(t);r&&r!==je&&Qe(e,r,n);for(var i=ze.concat(Fe(t),Ve(t)),o=Me[e.$$typeof]||Re,a=Me[t.$$typeof]||Re,s=i.length,u=void 0,c=void 0;s--;)if(c=i[s],!Pe[c]&&(!n||!n[c])&&(!a||!a[c])&&(!o||!o[c])&&(u=Ue(t,c)))try{Le(e,c,u)}catch(l){}return e}return e}var We=Object(s.createContext)(),Ke=We.Consumer,Ge=(function(e){function t(n){y(this,t);var r=E(this,e.call(this,n));return r.getContext=Object(h.a)(r.getContext.bind(r)),r.renderInner=r.renderInner.bind(r),r}b(t,e),t.prototype.render=function(){return this.props.children?u.a.createElement(We.Consumer,null,this.renderInner):null},t.prototype.renderInner=function(e){var t=this.getContext(this.props.theme,e);return u.a.createElement(We.Provider,{value:t},this.props.children)},t.prototype.getTheme=function(e,t){if(I(e))return e(t);if(null===e||Array.isArray(e)||"object"!==("undefined"===typeof e?"undefined":m(e)))throw new x(8);return v({},t,e)},t.prototype.getContext=function(e,t){return this.getTheme(e,t)}}(s.Component),function(){function e(){y(this,e),this.masterSheet=he.master,this.instance=this.masterSheet.clone(),this.sealed=!1}e.prototype.seal=function(){if(!this.sealed){var e=this.masterSheet.clones.indexOf(this.instance);this.masterSheet.clones.splice(e,1),this.sealed=!0}},e.prototype.collectStyles=function(e){if(this.sealed)throw new x(2);return u.a.createElement(Ye,{sheet:this.instance},e)},e.prototype.getStyleTags=function(){return this.seal(),this.instance.toHTML()},e.prototype.getStyleElement=function(){return this.seal(),this.instance.toReactElements()},e.prototype.interleaveWithNodeStream=function(e){throw new x(3)}}(),Object(s.createContext)()),He=Ge.Consumer,Ye=function(e){function t(n){y(this,t);var r=E(this,e.call(this,n));return r.getContext=Object(h.a)(r.getContext),r}return b(t,e),t.prototype.getContext=function(e,t){if(e)return e;if(t)return new he(t);throw new x(4)},t.prototype.render=function(){var e=this.props,t=e.children,n=e.sheet,r=e.target;return u.a.createElement(Ge.Provider,{value:this.getContext(n,r)},t)},t}(s.Component),$e={};var Xe=function(e){function t(){y(this,t);var n=E(this,e.call(this));return n.attrs={},n.renderOuter=n.renderOuter.bind(n),n.renderInner=n.renderInner.bind(n),n}return b(t,e),t.prototype.render=function(){return u.a.createElement(He,null,this.renderOuter)},t.prototype.renderOuter=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:he.master;return this.styleSheet=e,this.props.forwardedComponent.componentStyle.isStatic?this.renderInner():u.a.createElement(Ke,null,this.renderInner)},t.prototype.renderInner=function(e){var t=this.props.forwardedComponent,n=t.componentStyle,r=t.defaultProps,i=(t.displayName,t.foldedComponentIds),o=t.styledComponentId,a=t.target,u=(t.usesTheme,void 0),c=void 0;n.isStatic?u=this.generateAndInjectStyles(C,this.props):(c=De(this.props,e,r),u=this.generateAndInjectStyles(c||C,this.props));var l=this.props.as||this.attrs.as||a,h=Oe(l),d={},p=v({},this.props,this.attrs),m=void 0;for(m in p)"forwardedComponent"!==m&&"as"!==m&&("forwardedRef"===m?d.ref=p[m]:"forwardedAs"===m?d.as=p[m]:h&&!Object(f.a)(m)||(d[m]=p[m]));return this.props.style&&this.attrs.style&&(d.style=v({},this.attrs.style,this.props.style)),d.className=Array.prototype.concat(i,o,u!==o?u:null,this.props.className,this.attrs.className).filter(Boolean).join(" "),Object(s.createElement)(l,d)},t.prototype.buildExecutionContext=function(e,t,n){var r=this,i=v({},t,{theme:e});return n.length?(this.attrs={},n.forEach((function(e){var t,n=e,o=!1,a=void 0,s=void 0;for(s in I(n)&&(n=n(i),o=!0),n)a=n[s],o||!I(a)||(t=a)&&t.prototype&&t.prototype.isReactComponent||N(a)||(a=a(i)),r.attrs[s]=a,i[s]=a})),i):i},t.prototype.generateAndInjectStyles=function(e,t){var n=t.forwardedComponent,r=n.attrs,i=n.componentStyle;n.warnTooManyClasses;return i.isStatic&&!r.length?i.generateAndInjectStyles(C,this.styleSheet):i.generateAndInjectStyles(this.buildExecutionContext(e,t,r),this.styleSheet)},t}(s.Component);function Je(e,t,n){var r=N(e),i=!Oe(e),o=t.displayName,a=void 0===o?function(e){return Oe(e)?"styled."+e:"Styled("+k(e)+")"}(e):o,s=t.componentId,c=void 0===s?function(e,t,n){var r="string"!==typeof t?"sc":xe(t),i=($e[r]||0)+1;$e[r]=i;var o=r+"-"+e.generateName(r+i);return n?n+"-"+o:o}(Ne,t.displayName,t.parentComponentId):s,l=t.ParentComponent,h=void 0===l?Xe:l,f=t.attrs,p=void 0===f?T:f,m=t.displayName&&t.componentId?xe(t.displayName)+"-"+t.componentId:t.componentId||c,y=r&&e.attrs?Array.prototype.concat(e.attrs,p).filter(Boolean):p,g=new Ne(r?e.componentStyle.rules.concat(n):n,y,m),b=void 0,E=function(e,t){return u.a.createElement(h,v({},e,{forwardedComponent:b,forwardedRef:t}))};return E.displayName=a,(b=u.a.forwardRef(E)).displayName=a,b.attrs=y,b.componentStyle=g,b.foldedComponentIds=r?Array.prototype.concat(e.foldedComponentIds,e.styledComponentId):T,b.styledComponentId=m,b.target=r?e.target:e,b.withComponent=function(e){var r=t.componentId,i=w(t,["componentId"]),o=r&&r+"-"+(Oe(e)?e:xe(k(e)));return Je(e,v({},i,{attrs:y,componentId:o,ParentComponent:h}),n)},Object.defineProperty(b,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(t){this._foldedDefaultProps=r?Object(d.a)(e.defaultProps,t):t}}),b.toString=function(){return"."+b.styledComponentId},i&&Qe(b,e,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,styledComponentId:!0,target:!0,withComponent:!0}),b}var Ze=function(e){return function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:C;if(!Object(l.isValidElementType)(n))throw new x(1,String(n));var i=function(){return t(n,r,be.apply(void 0,arguments))};return i.withConfig=function(i){return e(t,n,v({},r,i))},i.attrs=function(i){return e(t,n,v({},r,{attrs:Array.prototype.concat(r.attrs,i).filter(Boolean)}))},i}(Je,e)};["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"].forEach((function(e){Ze[e]=Ze(e)}));!function(){function e(t,n){y(this,e),this.rules=t,this.componentId=n,this.isStatic=Ce(t,T),he.master.hasId(n)||he.master.deferredInject(n,[])}e.prototype.createStyles=function(e,t){var n=W(ve(this.rules,e,t),"");t.inject(this.componentId,n)},e.prototype.removeStyles=function(e){var t=this.componentId;e.hasId(t)&&e.remove(t)},e.prototype.renderStyles=function(e,t){this.removeStyles(t),this.createStyles(e,t)}}();A&&(window.scCGSHMRCache={});t.a=Ze}).call(this,n(27))},function(e,t,n){"use strict";var r,i=(r=n(10))&&"object"===typeof r&&"default"in r?r.default:r;e.exports=i},function(e,t,n){e.exports=function e(t){"use strict";var n=/^\0+/g,r=/[\0\r\f]/g,i=/: */g,o=/zoo|gra/,a=/([,: ])(transform)/g,s=/,+\s*(?![^(]*[)])/g,u=/ +\s*(?![^(]*[)])/g,c=/ *[\0] */g,l=/,\r+?/g,h=/([\t\r\n ])*\f?&/g,f=/:global\(((?:[^\(\)\[\]]*|\[.*\]|\([^\(\)]*\))*)\)/g,d=/\W+/g,p=/@(k\w+)\s*(\S*)\s*/,m=/::(place)/g,y=/:(read-only)/g,g=/\s+(?=[{\];=:>])/g,v=/([[}=:>])\s+/g,b=/(\{[^{]+?);(?=\})/g,w=/\s{2,}/g,E=/([^\(])(:+) */g,S=/[svh]\w+-[tblr]{2}/,T=/\(\s*(.*)\s*\)/g,C=/([\s\S]*?);/g,I=/-self|flex-/g,k=/[^]*?(:[rp][el]a[\w-]+)[^]*/,N=/stretch|:\s*\w+\-(?:conte|avail)/,D=/([^-])(image-set\()/,A="-webkit-",_="-moz-",x="-ms-",O=59,R=125,P=123,M=40,L=41,F=91,q=93,V=10,U=13,B=9,j=64,z=32,Q=38,W=45,K=95,G=42,H=44,Y=58,$=39,X=34,J=47,Z=62,ee=43,te=126,ne=0,re=12,ie=11,oe=107,ae=109,se=115,ue=112,ce=111,le=105,he=99,fe=100,de=112,pe=1,me=1,ye=0,ge=1,ve=1,be=1,we=0,Ee=0,Se=0,Te=[],Ce=[],Ie=0,ke=null,Ne=-2,De=-1,Ae=0,_e=1,xe=2,Oe=3,Re=0,Pe=1,Me="",Le="",Fe="";function qe(e,t,i,o,a){for(var s,u,l=0,h=0,f=0,d=0,g=0,v=0,b=0,w=0,S=0,C=0,I=0,k=0,N=0,D=0,K=0,we=0,Ce=0,ke=0,Ne=0,De=i.length,Ue=De-1,Ke="",Ge="",He="",Ye="",$e="",Xe="";K<De;){if(b=i.charCodeAt(K),K===Ue&&h+d+f+l!==0&&(0!==h&&(b=h===J?V:J),d=f=l=0,De++,Ue++),h+d+f+l===0){if(K===Ue&&(we>0&&(Ge=Ge.replace(r,"")),Ge.trim().length>0)){switch(b){case z:case B:case O:case U:case V:break;default:Ge+=i.charAt(K)}b=O}if(1===Ce)switch(b){case P:case R:case O:case X:case $:case M:case L:case H:Ce=0;case B:case U:case V:case z:break;default:for(Ce=0,Ne=K,g=b,K--,b=O;Ne<De;)switch(i.charCodeAt(Ne++)){case V:case U:case O:++K,b=g,Ne=De;break;case Y:we>0&&(++K,b=g);case P:Ne=De}}switch(b){case P:for(g=(Ge=Ge.trim()).charCodeAt(0),I=1,Ne=++K;K<De;){switch(b=i.charCodeAt(K)){case P:I++;break;case R:I--;break;case J:switch(v=i.charCodeAt(K+1)){case G:case J:K=We(v,K,Ue,i)}break;case F:b++;case M:b++;case X:case $:for(;K++<Ue&&i.charCodeAt(K)!==b;);}if(0===I)break;K++}switch(He=i.substring(Ne,K),g===ne&&(g=(Ge=Ge.replace(n,"").trim()).charCodeAt(0)),g){case j:switch(we>0&&(Ge=Ge.replace(r,"")),v=Ge.charCodeAt(1)){case fe:case ae:case se:case W:s=t;break;default:s=Te}if(Ne=(He=qe(t,s,He,v,a+1)).length,Se>0&&0===Ne&&(Ne=Ge.length),Ie>0&&(s=Ve(Te,Ge,ke),u=Qe(Oe,He,s,t,me,pe,Ne,v,a,o),Ge=s.join(""),void 0!==u&&0===(Ne=(He=u.trim()).length)&&(v=0,He="")),Ne>0)switch(v){case se:Ge=Ge.replace(T,ze);case fe:case ae:case W:He=Ge+"{"+He+"}";break;case oe:He=(Ge=Ge.replace(p,"$1 $2"+(Pe>0?Me:"")))+"{"+He+"}",He=1===ve||2===ve&&je("@"+He,3)?"@"+A+He+"@"+He:"@"+He;break;default:He=Ge+He,o===de&&(Ye+=He,He="")}else He="";break;default:He=qe(t,Ve(t,Ge,ke),He,o,a+1)}$e+=He,k=0,Ce=0,D=0,we=0,ke=0,N=0,Ge="",He="",b=i.charCodeAt(++K);break;case R:case O:if((Ne=(Ge=(we>0?Ge.replace(r,""):Ge).trim()).length)>1)switch(0===D&&((g=Ge.charCodeAt(0))===W||g>96&&g<123)&&(Ne=(Ge=Ge.replace(" ",":")).length),Ie>0&&void 0!==(u=Qe(_e,Ge,t,e,me,pe,Ye.length,o,a,o))&&0===(Ne=(Ge=u.trim()).length)&&(Ge="\0\0"),g=Ge.charCodeAt(0),v=Ge.charCodeAt(1),g){case ne:break;case j:if(v===le||v===he){Xe+=Ge+i.charAt(K);break}default:if(Ge.charCodeAt(Ne-1)===Y)break;Ye+=Be(Ge,g,v,Ge.charCodeAt(2))}k=0,Ce=0,D=0,we=0,ke=0,Ge="",b=i.charCodeAt(++K)}}switch(b){case U:case V:if(h+d+f+l+Ee===0)switch(C){case L:case $:case X:case j:case te:case Z:case G:case ee:case J:case W:case Y:case H:case O:case P:case R:break;default:D>0&&(Ce=1)}h===J?h=0:ge+k===0&&o!==oe&&Ge.length>0&&(we=1,Ge+="\0"),Ie*Re>0&&Qe(Ae,Ge,t,e,me,pe,Ye.length,o,a,o),pe=1,me++;break;case O:case R:if(h+d+f+l===0){pe++;break}default:switch(pe++,Ke=i.charAt(K),b){case B:case z:if(d+l+h===0)switch(w){case H:case Y:case B:case z:Ke="";break;default:b!==z&&(Ke=" ")}break;case ne:Ke="\\0";break;case re:Ke="\\f";break;case ie:Ke="\\v";break;case Q:d+h+l===0&&ge>0&&(ke=1,we=1,Ke="\f"+Ke);break;case 108:if(d+h+l+ye===0&&D>0)switch(K-D){case 2:w===ue&&i.charCodeAt(K-3)===Y&&(ye=w);case 8:S===ce&&(ye=S)}break;case Y:d+h+l===0&&(D=K);break;case H:h+f+d+l===0&&(we=1,Ke+="\r");break;case X:case $:0===h&&(d=d===b?0:0===d?b:d);break;case F:d+h+f===0&&l++;break;case q:d+h+f===0&&l--;break;case L:d+h+l===0&&f--;break;case M:if(d+h+l===0){if(0===k)switch(2*w+3*S){case 533:break;default:I=0,k=1}f++}break;case j:h+f+d+l+D+N===0&&(N=1);break;case G:case J:if(d+l+f>0)break;switch(h){case 0:switch(2*b+3*i.charCodeAt(K+1)){case 235:h=J;break;case 220:Ne=K,h=G}break;case G:b===J&&w===G&&Ne+2!==K&&(33===i.charCodeAt(Ne+2)&&(Ye+=i.substring(Ne,K+1)),Ke="",h=0)}}if(0===h){if(ge+d+l+N===0&&o!==oe&&b!==O)switch(b){case H:case te:case Z:case ee:case L:case M:if(0===k){switch(w){case B:case z:case V:case U:Ke+="\0";break;default:Ke="\0"+Ke+(b===H?"":"\0")}we=1}else switch(b){case M:D+7===K&&108===w&&(D=0),k=++I;break;case L:0==(k=--I)&&(we=1,Ke+="\0")}break;case B:case z:switch(w){case ne:case P:case R:case O:case H:case re:case B:case z:case V:case U:break;default:0===k&&(we=1,Ke+="\0")}}Ge+=Ke,b!==z&&b!==B&&(C=b)}}S=w,w=b,K++}if(Ne=Ye.length,Se>0&&0===Ne&&0===$e.length&&0===t[0].length==0&&(o!==ae||1===t.length&&(ge>0?Le:Fe)===t[0])&&(Ne=t.join(",").length+2),Ne>0){if(s=0===ge&&o!==oe?function(e){for(var t,n,i=0,o=e.length,a=Array(o);i<o;++i){for(var s=e[i].split(c),u="",l=0,h=0,f=0,d=0,p=s.length;l<p;++l)if(!(0===(h=(n=s[l]).length)&&p>1)){if(f=u.charCodeAt(u.length-1),d=n.charCodeAt(0),t="",0!==l)switch(f){case G:case te:case Z:case ee:case z:case M:break;default:t=" "}switch(d){case Q:n=t+Le;case te:case Z:case ee:case z:case L:case M:break;case F:n=t+n+Le;break;case Y:switch(2*n.charCodeAt(1)+3*n.charCodeAt(2)){case 530:if(be>0){n=t+n.substring(8,h-1);break}default:(l<1||s[l-1].length<1)&&(n=t+Le+n)}break;case H:t="";default:n=h>1&&n.indexOf(":")>0?t+n.replace(E,"$1"+Le+"$2"):t+n+Le}u+=n}a[i]=u.replace(r,"").trim()}return a}(t):t,Ie>0&&void 0!==(u=Qe(xe,Ye,s,e,me,pe,Ne,o,a,o))&&0===(Ye=u).length)return Xe+Ye+$e;if(Ye=s.join(",")+"{"+Ye+"}",ve*ye!=0){switch(2!==ve||je(Ye,2)||(ye=0),ye){case ce:Ye=Ye.replace(y,":"+_+"$1")+Ye;break;case ue:Ye=Ye.replace(m,"::"+A+"input-$1")+Ye.replace(m,"::"+_+"$1")+Ye.replace(m,":"+x+"input-$1")+Ye}ye=0}}return Xe+Ye+$e}function Ve(e,t,n){var r=t.trim().split(l),i=r,o=r.length,a=e.length;switch(a){case 0:case 1:for(var s=0,u=0===a?"":e[0]+" ";s<o;++s)i[s]=Ue(u,i[s],n,a).trim();break;default:s=0;var c=0;for(i=[];s<o;++s)for(var h=0;h<a;++h)i[c++]=Ue(e[h]+" ",r[s],n,a).trim()}return i}function Ue(e,t,n,r){var i=t,o=i.charCodeAt(0);switch(o<33&&(o=(i=i.trim()).charCodeAt(0)),o){case Q:switch(ge+r){case 0:case 1:if(0===e.trim().length)break;default:return i.replace(h,"$1"+e.trim())}break;case Y:switch(i.charCodeAt(1)){case 103:if(be>0&&ge>0)return i.replace(f,"$1").replace(h,"$1"+Fe);break;default:return e.trim()+i.replace(h,"$1"+e.trim())}default:if(n*ge>0&&i.indexOf("\f")>0)return i.replace(h,(e.charCodeAt(0)===Y?"":"$1")+e.trim())}return e+i}function Be(e,t,n,r){var c,l=0,h=e+";",f=2*t+3*n+4*r;if(944===f)return function(e){var t=e.length,n=e.indexOf(":",9)+1,r=e.substring(0,n).trim(),i=e.substring(n,t-1).trim();switch(e.charCodeAt(9)*Pe){case 0:break;case W:if(110!==e.charCodeAt(10))break;default:var o=i.split((i="",s)),a=0;for(n=0,t=o.length;a<t;n=0,++a){for(var c=o[a],l=c.split(u);c=l[n];){var h=c.charCodeAt(0);if(1===Pe&&(h>j&&h<90||h>96&&h<123||h===K||h===W&&c.charCodeAt(1)!==W))switch(isNaN(parseFloat(c))+(-1!==c.indexOf("("))){case 1:switch(c){case"infinite":case"alternate":case"backwards":case"running":case"normal":case"forwards":case"both":case"none":case"linear":case"ease":case"ease-in":case"ease-out":case"ease-in-out":case"paused":case"reverse":case"alternate-reverse":case"inherit":case"initial":case"unset":case"step-start":case"step-end":break;default:c+=Me}}l[n++]=c}i+=(0===a?"":",")+l.join(" ")}}return i=r+i+";",1===ve||2===ve&&je(i,1)?A+i+i:i}(h);if(0===ve||2===ve&&!je(h,1))return h;switch(f){case 1015:return 97===h.charCodeAt(10)?A+h+h:h;case 951:return 116===h.charCodeAt(3)?A+h+h:h;case 963:return 110===h.charCodeAt(5)?A+h+h:h;case 1009:if(100!==h.charCodeAt(4))break;case 969:case 942:return A+h+h;case 978:return A+h+_+h+h;case 1019:case 983:return A+h+_+h+x+h+h;case 883:return h.charCodeAt(8)===W?A+h+h:h.indexOf("image-set(",11)>0?h.replace(D,"$1"+A+"$2")+h:h;case 932:if(h.charCodeAt(4)===W)switch(h.charCodeAt(5)){case 103:return A+"box-"+h.replace("-grow","")+A+h+x+h.replace("grow","positive")+h;case 115:return A+h+x+h.replace("shrink","negative")+h;case 98:return A+h+x+h.replace("basis","preferred-size")+h}return A+h+x+h+h;case 964:return A+h+x+"flex-"+h+h;case 1023:if(99!==h.charCodeAt(8))break;return c=h.substring(h.indexOf(":",15)).replace("flex-","").replace("space-between","justify"),A+"box-pack"+c+A+h+x+"flex-pack"+c+h;case 1005:return o.test(h)?h.replace(i,":"+A)+h.replace(i,":"+_)+h:h;case 1e3:switch(l=(c=h.substring(13).trim()).indexOf("-")+1,c.charCodeAt(0)+c.charCodeAt(l)){case 226:c=h.replace(S,"tb");break;case 232:c=h.replace(S,"tb-rl");break;case 220:c=h.replace(S,"lr");break;default:return h}return A+h+x+c+h;case 1017:if(-1===h.indexOf("sticky",9))return h;case 975:switch(l=(h=e).length-10,f=(c=(33===h.charCodeAt(l)?h.substring(0,l):h).substring(e.indexOf(":",7)+1).trim()).charCodeAt(0)+(0|c.charCodeAt(7))){case 203:if(c.charCodeAt(8)<111)break;case 115:h=h.replace(c,A+c)+";"+h;break;case 207:case 102:h=h.replace(c,A+(f>102?"inline-":"")+"box")+";"+h.replace(c,A+c)+";"+h.replace(c,x+c+"box")+";"+h}return h+";";case 938:if(h.charCodeAt(5)===W)switch(h.charCodeAt(6)){case 105:return c=h.replace("-items",""),A+h+A+"box-"+c+x+"flex-"+c+h;case 115:return A+h+x+"flex-item-"+h.replace(I,"")+h;default:return A+h+x+"flex-line-pack"+h.replace("align-content","").replace(I,"")+h}break;case 973:case 989:if(h.charCodeAt(3)!==W||122===h.charCodeAt(4))break;case 931:case 953:if(!0===N.test(e))return 115===(c=e.substring(e.indexOf(":")+1)).charCodeAt(0)?Be(e.replace("stretch","fill-available"),t,n,r).replace(":fill-available",":stretch"):h.replace(c,A+c)+h.replace(c,_+c.replace("fill-",""))+h;break;case 962:if(h=A+h+(102===h.charCodeAt(5)?x+h:"")+h,n+r===211&&105===h.charCodeAt(13)&&h.indexOf("transform",10)>0)return h.substring(0,h.indexOf(";",27)+1).replace(a,"$1"+A+"$2")+h}return h}function je(e,t){var n=e.indexOf(1===t?":":"{"),r=e.substring(0,3!==t?n:10),i=e.substring(n+1,e.length-1);return ke(2!==t?r:r.replace(k,"$1"),i,t)}function ze(e,t){var n=Be(t,t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2));return n!==t+";"?n.replace(C," or ($1)").substring(4):"("+t+")"}function Qe(e,t,n,r,i,o,a,s,u,c){for(var l,h=0,f=t;h<Ie;++h)switch(l=Ce[h].call(Ge,e,f,n,r,i,o,a,s,u,c)){case void 0:case!1:case!0:case null:break;default:f=l}if(f!==t)return f}function We(e,t,n,r){for(var i=t+1;i<n;++i)switch(r.charCodeAt(i)){case J:if(e===G&&r.charCodeAt(i-1)===G&&t+2!==i)return i+1;break;case V:if(e===J)return i+1}return i}function Ke(e){for(var t in e){var n=e[t];switch(t){case"keyframe":Pe=0|n;break;case"global":be=0|n;break;case"cascade":ge=0|n;break;case"compress":we=0|n;break;case"semicolon":Ee=0|n;break;case"preserve":Se=0|n;break;case"prefix":ke=null,n?"function"!=typeof n?ve=1:(ve=2,ke=n):ve=0}}return Ke}function Ge(t,n){if(void 0!==this&&this.constructor===Ge)return e(t);var i=t,o=i.charCodeAt(0);o<33&&(o=(i=i.trim()).charCodeAt(0)),Pe>0&&(Me=i.replace(d,o===F?"":"-")),o=1,1===ge?Fe=i:Le=i;var a,s=[Fe];Ie>0&&void 0!==(a=Qe(De,n,s,s,me,pe,0,0,0,0))&&"string"==typeof a&&(n=a);var u=qe(Te,s,n,0,0);return Ie>0&&void 0!==(a=Qe(Ne,u,s,s,me,pe,u.length,0,0,0))&&"string"!=typeof(u=a)&&(o=0),Me="",Fe="",Le="",ye=0,me=1,pe=1,we*o==0?u:u.replace(r,"").replace(g,"").replace(v,"$1").replace(b,"$1").replace(w," ")}return Ge.use=function e(t){switch(t){case void 0:case null:Ie=Ce.length=0;break;default:if("function"==typeof t)Ce[Ie++]=t;else if("object"==typeof t)for(var n=0,r=t.length;n<r;++n)e(t[n]);else Re=0|!!t}return e},Ge.set=Ke,void 0!==t&&Ke(t),Ge}(null)},function(e,t,n){"use strict";e.exports=n(28)},function(e,t,n){"use strict";function r(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}t.a=function(e,t){var n;void 0===t&&(t=r);var i,o=[],a=!1;return function(){for(var r=[],s=0;s<arguments.length;s++)r[s]=arguments[s];return a&&n===this&&t(r,o)?i:(i=e.apply(this,r),a=!0,n=this,o=r,i)}}},function(e,t,n){"use strict";var r=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;function a(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(i){return!1}}()?Object.assign:function(e,t){for(var n,s,u=a(e),c=1;c<arguments.length;c++){for(var l in n=Object(arguments[c]))i.call(n,l)&&(u[l]=n[l]);if(r){s=r(n);for(var h=0;h<s.length;h++)o.call(n,s[h])&&(u[s[h]]=n[s[h]])}}return u}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=n(11),o=n(24),a=n(25),s=((r={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",r["bad-app-name"]="Illegal App name: '{$appName}",r["duplicate-app"]="Firebase App named '{$appName}' already exists",r["app-deleted"]="Firebase App named '{$appName}' already deleted",r["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",r),u=new o.ErrorFactory("app","Firebase",s),c="[DEFAULT]",l=function(){function e(e,t,n){var r=this;this.firebase_=n,this.isDeleted_=!1,this.services_={},this.tokenListeners_=[],this.analyticsEventRequests_=[],this.name_=t.name,this.automaticDataCollectionEnabled_=t.automaticDataCollectionEnabled||!1,this.options_=o.deepCopy(e);var i=this;this.INTERNAL={getUid:function(){return null},getToken:function(){return Promise.resolve(null)},addAuthTokenListener:function(e){r.tokenListeners_.push(e),setTimeout((function(){return e(null)}),0)},removeAuthTokenListener:function(e){r.tokenListeners_=r.tokenListeners_.filter((function(t){return t!==e}))},analytics:{logEvent:function(){i.analyticsEventRequests_.push(arguments)}}}}return Object.defineProperty(e.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(e){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!0,configurable:!0}),e.prototype.delete=function(){var e=this;return new Promise((function(t){e.checkDestroyed_(),t()})).then((function(){e.firebase_.INTERNAL.removeApp(e.name_);for(var t=[],n=0,r=Object.keys(e.services_);n<r.length;n++)for(var i=r[n],o=0,a=Object.keys(e.services_[i]);o<a.length;o++){var s=a[o];t.push(e.services_[i][s])}return Promise.all(t.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()})))})).then((function(){e.isDeleted_=!0,e.services_={}}))},e.prototype._getService=function(e,t){if(void 0===t&&(t=c),this.checkDestroyed_(),this.services_[e]||(this.services_[e]={}),!this.services_[e][t]){var n=t!==c?t:void 0,r=this.firebase_.INTERNAL.factories[e](this,this.extendApp.bind(this),n);this.services_[e][t]=r}return this.services_[e][t]},e.prototype._removeServiceInstance=function(e,t){void 0===t&&(t=c),this.services_[e]&&this.services_[e][t]&&delete this.services_[e][t]},e.prototype.extendApp=function(e){if(o.deepExtend(this,e),e.INTERNAL){if(e.INTERNAL.addAuthTokenListener){for(var t=0,n=this.tokenListeners_;t<n.length;t++){var r=n[t];this.INTERNAL.addAuthTokenListener(r)}this.tokenListeners_=[]}if(e.INTERNAL.analytics){for(var i=0,a=this.analyticsEventRequests_;i<a.length;i++){var s=a[i];this.INTERNAL.analytics.logEvent.apply(void 0,s)}this.analyticsEventRequests_=[]}}},e.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw u.create("app-deleted",{appName:this.name_})},e}();l.prototype.name&&l.prototype.options||l.prototype.delete||console.log("dc");var h="7.2.1",f=new a.Logger("@firebase/app");if(o.isBrowser()&&void 0!==self.firebase){f.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var d=self.firebase.SDK_VERSION;d&&d.indexOf("LITE")>=0&&f.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var p=function e(){var t=function(e){var t={},n={},r={},i={__esModule:!0,initializeApp:function(n,r){void 0===r&&(r={});if("object"!==typeof r||null===r){r={name:r}}var a=r;void 0===a.name&&(a.name=c);var s=a.name;if("string"!==typeof s||!s)throw u.create("bad-app-name",{appName:String(s)});if(o.contains(t,s))throw u.create("duplicate-app",{appName:s});var h=new e(n,a,i);return t[s]=h,l(h,"create"),h},app:a,apps:null,SDK_VERSION:h,INTERNAL:{registerService:function(t,c,l,h,d){void 0===d&&(d=!1);if(n[t])return f.debug("There were multiple attempts to register service "+t+"."),i[t];n[t]=c,h&&(r[t]=h,s().forEach((function(e){h("create",e)})));function p(e){if(void 0===e&&(e=a()),"function"!==typeof e[t])throw u.create("invalid-app-argument",{appName:t});return e[t]()}void 0!==l&&o.deepExtend(p,l);return i[t]=p,e.prototype[t]=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=this._getService.bind(this,t);return r.apply(this,d?e:[])},p},removeApp:function(e){l(t[e],"delete"),delete t[e]},factories:n,useAsService:d}};function a(e){if(e=e||c,!o.contains(t,e))throw u.create("no-app",{appName:e});return t[e]}function s(){return Object.keys(t).map((function(e){return t[e]}))}function l(e,t){for(var i=0,o=Object.keys(n);i<o.length;i++){var a=d(e,o[i]);if(null===a)return;r[a]&&r[a](t,e)}}function d(e,t){return"serverAuth"===t?null:t}return i.default=i,Object.defineProperty(i,"apps",{get:s}),a.App=e,i}(l);return t.INTERNAL=i.__assign(i.__assign({},t.INTERNAL),{createFirebaseNamespace:e,extendNamespace:function(e){o.deepExtend(t,e)},createSubscribe:o.createSubscribe,ErrorFactory:o.ErrorFactory,deepExtend:o.deepExtend}),t}(),m=p.initializeApp;p.initializeApp=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return o.isNode()&&f.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the rollup-plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/rollup-plugin-node-resolve\n      '),m.apply(void 0,e)};var y=p;t.default=y,t.firebase=y},function(e,t,n){"use strict";n.r(t),n.d(t,"__extends",(function(){return i})),n.d(t,"__assign",(function(){return o})),n.d(t,"__rest",(function(){return a})),n.d(t,"__decorate",(function(){return s})),n.d(t,"__param",(function(){return u})),n.d(t,"__metadata",(function(){return c})),n.d(t,"__awaiter",(function(){return l})),n.d(t,"__generator",(function(){return h})),n.d(t,"__exportStar",(function(){return f})),n.d(t,"__values",(function(){return d})),n.d(t,"__read",(function(){return p})),n.d(t,"__spread",(function(){return m})),n.d(t,"__spreadArrays",(function(){return y})),n.d(t,"__await",(function(){return g})),n.d(t,"__asyncGenerator",(function(){return v})),n.d(t,"__asyncDelegator",(function(){return b})),n.d(t,"__asyncValues",(function(){return w})),n.d(t,"__makeTemplateObject",(function(){return E})),n.d(t,"__importStar",(function(){return S})),n.d(t,"__importDefault",(function(){return T}));var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function i(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var o=function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function a(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}function s(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a}function u(e,t){return function(n,r){t(n,r,e)}}function c(e,t){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(e,t)}function l(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(t){o(t)}}function s(e){try{u(r.throw(e))}catch(t){o(t)}}function u(e){e.done?i(e.value):new n((function(t){t(e.value)})).then(a,s)}u((r=r.apply(e,t||[])).next())}))}function h(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(s){o=[6,s],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}function f(e,t){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}function d(e){var t="function"===typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}}function p(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(s){i={error:s}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function m(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(p(arguments[t]));return e}function y(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}function g(e){return this instanceof g?(this.v=e,this):new g(e)}function v(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(e,t||[]),o=[];return r={},a("next"),a("throw"),a("return"),r[Symbol.asyncIterator]=function(){return this},r;function a(e){i[e]&&(r[e]=function(t){return new Promise((function(n,r){o.push([e,t,n,r])>1||s(e,t)}))})}function s(e,t){try{(n=i[e](t)).value instanceof g?Promise.resolve(n.value.v).then(u,c):l(o[0][2],n)}catch(r){l(o[0][3],r)}var n}function u(e){s("next",e)}function c(e){s("throw",e)}function l(e,t){e(t),o.shift(),o.length&&s(o[0][0],o[0][1])}}function b(e){var t,n;return t={},r("next"),r("throw",(function(e){throw e})),r("return"),t[Symbol.iterator]=function(){return this},t;function r(r,i){t[r]=e[r]?function(t){return(n=!n)?{value:g(e[r](t)),done:"return"===r}:i?i(t):t}:i}}function w(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=d(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise((function(r,i){(function(e,t,n,r){Promise.resolve(r).then((function(t){e({value:t,done:n})}),t)})(r,i,(t=e[n](t)).done,t.value)}))}}}function E(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function S(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function T(e){return e&&e.__esModule?e:{default:e}}},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(r){"object"===typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE){0;try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}}(),e.exports=n(20)},function(e,t,n){e.exports=function(){"use strict";return function(e){function t(t){if(t)try{e(t+"}")}catch(n){}}return function(n,r,i,o,a,s,u,c,l,h){switch(n){case 1:if(0===l&&64===r.charCodeAt(0))return e(r+";"),"";break;case 2:if(0===c)return r+"/*|*/";break;case 3:switch(c){case 102:case 112:return e(i[0]+r),"";default:return r+(0===h?"/*|*/":"")}case-2:r.split("/*|*/}").forEach(t)}}}}()},function(e,t,n){"use strict";t.a={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1}},function(e,t,n){"use strict";var r=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|download|draggable|encType|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|itemProp|itemScope|itemType|itemID|itemRef|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,i=function(e){var t={};return function(n){return void 0===t[n]&&(t[n]=e(n)),t[n]}}((function(e){return r.test(e)||111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&e.charCodeAt(2)<91}));t.a=i},function(e,t,n){"use strict";function r(e){return Object.prototype.toString.call(e).slice(8,-1)}function i(e){return"Object"===r(e)&&(e.constructor===Object&&Object.getPrototypeOf(e)===Object.prototype)}function o(e){return"Array"===r(e)}function a(e){return"Symbol"===r(e)}function s(e,t,n,r){var i=r.propertyIsEnumerable(t)?"enumerable":"nonenumerable";"enumerable"===i&&(e[t]=n),"nonenumerable"===i&&Object.defineProperty(e,t,{value:n,enumerable:!1,writable:!0,configurable:!0})}t.a=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=null,u=e;return i(e)&&e.extensions&&1===Object.keys(e).length&&(u={},r=e.extensions),t.reduce((function(e,t){return function e(t,n,r){if(!i(n))return r&&o(r)&&r.forEach((function(e){n=e(t,n)})),n;var u={};if(i(t)){var c=Object.getOwnPropertyNames(t),l=Object.getOwnPropertySymbols(t);u=c.concat(l).reduce((function(e,r){var i=t[r];return(!a(r)&&!Object.getOwnPropertyNames(n).includes(r)||a(r)&&!Object.getOwnPropertySymbols(n).includes(r))&&s(e,r,i,t),e}),{})}var h=Object.getOwnPropertyNames(n),f=Object.getOwnPropertySymbols(n);return h.concat(f).reduce((function(a,u){var c=n[u],l=i(t)?t[u]:void 0;return r&&o(r)&&r.forEach((function(e){c=e(l,c)})),void 0!==l&&i(c)&&(c=e(l,c,r)),s(a,u,c,n),a}),u)}(e,t,r)}),u)}},,function(e,t,n){"use strict";var r=n(9),i="function"===typeof Symbol&&Symbol.for,o=i?Symbol.for("react.element"):60103,a=i?Symbol.for("react.portal"):60106,s=i?Symbol.for("react.fragment"):60107,u=i?Symbol.for("react.strict_mode"):60108,c=i?Symbol.for("react.profiler"):60114,l=i?Symbol.for("react.provider"):60109,h=i?Symbol.for("react.context"):60110,f=i?Symbol.for("react.forward_ref"):60112,d=i?Symbol.for("react.suspense"):60113,p=i?Symbol.for("react.suspense_list"):60120,m=i?Symbol.for("react.memo"):60115,y=i?Symbol.for("react.lazy"):60116;i&&Symbol.for("react.fundamental"),i&&Symbol.for("react.responder"),i&&Symbol.for("react.scope");var g="function"===typeof Symbol&&Symbol.iterator;function v(e){for(var t=e.message,n="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)n+="&args[]="+encodeURIComponent(arguments[r]);return e.message="Minified React error #"+t+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings. ",e}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w={};function E(e,t,n){this.props=e,this.context=t,this.refs=w,this.updater=n||b}function S(){}function T(e,t,n){this.props=e,this.context=t,this.refs=w,this.updater=n||b}E.prototype.isReactComponent={},E.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw v(Error(85));this.updater.enqueueSetState(this,e,t,"setState")},E.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},S.prototype=E.prototype;var C=T.prototype=new S;C.constructor=T,r(C,E.prototype),C.isPureReactComponent=!0;var I={current:null},k={suspense:null},N={current:null},D=Object.prototype.hasOwnProperty,A={key:!0,ref:!0,__self:!0,__source:!0};function _(e,t,n){var r,i={},a=null,s=null;if(null!=t)for(r in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(a=""+t.key),t)D.call(t,r)&&!A.hasOwnProperty(r)&&(i[r]=t[r]);var u=arguments.length-2;if(1===u)i.children=n;else if(1<u){for(var c=Array(u),l=0;l<u;l++)c[l]=arguments[l+2];i.children=c}if(e&&e.defaultProps)for(r in u=e.defaultProps)void 0===i[r]&&(i[r]=u[r]);return{$$typeof:o,type:e,key:a,ref:s,props:i,_owner:N.current}}function x(e){return"object"===typeof e&&null!==e&&e.$$typeof===o}var O=/\/+/g,R=[];function P(e,t,n,r){if(R.length){var i=R.pop();return i.result=e,i.keyPrefix=t,i.func=n,i.context=r,i.count=0,i}return{result:e,keyPrefix:t,func:n,context:r,count:0}}function M(e){e.result=null,e.keyPrefix=null,e.func=null,e.context=null,e.count=0,10>R.length&&R.push(e)}function L(e,t,n){return null==e?0:function e(t,n,r,i){var s=typeof t;"undefined"!==s&&"boolean"!==s||(t=null);var u=!1;if(null===t)u=!0;else switch(s){case"string":case"number":u=!0;break;case"object":switch(t.$$typeof){case o:case a:u=!0}}if(u)return r(i,t,""===n?"."+F(t,0):n),1;if(u=0,n=""===n?".":n+":",Array.isArray(t))for(var c=0;c<t.length;c++){var l=n+F(s=t[c],c);u+=e(s,l,r,i)}else if(null===t||"object"!==typeof t?l=null:l="function"===typeof(l=g&&t[g]||t["@@iterator"])?l:null,"function"===typeof l)for(t=l.call(t),c=0;!(s=t.next()).done;)u+=e(s=s.value,l=n+F(s,c++),r,i);else if("object"===s)throw r=""+t,v(Error(31),"[object Object]"===r?"object with keys {"+Object.keys(t).join(", ")+"}":r,"");return u}(e,"",t,n)}function F(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+(""+e).replace(/[=:]/g,(function(e){return t[e]}))}(e.key):t.toString(36)}function q(e,t){e.func.call(e.context,t,e.count++)}function V(e,t,n){var r=e.result,i=e.keyPrefix;e=e.func.call(e.context,t,e.count++),Array.isArray(e)?U(e,r,n,(function(e){return e})):null!=e&&(x(e)&&(e=function(e,t){return{$$typeof:o,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(e,i+(!e.key||t&&t.key===e.key?"":(""+e.key).replace(O,"$&/")+"/")+n)),r.push(e))}function U(e,t,n,r,i){var o="";null!=n&&(o=(""+n).replace(O,"$&/")+"/"),L(e,V,t=P(t,o,r,i)),M(t)}function B(){var e=I.current;if(null===e)throw v(Error(321));return e}var j={Children:{map:function(e,t,n){if(null==e)return e;var r=[];return U(e,r,null,t,n),r},forEach:function(e,t,n){if(null==e)return e;L(e,q,t=P(null,null,t,n)),M(t)},count:function(e){return L(e,(function(){return null}),null)},toArray:function(e){var t=[];return U(e,t,null,(function(e){return e})),t},only:function(e){if(!x(e))throw v(Error(143));return e}},createRef:function(){return{current:null}},Component:E,PureComponent:T,createContext:function(e,t){return void 0===t&&(t=null),(e={$$typeof:h,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:l,_context:e},e.Consumer=e},forwardRef:function(e){return{$$typeof:f,render:e}},lazy:function(e){return{$$typeof:y,_ctor:e,_status:-1,_result:null}},memo:function(e,t){return{$$typeof:m,type:e,compare:void 0===t?null:t}},useCallback:function(e,t){return B().useCallback(e,t)},useContext:function(e,t){return B().useContext(e,t)},useEffect:function(e,t){return B().useEffect(e,t)},useImperativeHandle:function(e,t,n){return B().useImperativeHandle(e,t,n)},useDebugValue:function(){},useLayoutEffect:function(e,t){return B().useLayoutEffect(e,t)},useMemo:function(e,t){return B().useMemo(e,t)},useReducer:function(e,t,n){return B().useReducer(e,t,n)},useRef:function(e){return B().useRef(e)},useState:function(e){return B().useState(e)},Fragment:s,Profiler:c,StrictMode:u,Suspense:d,unstable_SuspenseList:p,createElement:_,cloneElement:function(e,t,n){if(null===e||void 0===e)throw v(Error(267),e);var i=r({},e.props),a=e.key,s=e.ref,u=e._owner;if(null!=t){if(void 0!==t.ref&&(s=t.ref,u=N.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(l in t)D.call(t,l)&&!A.hasOwnProperty(l)&&(i[l]=void 0===t[l]&&void 0!==c?c[l]:t[l])}var l=arguments.length-2;if(1===l)i.children=n;else if(1<l){c=Array(l);for(var h=0;h<l;h++)c[h]=arguments[h+2];i.children=c}return{$$typeof:o,type:e.type,key:a,ref:s,props:i,_owner:u}},createFactory:function(e){var t=_.bind(null,e);return t.type=e,t},isValidElement:x,version:"16.10.2",unstable_withSuspenseConfig:function(e,t){var n=k.suspense;k.suspense=void 0===t?null:t;try{e()}finally{k.suspense=n}},__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{ReactCurrentDispatcher:I,ReactCurrentBatchConfig:k,ReactCurrentOwner:N,IsSomeRendererActing:{current:!1},assign:r}},z={default:j},Q=z&&j||z;e.exports=Q.default||Q},function(e,t,n){"use strict";var r=n(0),i=n(9),o=n(21);function a(e){for(var t=e.message,n="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)n+="&args[]="+encodeURIComponent(arguments[r]);return e.message="Minified React error #"+t+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings. ",e}if(!r)throw a(Error(227));var s=null,u={};function c(){if(s)for(var e in u){var t=u[e],n=s.indexOf(e);if(!(-1<n))throw a(Error(96),e);if(!h[n]){if(!t.extractEvents)throw a(Error(97),e);for(var r in h[n]=t,n=t.eventTypes){var i=void 0,o=n[r],c=t,d=r;if(f.hasOwnProperty(d))throw a(Error(99),d);f[d]=o;var p=o.phasedRegistrationNames;if(p){for(i in p)p.hasOwnProperty(i)&&l(p[i],c,d);i=!0}else o.registrationName?(l(o.registrationName,c,d),i=!0):i=!1;if(!i)throw a(Error(98),r,e)}}}}function l(e,t,n){if(d[e])throw a(Error(100),e);d[e]=t,p[e]=t.eventTypes[n].dependencies}var h=[],f={},d={},p={};function m(e,t,n,r,i,o,a,s,u){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}var y=!1,g=null,v=!1,b=null,w={onError:function(e){y=!0,g=e}};function E(e,t,n,r,i,o,a,s,u){y=!1,g=null,m.apply(w,arguments)}var S=null,T=null,C=null;function I(e,t,n){var r=e.type||"unknown-event";e.currentTarget=C(n),function(e,t,n,r,i,o,s,u,c){if(E.apply(this,arguments),y){if(!y)throw a(Error(198));var l=g;y=!1,g=null,v||(v=!0,b=l)}}(r,t,void 0,e),e.currentTarget=null}function k(e,t){if(null==t)throw a(Error(30));return null==e?t:Array.isArray(e)?Array.isArray(t)?(e.push.apply(e,t),e):(e.push(t),e):Array.isArray(t)?[e].concat(t):[e,t]}function N(e,t,n){Array.isArray(e)?e.forEach(t,n):e&&t.call(n,e)}var D=null;function A(e){if(e){var t=e._dispatchListeners,n=e._dispatchInstances;if(Array.isArray(t))for(var r=0;r<t.length&&!e.isPropagationStopped();r++)I(e,t[r],n[r]);else t&&I(e,t,n);e._dispatchListeners=null,e._dispatchInstances=null,e.isPersistent()||e.constructor.release(e)}}function _(e){if(null!==e&&(D=k(D,e)),e=D,D=null,e){if(N(e,A),D)throw a(Error(95));if(v)throw e=b,v=!1,b=null,e}}var x={injectEventPluginOrder:function(e){if(s)throw a(Error(101));s=Array.prototype.slice.call(e),c()},injectEventPluginsByName:function(e){var t,n=!1;for(t in e)if(e.hasOwnProperty(t)){var r=e[t];if(!u.hasOwnProperty(t)||u[t]!==r){if(u[t])throw a(Error(102),t);u[t]=r,n=!0}}n&&c()}};function O(e,t){var n=e.stateNode;if(!n)return null;var r=S(n);if(!r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw a(Error(231),t,typeof n);return n}var R=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;R.hasOwnProperty("ReactCurrentDispatcher")||(R.ReactCurrentDispatcher={current:null}),R.hasOwnProperty("ReactCurrentBatchConfig")||(R.ReactCurrentBatchConfig={suspense:null});var P=/^(.*)[\\\/]/,M="function"===typeof Symbol&&Symbol.for,L=M?Symbol.for("react.element"):60103,F=M?Symbol.for("react.portal"):60106,q=M?Symbol.for("react.fragment"):60107,V=M?Symbol.for("react.strict_mode"):60108,U=M?Symbol.for("react.profiler"):60114,B=M?Symbol.for("react.provider"):60109,j=M?Symbol.for("react.context"):60110,z=M?Symbol.for("react.concurrent_mode"):60111,Q=M?Symbol.for("react.forward_ref"):60112,W=M?Symbol.for("react.suspense"):60113,K=M?Symbol.for("react.suspense_list"):60120,G=M?Symbol.for("react.memo"):60115,H=M?Symbol.for("react.lazy"):60116;M&&Symbol.for("react.fundamental"),M&&Symbol.for("react.responder"),M&&Symbol.for("react.scope");var Y="function"===typeof Symbol&&Symbol.iterator;function $(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=Y&&e[Y]||e["@@iterator"])?e:null}function X(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case q:return"Fragment";case F:return"Portal";case U:return"Profiler";case V:return"StrictMode";case W:return"Suspense";case K:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case j:return"Context.Consumer";case B:return"Context.Provider";case Q:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case G:return X(e.type);case H:if(e=1===e._status?e._result:null)return X(e)}return null}function J(e){var t="";do{e:switch(e.tag){case 3:case 4:case 6:case 7:case 10:case 9:var n="";break e;default:var r=e._debugOwner,i=e._debugSource,o=X(e.type);n=null,r&&(n=X(r.type)),r=o,o="",i?o=" (at "+i.fileName.replace(P,"")+":"+i.lineNumber+")":n&&(o=" (created by "+n+")"),n="\n    in "+(r||"Unknown")+o}t+=n,e=e.return}while(e);return t}var Z=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),ee=null,te=null,ne=null;function re(e){if(e=T(e)){if("function"!==typeof ee)throw a(Error(280));var t=S(e.stateNode);ee(e.stateNode,e.type,t)}}function ie(e){te?ne?ne.push(e):ne=[e]:te=e}function oe(){if(te){var e=te,t=ne;if(ne=te=null,re(e),t)for(e=0;e<t.length;e++)re(t[e])}}function ae(e,t){return e(t)}function se(e,t,n,r){return e(t,n,r)}function ue(){}var ce=ae,le=!1,he=!1;function fe(){null===te&&null===ne||(ue(),oe())}new Map,new Map,new Map;var de=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,pe=Object.prototype.hasOwnProperty,me={},ye={};function ge(e,t,n,r,i,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o}var ve={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){ve[e]=new ge(e,0,!1,e,null,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];ve[t]=new ge(t,1,!1,e[1],null,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){ve[e]=new ge(e,2,!1,e.toLowerCase(),null,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){ve[e]=new ge(e,2,!1,e,null,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){ve[e]=new ge(e,3,!1,e.toLowerCase(),null,!1)})),["checked","multiple","muted","selected"].forEach((function(e){ve[e]=new ge(e,3,!0,e,null,!1)})),["capture","download"].forEach((function(e){ve[e]=new ge(e,4,!1,e,null,!1)})),["cols","rows","size","span"].forEach((function(e){ve[e]=new ge(e,6,!1,e,null,!1)})),["rowSpan","start"].forEach((function(e){ve[e]=new ge(e,5,!1,e.toLowerCase(),null,!1)}));var be=/[\-:]([a-z])/g;function we(e){return e[1].toUpperCase()}function Ee(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function Se(e,t,n,r){var i=ve.hasOwnProperty(t)?ve[t]:null;(null!==i?0===i.type:!r&&(2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1])))||(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!pe.call(ye,e)||!pe.call(me,e)&&(de.test(e)?ye[e]=!0:(me[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}function Te(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function Ce(e){e._valueTracker||(e._valueTracker=function(e){var t=Te(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function Ie(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Te(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function ke(e,t){var n=t.checked;return i({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Ne(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=Ee(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function De(e,t){null!=(t=t.checked)&&Se(e,"checked",t,!1)}function Ae(e,t){De(e,t);var n=Ee(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?xe(e,t.type,n):t.hasOwnProperty("defaultValue")&&xe(e,t.type,Ee(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function _e(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!e.defaultChecked,e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function xe(e,t,n){"number"===t&&e.ownerDocument.activeElement===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}function Oe(e,t){return e=i({children:void 0},t),(t=function(e){var t="";return r.Children.forEach(e,(function(e){null!=e&&(t+=e)})),t}(t.children))&&(e.children=t),e}function Re(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Ee(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function Pe(e,t){if(null!=t.dangerouslySetInnerHTML)throw a(Error(91));return i({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Me(e,t){var n=t.value;if(null==n){if(n=t.defaultValue,null!=(t=t.children)){if(null!=n)throw a(Error(92));if(Array.isArray(t)){if(!(1>=t.length))throw a(Error(93));t=t[0]}n=t}null==n&&(n="")}e._wrapperState={initialValue:Ee(n)}}function Le(e,t){var n=Ee(t.value),r=Ee(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function Fe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(be,we);ve[t]=new ge(t,1,!1,e,null,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(be,we);ve[t]=new ge(t,1,!1,e,"http://www.w3.org/1999/xlink",!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(be,we);ve[t]=new ge(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1)})),["tabIndex","crossOrigin"].forEach((function(e){ve[e]=new ge(e,1,!1,e.toLowerCase(),null,!1)})),ve.xlinkHref=new ge("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0),["src","href","action","formAction"].forEach((function(e){ve[e]=new ge(e,1,!1,e.toLowerCase(),null,!0)}));var qe={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function Ve(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ue(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?Ve(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var Be,je=function(e){return"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction((function(){return e(t,n)}))}:e}((function(e,t){if(e.namespaceURI!==qe.svg||"innerHTML"in e)e.innerHTML=t;else{for((Be=Be||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Be.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}}));function ze(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}function Qe(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var We={animationend:Qe("Animation","AnimationEnd"),animationiteration:Qe("Animation","AnimationIteration"),animationstart:Qe("Animation","AnimationStart"),transitionend:Qe("Transition","TransitionEnd")},Ke={},Ge={};function He(e){if(Ke[e])return Ke[e];if(!We[e])return e;var t,n=We[e];for(t in n)if(n.hasOwnProperty(t)&&t in Ge)return Ke[e]=n[t];return e}Z&&(Ge=document.createElement("div").style,"AnimationEvent"in window||(delete We.animationend.animation,delete We.animationiteration.animation,delete We.animationstart.animation),"TransitionEvent"in window||delete We.transitionend.transition);var Ye=He("animationend"),$e=He("animationiteration"),Xe=He("animationstart"),Je=He("transitionend"),Ze="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),et=!1,tt=[],nt=null,rt=null,it=null,ot=new Map,at=new Map,st="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput close cancel copy cut paste click change contextmenu reset submit".split(" "),ut="focus blur dragenter dragleave mouseover mouseout pointerover pointerout gotpointercapture lostpointercapture".split(" ");function ct(e,t,n,r){return{blockedOn:e,topLevelType:t,eventSystemFlags:32|n,nativeEvent:r}}function lt(e,t){switch(e){case"focus":case"blur":nt=null;break;case"dragenter":case"dragleave":rt=null;break;case"mouseover":case"mouseout":it=null;break;case"pointerover":case"pointerout":ot.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":at.delete(t.pointerId)}}function ht(e,t,n,r,i){return null===e||e.nativeEvent!==i?ct(t,n,r,i):(e.eventSystemFlags|=r,e)}function ft(e){if(null!==e.blockedOn)return!1;var t=kn(e.topLevelType,e.eventSystemFlags,e.nativeEvent);return null===t||(e.blockedOn=t,!1)}function dt(e,t,n){ft(e)&&n.delete(t)}function pt(){for(et=!1;0<tt.length;){var e=tt[0];if(null!==e.blockedOn)break;var t=kn(e.topLevelType,e.eventSystemFlags,e.nativeEvent);null!==t?e.blockedOn=t:tt.shift()}null!==nt&&ft(nt)&&(nt=null),null!==rt&&ft(rt)&&(rt=null),null!==it&&ft(it)&&(it=null),ot.forEach(dt),at.forEach(dt)}function mt(e,t){e.blockedOn===t&&(e.blockedOn=null,et||(et=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,pt)))}function yt(e){function t(t){return mt(t,e)}if(0<tt.length){mt(tt[0],e);for(var n=1;n<tt.length;n++){var r=tt[n];r.blockedOn===e&&(r.blockedOn=null)}}null!==nt&&mt(nt,e),null!==rt&&mt(rt,e),null!==it&&mt(it,e),ot.forEach(t),at.forEach(t)}var gt=0,vt=2,bt=1024;function wt(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{((t=e).effectTag&(vt|bt))!==gt&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Et(e){if(wt(e)!==e)throw a(Error(188))}function St(e){if(!(e=function(e){var t=e.alternate;if(!t){if(null===(t=wt(e)))throw a(Error(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return Et(i),e;if(o===r)return Et(i),t;o=o.sibling}throw a(Error(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,u=i.child;u;){if(u===n){s=!0,n=i,r=o;break}if(u===r){s=!0,r=i,n=o;break}u=u.sibling}if(!s){for(u=o.child;u;){if(u===n){s=!0,n=o,r=i;break}if(u===r){s=!0,r=o,n=i;break}u=u.sibling}if(!s)throw a(Error(189))}}if(n.alternate!==r)throw a(Error(190))}if(3!==n.tag)throw a(Error(188));return n.stateNode.current===n?e:t}(e)))return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function Tt(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}function Ct(e){do{e=e.return}while(e&&5!==e.tag);return e||null}function It(e,t,n){(t=O(e,n.dispatchConfig.phasedRegistrationNames[t]))&&(n._dispatchListeners=k(n._dispatchListeners,t),n._dispatchInstances=k(n._dispatchInstances,e))}function kt(e){if(e&&e.dispatchConfig.phasedRegistrationNames){for(var t=e._targetInst,n=[];t;)n.push(t),t=Ct(t);for(t=n.length;0<t--;)It(n[t],"captured",e);for(t=0;t<n.length;t++)It(n[t],"bubbled",e)}}function Nt(e,t,n){e&&n&&n.dispatchConfig.registrationName&&(t=O(e,n.dispatchConfig.registrationName))&&(n._dispatchListeners=k(n._dispatchListeners,t),n._dispatchInstances=k(n._dispatchInstances,e))}function Dt(e){e&&e.dispatchConfig.registrationName&&Nt(e._targetInst,null,e)}function At(e){N(e,kt)}function _t(){return!0}function xt(){return!1}function Ot(e,t,n,r){for(var i in this.dispatchConfig=e,this._targetInst=t,this.nativeEvent=n,e=this.constructor.Interface)e.hasOwnProperty(i)&&((t=e[i])?this[i]=t(n):"target"===i?this.target=r:this[i]=n[i]);return this.isDefaultPrevented=(null!=n.defaultPrevented?n.defaultPrevented:!1===n.returnValue)?_t:xt,this.isPropagationStopped=xt,this}function Rt(e,t,n,r){if(this.eventPool.length){var i=this.eventPool.pop();return this.call(i,e,t,n,r),i}return new this(e,t,n,r)}function Pt(e){if(!(e instanceof this))throw a(Error(279));e.destructor(),10>this.eventPool.length&&this.eventPool.push(e)}function Mt(e){e.eventPool=[],e.getPooled=Rt,e.release=Pt}i(Ot.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=_t)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=_t)},persist:function(){this.isPersistent=_t},isPersistent:xt,destructor:function(){var e,t=this.constructor.Interface;for(e in t)this[e]=null;this.nativeEvent=this._targetInst=this.dispatchConfig=null,this.isPropagationStopped=this.isDefaultPrevented=xt,this._dispatchInstances=this._dispatchListeners=null}}),Ot.Interface={type:null,target:null,currentTarget:function(){return null},eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null},Ot.extend=function(e){function t(){}function n(){return r.apply(this,arguments)}var r=this;t.prototype=r.prototype;var o=new t;return i(o,n.prototype),n.prototype=o,n.prototype.constructor=n,n.Interface=i({},r.Interface,e),n.extend=r.extend,Mt(n),n},Mt(Ot);var Lt=Ot.extend({animationName:null,elapsedTime:null,pseudoElement:null}),Ft=Ot.extend({clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),qt=Ot.extend({view:null,detail:null}),Vt=qt.extend({relatedTarget:null});function Ut(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}var Bt={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},jt={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},zt={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Qt(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=zt[e])&&!!t[e]}function Wt(){return Qt}for(var Kt=qt.extend({key:function(e){if(e.key){var t=Bt[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=Ut(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?jt[e.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:Wt,charCode:function(e){return"keypress"===e.type?Ut(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Ut(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Gt=0,Ht=0,Yt=!1,$t=!1,Xt=qt.extend({screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:Wt,button:null,buttons:null,relatedTarget:function(e){return e.relatedTarget||(e.fromElement===e.srcElement?e.toElement:e.fromElement)},movementX:function(e){if("movementX"in e)return e.movementX;var t=Gt;return Gt=e.screenX,Yt?"mousemove"===e.type?e.screenX-t:0:(Yt=!0,0)},movementY:function(e){if("movementY"in e)return e.movementY;var t=Ht;return Ht=e.screenY,$t?"mousemove"===e.type?e.screenY-t:0:($t=!0,0)}}),Jt=Xt.extend({pointerId:null,width:null,height:null,pressure:null,tangentialPressure:null,tiltX:null,tiltY:null,twist:null,pointerType:null,isPrimary:null}),Zt=Xt.extend({dataTransfer:null}),en=qt.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:Wt}),tn=Ot.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),nn=Xt.extend({deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:null,deltaMode:null}),rn=[["blur","blur",0],["cancel","cancel",0],["click","click",0],["close","close",0],["contextmenu","contextMenu",0],["copy","copy",0],["cut","cut",0],["auxclick","auxClick",0],["dblclick","doubleClick",0],["dragend","dragEnd",0],["dragstart","dragStart",0],["drop","drop",0],["focus","focus",0],["input","input",0],["invalid","invalid",0],["keydown","keyDown",0],["keypress","keyPress",0],["keyup","keyUp",0],["mousedown","mouseDown",0],["mouseup","mouseUp",0],["paste","paste",0],["pause","pause",0],["play","play",0],["pointercancel","pointerCancel",0],["pointerdown","pointerDown",0],["pointerup","pointerUp",0],["ratechange","rateChange",0],["reset","reset",0],["seeked","seeked",0],["submit","submit",0],["touchcancel","touchCancel",0],["touchend","touchEnd",0],["touchstart","touchStart",0],["volumechange","volumeChange",0],["drag","drag",1],["dragenter","dragEnter",1],["dragexit","dragExit",1],["dragleave","dragLeave",1],["dragover","dragOver",1],["mousemove","mouseMove",1],["mouseout","mouseOut",1],["mouseover","mouseOver",1],["pointermove","pointerMove",1],["pointerout","pointerOut",1],["pointerover","pointerOver",1],["scroll","scroll",1],["toggle","toggle",1],["touchmove","touchMove",1],["wheel","wheel",1],["abort","abort",2],[Ye,"animationEnd",2],[$e,"animationIteration",2],[Xe,"animationStart",2],["canplay","canPlay",2],["canplaythrough","canPlayThrough",2],["durationchange","durationChange",2],["emptied","emptied",2],["encrypted","encrypted",2],["ended","ended",2],["error","error",2],["gotpointercapture","gotPointerCapture",2],["load","load",2],["loadeddata","loadedData",2],["loadedmetadata","loadedMetadata",2],["loadstart","loadStart",2],["lostpointercapture","lostPointerCapture",2],["playing","playing",2],["progress","progress",2],["seeking","seeking",2],["stalled","stalled",2],["suspend","suspend",2],["timeupdate","timeUpdate",2],[Je,"transitionEnd",2],["waiting","waiting",2]],on={},an={},sn=0;sn<rn.length;sn++){var un=rn[sn],cn=un[0],ln=un[1],hn=un[2],fn="on"+(ln[0].toUpperCase()+ln.slice(1)),dn={phasedRegistrationNames:{bubbled:fn,captured:fn+"Capture"},dependencies:[cn],eventPriority:hn};on[ln]=dn,an[cn]=dn}var pn={eventTypes:on,getEventPriority:function(e){return void 0!==(e=an[e])?e.eventPriority:2},extractEvents:function(e,t,n,r){var i=an[e];if(!i)return null;switch(e){case"keypress":if(0===Ut(n))return null;case"keydown":case"keyup":e=Kt;break;case"blur":case"focus":e=Vt;break;case"click":if(2===n.button)return null;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":e=Xt;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":e=Zt;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":e=en;break;case Ye:case $e:case Xe:e=Lt;break;case Je:e=tn;break;case"scroll":e=qt;break;case"wheel":e=nn;break;case"copy":case"cut":case"paste":e=Ft;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":e=Jt;break;default:e=Ot}return At(t=e.getPooled(i,t,n,r)),t}},mn=pn.getEventPriority,yn=10,gn=[];function vn(e){var t=e.targetInst,n=t;do{if(!n){e.ancestors.push(n);break}var r=n;if(3===r.tag)r=r.stateNode.containerInfo;else{for(;r.return;)r=r.return;r=3!==r.tag?null:r.stateNode.containerInfo}if(!r)break;5!==(t=n.tag)&&6!==t||e.ancestors.push(n),n=sr(r)}while(n);for(n=0;n<e.ancestors.length;n++){t=e.ancestors[n];var i=Tt(e.nativeEvent);r=e.topLevelType;for(var o=e.nativeEvent,a=e.eventSystemFlags,s=null,u=0;u<h.length;u++){var c=h[u];c&&(c=c.extractEvents(r,t,o,i,a))&&(s=k(s,c))}_(s)}}var bn=!0;function wn(e,t){En(t,e,!1)}function En(e,t,n){switch(mn(t)){case 0:var r=Sn.bind(null,t,1);break;case 1:r=Tn.bind(null,t,1);break;default:r=In.bind(null,t,1)}n?e.addEventListener(t,r,!0):e.addEventListener(t,r,!1)}function Sn(e,t,n){le||ue();var r=In,i=le;le=!0;try{se(r,e,t,n)}finally{(le=i)||fe()}}function Tn(e,t,n){In(e,t,n)}function Cn(e,t,n,r){if(gn.length){var i=gn.pop();i.topLevelType=e,i.eventSystemFlags=t,i.nativeEvent=n,i.targetInst=r,e=i}else e={topLevelType:e,eventSystemFlags:t,nativeEvent:n,targetInst:r,ancestors:[]};try{if(t=vn,n=e,he)t(n,void 0);else{he=!0;try{ce(t,n,void 0)}finally{he=!1,fe()}}}finally{e.topLevelType=null,e.nativeEvent=null,e.targetInst=null,e.ancestors.length=0,gn.length<yn&&gn.push(e)}}function In(e,t,n){if(bn)if(0<tt.length&&-1<st.indexOf(e))e=ct(null,e,t,n),tt.push(e);else{var r=kn(e,t,n);null===r?lt(e,n):-1<st.indexOf(e)?(e=ct(r,e,t,n),tt.push(e)):function(e,t,n,r){switch(t){case"focus":return nt=ht(nt,e,t,n,r),!0;case"dragenter":return rt=ht(rt,e,t,n,r),!0;case"mouseover":return it=ht(it,e,t,n,r),!0;case"pointerover":var i=r.pointerId;return ot.set(i,ht(ot.get(i)||null,e,t,n,r)),!0;case"gotpointercapture":return i=r.pointerId,at.set(i,ht(at.get(i)||null,e,t,n,r)),!0}return!1}(r,e,t,n)||(lt(e,n),Cn(e,t,n,null))}}function kn(e,t,n){var r=Tt(n),i=sr(r);if(null!==i)if(null===(r=wt(i)))i=null;else{var o=r.tag;if(13===o){if(null!==(r=13!==r.tag||(null===(i=r.memoizedState)&&(null!==(r=r.alternate)&&(i=r.memoizedState)),null===i)?null:i.dehydrated))return r;i=null}else if(3===o){if(r.stateNode.hydrate)return 3===r.tag?r.stateNode.containerInfo:null;i=null}else r!==i&&(i=null)}return Cn(e,t,n,i),null}function Nn(e){if(!Z)return!1;var t=(e="on"+e)in document;return t||((t=document.createElement("div")).setAttribute(e,"return;"),t="function"===typeof t[e]),t}var Dn=new("function"===typeof WeakMap?WeakMap:Map);function An(e){var t=Dn.get(e);return void 0===t&&(t=new Set,Dn.set(e,t)),t}function _n(e,t,n){if(!n.has(e)){switch(e){case"scroll":En(t,"scroll",!0);break;case"focus":case"blur":En(t,"focus",!0),En(t,"blur",!0),n.add("blur"),n.add("focus");break;case"cancel":case"close":Nn(e)&&En(t,e,!0);break;case"invalid":case"submit":case"reset":break;default:-1===Ze.indexOf(e)&&wn(e,t)}n.add(e)}}var xn={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},On=["Webkit","ms","Moz","O"];function Rn(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||xn.hasOwnProperty(e)&&xn[e]?(""+t).trim():t+"px"}function Pn(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=Rn(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(xn).forEach((function(e){On.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),xn[t]=xn[e]}))}));var Mn=i({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ln(e,t){if(t){if(Mn[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw a(Error(137),e,"");if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw a(Error(60));if(!("object"===typeof t.dangerouslySetInnerHTML&&"__html"in t.dangerouslySetInnerHTML))throw a(Error(61))}if(null!=t.style&&"object"!==typeof t.style)throw a(Error(62),"")}}function Fn(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function qn(e,t){var n=An(e=9===e.nodeType||11===e.nodeType?e:e.ownerDocument);t=p[t];for(var r=0;r<t.length;r++)_n(t[r],e,n)}function Vn(){}function Un(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Bn(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function jn(e,t){var n,r=Bn(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Bn(r)}}function zn(){for(var e=window,t=Un();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Un((e=t.contentWindow).document)}return t}function Qn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var Wn="$",Kn="/$",Gn="$?",Hn="$!",Yn=null,$n=null;function Xn(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function Jn(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var Zn="function"===typeof setTimeout?setTimeout:void 0,er="function"===typeof clearTimeout?clearTimeout:void 0;function tr(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break}return e}function nr(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if(n===Wn||n===Hn||n===Gn){if(0===t)return e;t--}else n===Kn&&t++}e=e.previousSibling}return null}var rr=Math.random().toString(36).slice(2),ir="__reactInternalInstance$"+rr,or="__reactEventHandlers$"+rr,ar="__reactContainere$"+rr;function sr(e){var t=e[ir];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ar]||n[ir]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=nr(e);null!==e;){if(n=e[ir])return n;e=nr(e)}return t}n=(e=n).parentNode}return null}function ur(e){return!(e=e[ir]||e[ar])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function cr(e){if(5===e.tag||6===e.tag)return e.stateNode;throw a(Error(33))}function lr(e){return e[or]||null}var hr=null,fr=null,dr=null;function pr(){if(dr)return dr;var e,t,n=fr,r=n.length,i="value"in hr?hr.value:hr.textContent,o=i.length;for(e=0;e<r&&n[e]===i[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===i[o-t];t++);return dr=i.slice(e,1<t?1-t:void 0)}var mr=Ot.extend({data:null}),yr=Ot.extend({data:null}),gr=[9,13,27,32],vr=Z&&"CompositionEvent"in window,br=null;Z&&"documentMode"in document&&(br=document.documentMode);var wr=Z&&"TextEvent"in window&&!br,Er=Z&&(!vr||br&&8<br&&11>=br),Sr=String.fromCharCode(32),Tr={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["compositionend","keypress","textInput","paste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"blur compositionend keydown keypress keyup mousedown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:"blur compositionstart keydown keypress keyup mousedown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"blur compositionupdate keydown keypress keyup mousedown".split(" ")}},Cr=!1;function Ir(e,t){switch(e){case"keyup":return-1!==gr.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"blur":return!0;default:return!1}}function kr(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Nr=!1;var Dr={eventTypes:Tr,extractEvents:function(e,t,n,r){var i;if(vr)e:{switch(e){case"compositionstart":var o=Tr.compositionStart;break e;case"compositionend":o=Tr.compositionEnd;break e;case"compositionupdate":o=Tr.compositionUpdate;break e}o=void 0}else Nr?Ir(e,n)&&(o=Tr.compositionEnd):"keydown"===e&&229===n.keyCode&&(o=Tr.compositionStart);return o?(Er&&"ko"!==n.locale&&(Nr||o!==Tr.compositionStart?o===Tr.compositionEnd&&Nr&&(i=pr()):(fr="value"in(hr=r)?hr.value:hr.textContent,Nr=!0)),o=mr.getPooled(o,t,n,r),i?o.data=i:null!==(i=kr(n))&&(o.data=i),At(o),i=o):i=null,(e=wr?function(e,t){switch(e){case"compositionend":return kr(t);case"keypress":return 32!==t.which?null:(Cr=!0,Sr);case"textInput":return(e=t.data)===Sr&&Cr?null:e;default:return null}}(e,n):function(e,t){if(Nr)return"compositionend"===e||!vr&&Ir(e,t)?(e=pr(),dr=fr=hr=null,Nr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Er&&"ko"!==t.locale?null:t.data;default:return null}}(e,n))?((t=yr.getPooled(Tr.beforeInput,t,n,r)).data=e,At(t)):t=null,null===i?t:null===t?i:[i,t]}},Ar={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function _r(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Ar[e.type]:"textarea"===t}var xr={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"blur change click focus input keydown keyup selectionchange".split(" ")}};function Or(e,t,n){return(e=Ot.getPooled(xr.change,e,t,n)).type="change",ie(n),At(e),e}var Rr=null,Pr=null;function Mr(e){_(e)}function Lr(e){if(Ie(cr(e)))return e}function Fr(e,t){if("change"===e)return t}var qr=!1;function Vr(){Rr&&(Rr.detachEvent("onpropertychange",Ur),Pr=Rr=null)}function Ur(e){if("value"===e.propertyName&&Lr(Pr))if(e=Or(Pr,e,Tt(e)),le)_(e);else{le=!0;try{ae(Mr,e)}finally{le=!1,fe()}}}function Br(e,t,n){"focus"===e?(Vr(),Pr=n,(Rr=t).attachEvent("onpropertychange",Ur)):"blur"===e&&Vr()}function jr(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Lr(Pr)}function zr(e,t){if("click"===e)return Lr(t)}function Qr(e,t){if("input"===e||"change"===e)return Lr(t)}Z&&(qr=Nn("input")&&(!document.documentMode||9<document.documentMode));var Wr={eventTypes:xr,_isInputEventSupported:qr,extractEvents:function(e,t,n,r){var i=t?cr(t):window,o=i.nodeName&&i.nodeName.toLowerCase();if("select"===o||"input"===o&&"file"===i.type)var a=Fr;else if(_r(i))if(qr)a=Qr;else{a=jr;var s=Br}else(o=i.nodeName)&&"input"===o.toLowerCase()&&("checkbox"===i.type||"radio"===i.type)&&(a=zr);if(a&&(a=a(e,t)))return Or(a,n,r);s&&s(e,i,t),"blur"===e&&(e=i._wrapperState)&&e.controlled&&"number"===i.type&&xe(i,"number",i.value)}},Kr={mouseEnter:{registrationName:"onMouseEnter",dependencies:["mouseout","mouseover"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["mouseout","mouseover"]},pointerEnter:{registrationName:"onPointerEnter",dependencies:["pointerout","pointerover"]},pointerLeave:{registrationName:"onPointerLeave",dependencies:["pointerout","pointerover"]}},Gr={eventTypes:Kr,extractEvents:function(e,t,n,r,i){var o="mouseover"===e||"pointerover"===e,a="mouseout"===e||"pointerout"===e;if(o&&0===(32&i)&&(n.relatedTarget||n.fromElement)||!a&&!o)return null;if(i=r.window===r?r:(i=r.ownerDocument)?i.defaultView||i.parentWindow:window,a?(a=t,null!==(t=(t=n.relatedTarget||n.toElement)?sr(t):null)&&(t!==(o=wt(t))||5!==t.tag&&6!==t.tag)&&(t=null)):a=null,a===t)return null;if("mouseout"===e||"mouseover"===e)var s=Xt,u=Kr.mouseLeave,c=Kr.mouseEnter,l="mouse";else"pointerout"!==e&&"pointerover"!==e||(s=Jt,u=Kr.pointerLeave,c=Kr.pointerEnter,l="pointer");if(e=null==a?i:cr(a),i=null==t?i:cr(t),(u=s.getPooled(u,a,n,r)).type=l+"leave",u.target=e,u.relatedTarget=i,(n=s.getPooled(c,t,n,r)).type=l+"enter",n.target=i,n.relatedTarget=e,l=t,(r=a)&&l)e:{for(c=l,e=0,a=s=r;a;a=Ct(a))e++;for(a=0,t=c;t;t=Ct(t))a++;for(;0<e-a;)s=Ct(s),e--;for(;0<a-e;)c=Ct(c),a--;for(;e--;){if(s===c||s===c.alternate)break e;s=Ct(s),c=Ct(c)}s=null}else s=null;for(c=s,s=[];r&&r!==c&&(null===(e=r.alternate)||e!==c);)s.push(r),r=Ct(r);for(r=[];l&&l!==c&&(null===(e=l.alternate)||e!==c);)r.push(l),l=Ct(l);for(l=0;l<s.length;l++)Nt(s[l],"bubbled",u);for(l=r.length;0<l--;)Nt(r[l],"captured",n);return[u,n]}};var Hr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},Yr=Object.prototype.hasOwnProperty;function $r(e,t){if(Hr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!Yr.call(t,n[r])||!Hr(e[n[r]],t[n[r]]))return!1;return!0}var Xr=Z&&"documentMode"in document&&11>=document.documentMode,Jr={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:"blur contextmenu dragend focus keydown keyup mousedown mouseup selectionchange".split(" ")}},Zr=null,ei=null,ti=null,ni=!1;function ri(e,t){var n=t.window===t?t.document:9===t.nodeType?t:t.ownerDocument;return ni||null==Zr||Zr!==Un(n)?null:("selectionStart"in(n=Zr)&&Qn(n)?n={start:n.selectionStart,end:n.selectionEnd}:n={anchorNode:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset},ti&&$r(ti,n)?null:(ti=n,(e=Ot.getPooled(Jr.select,ei,e,t)).type="select",e.target=Zr,At(e),e))}var ii={eventTypes:Jr,extractEvents:function(e,t,n,r){var i,o=r.window===r?r.document:9===r.nodeType?r:r.ownerDocument;if(!(i=!o)){e:{o=An(o),i=p.onSelect;for(var a=0;a<i.length;a++)if(!o.has(i[a])){o=!1;break e}o=!0}i=!o}if(i)return null;switch(o=t?cr(t):window,e){case"focus":(_r(o)||"true"===o.contentEditable)&&(Zr=o,ei=t,ti=null);break;case"blur":ti=ei=Zr=null;break;case"mousedown":ni=!0;break;case"contextmenu":case"mouseup":case"dragend":return ni=!1,ri(n,r);case"selectionchange":if(Xr)break;case"keydown":case"keyup":return ri(n,r)}return null}};x.injectEventPluginOrder("ResponderEventPlugin SimpleEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" ")),S=lr,T=ur,C=cr,x.injectEventPluginsByName({SimpleEventPlugin:pn,EnterLeaveEventPlugin:Gr,ChangeEventPlugin:Wr,SelectEventPlugin:ii,BeforeInputEventPlugin:Dr}),new Set;var oi=[],ai=-1;function si(e){0>ai||(e.current=oi[ai],oi[ai]=null,ai--)}function ui(e,t){oi[++ai]=e.current,e.current=t}var ci={},li={current:ci},hi={current:!1},fi=ci;function di(e,t){var n=e.type.contextTypes;if(!n)return ci;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in n)o[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function pi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function mi(e){si(hi),si(li)}function yi(e){si(hi),si(li)}function gi(e,t,n){if(li.current!==ci)throw a(Error(168));ui(li,t),ui(hi,n)}function vi(e,t,n){var r=e.stateNode;if(e=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var o in r=r.getChildContext())if(!(o in e))throw a(Error(108),X(t)||"Unknown",o);return i({},n,{},r)}function bi(e){var t=e.stateNode;return t=t&&t.__reactInternalMemoizedMergedChildContext||ci,fi=li.current,ui(li,t),ui(hi,hi.current),!0}function wi(e,t,n){var r=e.stateNode;if(!r)throw a(Error(169));n?(t=vi(e,t,fi),r.__reactInternalMemoizedMergedChildContext=t,si(hi),si(li),ui(li,t)):si(hi),ui(hi,n)}var Ei=o.unstable_runWithPriority,Si=o.unstable_scheduleCallback,Ti=o.unstable_cancelCallback,Ci=o.unstable_shouldYield,Ii=o.unstable_requestPaint,ki=o.unstable_now,Ni=o.unstable_getCurrentPriorityLevel,Di=o.unstable_ImmediatePriority,Ai=o.unstable_UserBlockingPriority,_i=o.unstable_NormalPriority,xi=o.unstable_LowPriority,Oi=o.unstable_IdlePriority,Ri={},Pi=void 0!==Ii?Ii:function(){},Mi=null,Li=null,Fi=!1,qi=ki(),Vi=1e4>qi?ki:function(){return ki()-qi};function Ui(){switch(Ni()){case Di:return 99;case Ai:return 98;case _i:return 97;case xi:return 96;case Oi:return 95;default:throw a(Error(332))}}function Bi(e){switch(e){case 99:return Di;case 98:return Ai;case 97:return _i;case 96:return xi;case 95:return Oi;default:throw a(Error(332))}}function ji(e,t){return e=Bi(e),Ei(e,t)}function zi(e,t,n){return e=Bi(e),Si(e,t,n)}function Qi(e){return null===Mi?(Mi=[e],Li=Si(Di,Ki)):Mi.push(e),Ri}function Wi(){if(null!==Li){var e=Li;Li=null,Ti(e)}Ki()}function Ki(){if(!Fi&&null!==Mi){Fi=!0;var e=0;try{var t=Mi;ji(99,(function(){for(;e<t.length;e++){var n=t[e];do{n=n(!0)}while(null!==n)}})),Mi=null}catch(n){throw null!==Mi&&(Mi=Mi.slice(e+1)),Si(Di,Wi),n}finally{Fi=!1}}}function Gi(e,t){if(e&&e.defaultProps)for(var n in t=i({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}var Hi={current:null},Yi=null,$i=null,Xi=null;function Ji(){Xi=$i=Yi=null}function Zi(e,t){var n=e.type._context;ui(Hi,n._currentValue),n._currentValue=t}function eo(e){var t=Hi.current;si(Hi),e.type._context._currentValue=t}function to(e,t){for(;null!==e;){var n=e.alternate;if(e.childExpirationTime<t)e.childExpirationTime=t,null!==n&&n.childExpirationTime<t&&(n.childExpirationTime=t);else{if(!(null!==n&&n.childExpirationTime<t))break;n.childExpirationTime=t}e=e.return}}function no(e,t){Yi=e,Xi=$i=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(e.expirationTime>=t&&(_a=!0),e.firstContext=null)}function ro(e,t){if(Xi!==e&&!1!==t&&0!==t)if("number"===typeof t&&1073741823!==t||(Xi=e,t=1073741823),t={context:e,observedBits:t,next:null},null===$i){if(null===Yi)throw a(Error(308));$i=t,Yi.dependencies={expirationTime:0,firstContext:t,responders:null}}else $i=$i.next=t;return e._currentValue}var io=!1;function oo(e){return{baseState:e,firstUpdate:null,lastUpdate:null,firstCapturedUpdate:null,lastCapturedUpdate:null,firstEffect:null,lastEffect:null,firstCapturedEffect:null,lastCapturedEffect:null}}function ao(e){return{baseState:e.baseState,firstUpdate:e.firstUpdate,lastUpdate:e.lastUpdate,firstCapturedUpdate:null,lastCapturedUpdate:null,firstEffect:null,lastEffect:null,firstCapturedEffect:null,lastCapturedEffect:null}}function so(e,t){return{expirationTime:e,suspenseConfig:t,tag:0,payload:null,callback:null,next:null,nextEffect:null}}function uo(e,t){null===e.lastUpdate?e.firstUpdate=e.lastUpdate=t:(e.lastUpdate.next=t,e.lastUpdate=t)}function co(e,t){var n=e.alternate;if(null===n){var r=e.updateQueue,i=null;null===r&&(r=e.updateQueue=oo(e.memoizedState))}else r=e.updateQueue,i=n.updateQueue,null===r?null===i?(r=e.updateQueue=oo(e.memoizedState),i=n.updateQueue=oo(n.memoizedState)):r=e.updateQueue=ao(i):null===i&&(i=n.updateQueue=ao(r));null===i||r===i?uo(r,t):null===r.lastUpdate||null===i.lastUpdate?(uo(r,t),uo(i,t)):(uo(r,t),i.lastUpdate=t)}function lo(e,t){var n=e.updateQueue;null===(n=null===n?e.updateQueue=oo(e.memoizedState):ho(e,n)).lastCapturedUpdate?n.firstCapturedUpdate=n.lastCapturedUpdate=t:(n.lastCapturedUpdate.next=t,n.lastCapturedUpdate=t)}function ho(e,t){var n=e.alternate;return null!==n&&t===n.updateQueue&&(t=e.updateQueue=ao(t)),t}function fo(e,t,n,r,o,a){switch(n.tag){case 1:return"function"===typeof(e=n.payload)?e.call(a,r,o):e;case 3:e.effectTag=-4097&e.effectTag|64;case 0:if(null===(o="function"===typeof(e=n.payload)?e.call(a,r,o):e)||void 0===o)break;return i({},r,o);case 2:io=!0}return r}function po(e,t,n,r,i){io=!1;for(var o=(t=ho(e,t)).baseState,a=null,s=0,u=t.firstUpdate,c=o;null!==u;){var l=u.expirationTime;l<i?(null===a&&(a=u,o=c),s<l&&(s=l)):(yu(l,u.suspenseConfig),c=fo(e,0,u,c,n,r),null!==u.callback&&(e.effectTag|=32,u.nextEffect=null,null===t.lastEffect?t.firstEffect=t.lastEffect=u:(t.lastEffect.nextEffect=u,t.lastEffect=u))),u=u.next}for(l=null,u=t.firstCapturedUpdate;null!==u;){var h=u.expirationTime;h<i?(null===l&&(l=u,null===a&&(o=c)),s<h&&(s=h)):(c=fo(e,0,u,c,n,r),null!==u.callback&&(e.effectTag|=32,u.nextEffect=null,null===t.lastCapturedEffect?t.firstCapturedEffect=t.lastCapturedEffect=u:(t.lastCapturedEffect.nextEffect=u,t.lastCapturedEffect=u))),u=u.next}null===a&&(t.lastUpdate=null),null===l?t.lastCapturedUpdate=null:e.effectTag|=32,null===a&&null===l&&(o=c),t.baseState=o,t.firstUpdate=a,t.firstCapturedUpdate=l,gu(s),e.expirationTime=s,e.memoizedState=c}function mo(e,t,n){null!==t.firstCapturedUpdate&&(null!==t.lastUpdate&&(t.lastUpdate.next=t.firstCapturedUpdate,t.lastUpdate=t.lastCapturedUpdate),t.firstCapturedUpdate=t.lastCapturedUpdate=null),yo(t.firstEffect,n),t.firstEffect=t.lastEffect=null,yo(t.firstCapturedEffect,n),t.firstCapturedEffect=t.lastCapturedEffect=null}function yo(e,t){for(;null!==e;){var n=e.callback;if(null!==n){e.callback=null;var r=t;if("function"!==typeof n)throw a(Error(191),n);n.call(r)}e=e.nextEffect}}var go=R.ReactCurrentBatchConfig,vo=(new r.Component).refs;function bo(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:i({},t,n),e.memoizedState=n,null!==(r=e.updateQueue)&&0===e.expirationTime&&(r.baseState=n)}var wo={isMounted:function(e){return!!(e=e._reactInternalFiber)&&wt(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternalFiber;var r=Js(),i=go.suspense;(i=so(r=Zs(r,e,i),i)).payload=t,void 0!==n&&null!==n&&(i.callback=n),co(e,i),nu(e,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternalFiber;var r=Js(),i=go.suspense;(i=so(r=Zs(r,e,i),i)).tag=1,i.payload=t,void 0!==n&&null!==n&&(i.callback=n),co(e,i),nu(e,r)},enqueueForceUpdate:function(e,t){e=e._reactInternalFiber;var n=Js(),r=go.suspense;(r=so(n=Zs(n,e,r),r)).tag=2,void 0!==t&&null!==t&&(r.callback=t),co(e,r),nu(e,n)}};function Eo(e,t,n,r,i,o,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,o,a):!t.prototype||!t.prototype.isPureReactComponent||(!$r(n,r)||!$r(i,o))}function So(e,t,n){var r=!1,i=ci,o=t.contextType;return"object"===typeof o&&null!==o?o=ro(o):(i=pi(t)?fi:li.current,o=(r=null!==(r=t.contextTypes)&&void 0!==r)?di(e,i):ci),t=new t(n,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=wo,e.stateNode=t,t._reactInternalFiber=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function To(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&wo.enqueueReplaceState(t,t.state,null)}function Co(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=vo;var o=t.contextType;"object"===typeof o&&null!==o?i.context=ro(o):(o=pi(t)?fi:li.current,i.context=di(e,o)),null!==(o=e.updateQueue)&&(po(e,o,n,i,r),i.state=e.memoizedState),"function"===typeof(o=t.getDerivedStateFromProps)&&(bo(e,t,o,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&wo.enqueueReplaceState(i,i.state,null),null!==(o=e.updateQueue)&&(po(e,o,n,i,r),i.state=e.memoizedState)),"function"===typeof i.componentDidMount&&(e.effectTag|=4)}var Io=Array.isArray;function ko(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw a(Error(309));var r=n.stateNode}if(!r)throw a(Error(147),e);var i=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===i?t.ref:((t=function(e){var t=r.refs;t===vo&&(t=r.refs={}),null===e?delete t[i]:t[i]=e})._stringRef=i,t)}if("string"!==typeof e)throw a(Error(284));if(!n._owner)throw a(Error(290),e)}return e}function No(e,t){if("textarea"!==e.type)throw a(Error(31),"[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t,"")}function Do(e){function t(t,n){if(e){var r=t.lastEffect;null!==r?(r.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.effectTag=8}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t,n){return(e=Fu(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.effectTag=vt,n):r:(t.effectTag=vt,n):n}function s(t){return e&&null===t.alternate&&(t.effectTag=vt),t}function u(e,t,n,r){return null===t||6!==t.tag?((t=Uu(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){return null!==t&&t.elementType===n.type?((r=i(t,n.props)).ref=ko(e,t,n),r.return=e,r):((r=qu(n.type,n.key,n.props,null,e.mode,r)).ref=ko(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Bu(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function h(e,t,n,r,o){return null===t||7!==t.tag?((t=Vu(n,e.mode,r,o)).return=e,t):((t=i(t,n)).return=e,t)}function f(e,t,n){if("string"===typeof t||"number"===typeof t)return(t=Uu(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case L:return(n=qu(t.type,t.key,t.props,null,e.mode,n)).ref=ko(e,null,t),n.return=e,n;case F:return(t=Bu(t,e.mode,n)).return=e,t}if(Io(t)||$(t))return(t=Vu(t,e.mode,n,null)).return=e,t;No(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n||"number"===typeof n)return null!==i?null:u(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case L:return n.key===i?n.type===q?h(e,t,n.props.children,r,i):c(e,t,n,r):null;case F:return n.key===i?l(e,t,n,r):null}if(Io(n)||$(n))return null!==i?null:h(e,t,n,r,null);No(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r||"number"===typeof r)return u(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case L:return e=e.get(null===r.key?n:r.key)||null,r.type===q?h(t,e,r.props.children,i,r.key):c(t,e,r,i);case F:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i)}if(Io(r)||$(r))return h(t,e=e.get(n)||null,r,i,null);No(t,r)}return null}function m(i,a,s,u){for(var c=null,l=null,h=a,m=a=0,y=null;null!==h&&m<s.length;m++){h.index>m?(y=h,h=null):y=h.sibling;var g=d(i,h,s[m],u);if(null===g){null===h&&(h=y);break}e&&h&&null===g.alternate&&t(i,h),a=o(g,a,m),null===l?c=g:l.sibling=g,l=g,h=y}if(m===s.length)return n(i,h),c;if(null===h){for(;m<s.length;m++)null!==(h=f(i,s[m],u))&&(a=o(h,a,m),null===l?c=h:l.sibling=h,l=h);return c}for(h=r(i,h);m<s.length;m++)null!==(y=p(h,i,m,s[m],u))&&(e&&null!==y.alternate&&h.delete(null===y.key?m:y.key),a=o(y,a,m),null===l?c=y:l.sibling=y,l=y);return e&&h.forEach((function(e){return t(i,e)})),c}function y(i,s,u,c){var l=$(u);if("function"!==typeof l)throw a(Error(150));if(null==(u=l.call(u)))throw a(Error(151));for(var h=l=null,m=s,y=s=0,g=null,v=u.next();null!==m&&!v.done;y++,v=u.next()){m.index>y?(g=m,m=null):g=m.sibling;var b=d(i,m,v.value,c);if(null===b){null===m&&(m=g);break}e&&m&&null===b.alternate&&t(i,m),s=o(b,s,y),null===h?l=b:h.sibling=b,h=b,m=g}if(v.done)return n(i,m),l;if(null===m){for(;!v.done;y++,v=u.next())null!==(v=f(i,v.value,c))&&(s=o(v,s,y),null===h?l=v:h.sibling=v,h=v);return l}for(m=r(i,m);!v.done;y++,v=u.next())null!==(v=p(m,i,y,v.value,c))&&(e&&null!==v.alternate&&m.delete(null===v.key?y:v.key),s=o(v,s,y),null===h?l=v:h.sibling=v,h=v);return e&&m.forEach((function(e){return t(i,e)})),l}return function(e,r,o,u){var c="object"===typeof o&&null!==o&&o.type===q&&null===o.key;c&&(o=o.props.children);var l="object"===typeof o&&null!==o;if(l)switch(o.$$typeof){case L:e:{for(l=o.key,c=r;null!==c;){if(c.key===l){if(7===c.tag?o.type===q:c.elementType===o.type){n(e,c.sibling),(r=i(c,o.type===q?o.props.children:o.props)).ref=ko(e,c,o),r.return=e,e=r;break e}n(e,c);break}t(e,c),c=c.sibling}o.type===q?((r=Vu(o.props.children,e.mode,u,o.key)).return=e,e=r):((u=qu(o.type,o.key,o.props,null,e.mode,u)).ref=ko(e,r,o),u.return=e,e=u)}return s(e);case F:e:{for(c=o.key;null!==r;){if(r.key===c){if(4===r.tag&&r.stateNode.containerInfo===o.containerInfo&&r.stateNode.implementation===o.implementation){n(e,r.sibling),(r=i(r,o.children||[])).return=e,e=r;break e}n(e,r);break}t(e,r),r=r.sibling}(r=Bu(o,e.mode,u)).return=e,e=r}return s(e)}if("string"===typeof o||"number"===typeof o)return o=""+o,null!==r&&6===r.tag?(n(e,r.sibling),(r=i(r,o)).return=e,e=r):(n(e,r),(r=Uu(o,e.mode,u)).return=e,e=r),s(e);if(Io(o))return m(e,r,o,u);if($(o))return y(e,r,o,u);if(l&&No(e,o),"undefined"===typeof o&&!c)switch(e.tag){case 1:case 0:throw e=e.type,a(Error(152),e.displayName||e.name||"Component")}return n(e,r)}}var Ao=Do(!0),_o=Do(!1),xo={},Oo={current:xo},Ro={current:xo},Po={current:xo};function Mo(e){if(e===xo)throw a(Error(174));return e}function Lo(e,t){ui(Po,t),ui(Ro,e),ui(Oo,xo);var n=t.nodeType;switch(n){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Ue(null,"");break;default:t=Ue(t=(n=8===n?t.parentNode:t).namespaceURI||null,n=n.tagName)}si(Oo),ui(Oo,t)}function Fo(e){si(Oo),si(Ro),si(Po)}function qo(e){Mo(Po.current);var t=Mo(Oo.current),n=Ue(t,e.type);t!==n&&(ui(Ro,e),ui(Oo,n))}function Vo(e){Ro.current===e&&(si(Oo),si(Ro))}var Uo={current:0};function Bo(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||n.data===Gn||n.data===Hn))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if((64&t.effectTag)!==gt)return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function jo(e,t){return{responder:e,props:t}}var zo=R.ReactCurrentDispatcher,Qo=0,Wo=null,Ko=null,Go=null,Ho=null,Yo=null,$o=null,Xo=0,Jo=null,Zo=0,ea=!1,ta=null,na=0;function ra(){throw a(Error(321))}function ia(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Hr(e[n],t[n]))return!1;return!0}function oa(e,t,n,r,i,o){if(Qo=o,Wo=t,Go=null!==e?e.memoizedState:null,zo.current=null===Go?va:ba,t=n(r,i),ea){do{ea=!1,na+=1,Go=null!==e?e.memoizedState:null,$o=Ho,Jo=Yo=Ko=null,zo.current=ba,t=n(r,i)}while(ea);ta=null,na=0}if(zo.current=ga,(e=Wo).memoizedState=Ho,e.expirationTime=Xo,e.updateQueue=Jo,e.effectTag|=Zo,e=null!==Ko&&null!==Ko.next,Qo=0,$o=Yo=Ho=Go=Ko=Wo=null,Xo=0,Jo=null,Zo=0,e)throw a(Error(300));return t}function aa(){zo.current=ga,Qo=0,$o=Yo=Ho=Go=Ko=Wo=null,Xo=0,Jo=null,Zo=0,ea=!1,ta=null,na=0}function sa(){var e={memoizedState:null,baseState:null,queue:null,baseUpdate:null,next:null};return null===Yo?Ho=Yo=e:Yo=Yo.next=e,Yo}function ua(){if(null!==$o)$o=(Yo=$o).next,Go=null!==(Ko=Go)?Ko.next:null;else{if(null===Go)throw a(Error(310));var e={memoizedState:(Ko=Go).memoizedState,baseState:Ko.baseState,queue:Ko.queue,baseUpdate:Ko.baseUpdate,next:null};Yo=null===Yo?Ho=e:Yo.next=e,Go=Ko.next}return Yo}function ca(e,t){return"function"===typeof t?t(e):t}function la(e){var t=ua(),n=t.queue;if(null===n)throw a(Error(311));if(n.lastRenderedReducer=e,0<na){var r=n.dispatch;if(null!==ta){var i=ta.get(n);if(void 0!==i){ta.delete(n);var o=t.memoizedState;do{o=e(o,i.action),i=i.next}while(null!==i);return Hr(o,t.memoizedState)||(_a=!0),t.memoizedState=o,t.baseUpdate===n.last&&(t.baseState=o),n.lastRenderedState=o,[o,r]}}return[t.memoizedState,r]}r=n.last;var s=t.baseUpdate;if(o=t.baseState,null!==s?(null!==r&&(r.next=null),r=s.next):r=null!==r?r.next:null,null!==r){var u=i=null,c=r,l=!1;do{var h=c.expirationTime;h<Qo?(l||(l=!0,u=s,i=o),h>Xo&&gu(Xo=h)):(yu(h,c.suspenseConfig),o=c.eagerReducer===e?c.eagerState:e(o,c.action)),s=c,c=c.next}while(null!==c&&c!==r);l||(u=s,i=o),Hr(o,t.memoizedState)||(_a=!0),t.memoizedState=o,t.baseUpdate=u,t.baseState=i,n.lastRenderedState=o}return[t.memoizedState,n.dispatch]}function ha(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===Jo?(Jo={lastEffect:null}).lastEffect=e.next=e:null===(t=Jo.lastEffect)?Jo.lastEffect=e.next=e:(n=t.next,t.next=e,e.next=n,Jo.lastEffect=e),e}function fa(e,t,n,r){var i=sa();Zo|=e,i.memoizedState=ha(t,n,void 0,void 0===r?null:r)}function da(e,t,n,r){var i=ua();r=void 0===r?null:r;var o=void 0;if(null!==Ko){var a=Ko.memoizedState;if(o=a.destroy,null!==r&&ia(r,a.deps))return void ha(0,n,o,r)}Zo|=e,i.memoizedState=ha(t,n,o,r)}function pa(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function ma(){}function ya(e,t,n){if(!(25>na))throw a(Error(301));var r=e.alternate;if(e===Wo||null!==r&&r===Wo)if(ea=!0,e={expirationTime:Qo,suspenseConfig:null,action:n,eagerReducer:null,eagerState:null,next:null},null===ta&&(ta=new Map),void 0===(n=ta.get(t)))ta.set(t,e);else{for(t=n;null!==t.next;)t=t.next;t.next=e}else{var i=Js(),o=go.suspense;o={expirationTime:i=Zs(i,e,o),suspenseConfig:o,action:n,eagerReducer:null,eagerState:null,next:null};var s=t.last;if(null===s)o.next=o;else{var u=s.next;null!==u&&(o.next=u),s.next=o}if(t.last=o,0===e.expirationTime&&(null===r||0===r.expirationTime)&&null!==(r=t.lastRenderedReducer))try{var c=t.lastRenderedState,l=r(c,n);if(o.eagerReducer=r,o.eagerState=l,Hr(l,c))return}catch(h){}nu(e,i)}}var ga={readContext:ro,useCallback:ra,useContext:ra,useEffect:ra,useImperativeHandle:ra,useLayoutEffect:ra,useMemo:ra,useReducer:ra,useRef:ra,useState:ra,useDebugValue:ra,useResponder:ra},va={readContext:ro,useCallback:function(e,t){return sa().memoizedState=[e,void 0===t?null:t],e},useContext:ro,useEffect:function(e,t){return fa(516,192,e,t)},useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,fa(4,36,pa.bind(null,t,e),n)},useLayoutEffect:function(e,t){return fa(4,36,e,t)},useMemo:function(e,t){var n=sa();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=sa();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e=(e=r.queue={last:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=ya.bind(null,Wo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},sa().memoizedState=e},useState:function(e){var t=sa();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={last:null,dispatch:null,lastRenderedReducer:ca,lastRenderedState:e}).dispatch=ya.bind(null,Wo,e),[t.memoizedState,e]},useDebugValue:ma,useResponder:jo},ba={readContext:ro,useCallback:function(e,t){var n=ua();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ia(t,r[1])?r[0]:(n.memoizedState=[e,t],e)},useContext:ro,useEffect:function(e,t){return da(516,192,e,t)},useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,da(4,36,pa.bind(null,t,e),n)},useLayoutEffect:function(e,t){return da(4,36,e,t)},useMemo:function(e,t){var n=ua();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ia(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)},useReducer:la,useRef:function(){return ua().memoizedState},useState:function(e){return la(ca)},useDebugValue:ma,useResponder:jo},wa=null,Ea=null,Sa=!1;function Ta(e,t){var n=Mu(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.effectTag=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function Ca(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);case 13:default:return!1}}function Ia(e){if(Sa){var t=Ea;if(t){var n=t;if(!Ca(e,t)){if(!(t=tr(n.nextSibling))||!Ca(e,t))return e.effectTag=e.effectTag&~bt|vt,Sa=!1,void(wa=e);Ta(wa,n)}wa=e,Ea=tr(t.firstChild)}else e.effectTag=e.effectTag&~bt|vt,Sa=!1,wa=e}}function ka(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;wa=e}function Na(e){if(e!==wa)return!1;if(!Sa)return ka(e),Sa=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!Jn(t,e.memoizedProps))for(t=Ea;t;)Ta(e,t),t=tr(t.nextSibling);if(ka(e),13===e.tag)if(null===(e=null!==(e=e.memoizedState)?e.dehydrated:null))e=Ea;else e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if(n===Kn){if(0===t){e=tr(e.nextSibling);break e}t--}else n!==Wn&&n!==Hn&&n!==Gn||t++}e=e.nextSibling}e=null}else e=wa?tr(e.stateNode.nextSibling):null;return Ea=e,!0}function Da(){Ea=wa=null,Sa=!1}var Aa=R.ReactCurrentOwner,_a=!1;function xa(e,t,n,r){t.child=null===e?_o(t,null,n,r):Ao(t,e.child,n,r)}function Oa(e,t,n,r,i){n=n.render;var o=t.ref;return no(t,i),r=oa(e,t,n,r,o,i),null===e||_a?(t.effectTag|=1,xa(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.effectTag&=-517,e.expirationTime<=i&&(e.expirationTime=0),Ha(e,t,i))}function Ra(e,t,n,r,i,o){if(null===e){var a=n.type;return"function"!==typeof a||Lu(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=qu(n.type,null,r,null,t.mode,o)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Pa(e,t,a,r,i,o))}return a=e.child,i<o&&(i=a.memoizedProps,(n=null!==(n=n.compare)?n:$r)(i,r)&&e.ref===t.ref)?Ha(e,t,o):(t.effectTag|=1,(e=Fu(a,r)).ref=t.ref,e.return=t,t.child=e)}function Pa(e,t,n,r,i,o){return null!==e&&$r(e.memoizedProps,r)&&e.ref===t.ref&&(_a=!1,i<o)?Ha(e,t,o):La(e,t,n,r,o)}function Ma(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.effectTag|=128)}function La(e,t,n,r,i){var o=pi(n)?fi:li.current;return o=di(t,o),no(t,i),n=oa(e,t,n,r,o,i),null===e||_a?(t.effectTag|=1,xa(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.effectTag&=-517,e.expirationTime<=i&&(e.expirationTime=0),Ha(e,t,i))}function Fa(e,t,n,r,i){if(pi(n)){var o=!0;bi(t)}else o=!1;if(no(t,i),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=vt),So(t,n,r),Co(t,n,r,i),r=!0;else if(null===e){var a=t.stateNode,s=t.memoizedProps;a.props=s;var u=a.context,c=n.contextType;"object"===typeof c&&null!==c?c=ro(c):c=di(t,c=pi(n)?fi:li.current);var l=n.getDerivedStateFromProps,h="function"===typeof l||"function"===typeof a.getSnapshotBeforeUpdate;h||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==r||u!==c)&&To(t,a,r,c),io=!1;var f=t.memoizedState;u=a.state=f;var d=t.updateQueue;null!==d&&(po(t,d,r,a,i),u=t.memoizedState),s!==r||f!==u||hi.current||io?("function"===typeof l&&(bo(t,n,l,r),u=t.memoizedState),(s=io||Eo(t,n,s,r,f,u,c))?(h||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(t.effectTag|=4)):("function"===typeof a.componentDidMount&&(t.effectTag|=4),t.memoizedProps=r,t.memoizedState=u),a.props=r,a.state=u,a.context=c,r=s):("function"===typeof a.componentDidMount&&(t.effectTag|=4),r=!1)}else a=t.stateNode,s=t.memoizedProps,a.props=t.type===t.elementType?s:Gi(t.type,s),u=a.context,"object"===typeof(c=n.contextType)&&null!==c?c=ro(c):c=di(t,c=pi(n)?fi:li.current),(h="function"===typeof(l=n.getDerivedStateFromProps)||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==r||u!==c)&&To(t,a,r,c),io=!1,u=t.memoizedState,f=a.state=u,null!==(d=t.updateQueue)&&(po(t,d,r,a,i),f=t.memoizedState),s!==r||u!==f||hi.current||io?("function"===typeof l&&(bo(t,n,l,r),f=t.memoizedState),(l=io||Eo(t,n,s,r,u,f,c))?(h||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(r,f,c),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,f,c)),"function"===typeof a.componentDidUpdate&&(t.effectTag|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(t.effectTag|=256)):("function"!==typeof a.componentDidUpdate||s===e.memoizedProps&&u===e.memoizedState||(t.effectTag|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&u===e.memoizedState||(t.effectTag|=256),t.memoizedProps=r,t.memoizedState=f),a.props=r,a.state=f,a.context=c,r=l):("function"!==typeof a.componentDidUpdate||s===e.memoizedProps&&u===e.memoizedState||(t.effectTag|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&u===e.memoizedState||(t.effectTag|=256),r=!1);return qa(e,t,n,r,o,i)}function qa(e,t,n,r,i,o){Ma(e,t);var a=(64&t.effectTag)!==gt;if(!r&&!a)return i&&wi(t,n,!1),Ha(e,t,o);r=t.stateNode,Aa.current=t;var s=a&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.effectTag|=1,null!==e&&a?(t.child=Ao(t,e.child,null,o),t.child=Ao(t,null,s,o)):xa(e,t,s,o),t.memoizedState=r.state,i&&wi(t,n,!0),t.child}function Va(e){var t=e.stateNode;t.pendingContext?gi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&gi(0,t.context,!1),Lo(e,t.containerInfo)}var Ua,Ba,ja,za,Qa={dehydrated:null,retryTime:1};function Wa(e,t,n){var r,i=t.mode,o=t.pendingProps,a=Uo.current,s=!1;if((r=(64&t.effectTag)!==gt)||(r=0!==(2&a)&&(null===e||null!==e.memoizedState)),r?(s=!0,t.effectTag&=-65):null!==e&&null===e.memoizedState||void 0===o.fallback||!0===o.unstable_avoidThisFallback||(a|=1),ui(Uo,1&a),null===e){if(s){if(s=o.fallback,(o=Vu(null,i,0,null)).return=t,0===(2&t.mode))for(e=null!==t.memoizedState?t.child.child:t.child,o.child=e;null!==e;)e.return=o,e=e.sibling;return(n=Vu(s,i,n,null)).return=t,o.sibling=n,t.memoizedState=Qa,t.child=o,n}return i=o.children,t.memoizedState=null,t.child=_o(t,null,i,n)}if(null!==e.memoizedState){if(i=(e=e.child).sibling,s){if(o=o.fallback,(n=Fu(e,e.pendingProps)).return=t,0===(2&t.mode)&&(s=null!==t.memoizedState?t.child.child:t.child)!==e.child)for(n.child=s;null!==s;)s.return=n,s=s.sibling;return(i=Fu(i,o,i.expirationTime)).return=t,n.sibling=i,n.childExpirationTime=0,t.memoizedState=Qa,t.child=n,i}return n=Ao(t,e.child,o.children,n),t.memoizedState=null,t.child=n}if(e=e.child,s){if(s=o.fallback,(o=Vu(null,i,0,null)).return=t,o.child=e,null!==e&&(e.return=o),0===(2&t.mode))for(e=null!==t.memoizedState?t.child.child:t.child,o.child=e;null!==e;)e.return=o,e=e.sibling;return(n=Vu(s,i,n,null)).return=t,o.sibling=n,n.effectTag|=vt,o.childExpirationTime=0,t.memoizedState=Qa,t.child=o,n}return t.memoizedState=null,t.child=Ao(t,e,o.children,n)}function Ka(e,t,n,r,i){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,last:r,tail:n,tailExpiration:0,tailMode:i}:(o.isBackwards=t,o.rendering=null,o.last=r,o.tail=n,o.tailExpiration=0,o.tailMode=i)}function Ga(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if(xa(e,t,r.children,n),0!==(2&(r=Uo.current)))r=1&r|2,t.effectTag|=64;else{if(null!==e&&(64&e.effectTag)!==gt)e:for(e=t.child;null!==e;){if(13===e.tag){if(null!==e.memoizedState){e.expirationTime<n&&(e.expirationTime=n);var a=e.alternate;null!==a&&a.expirationTime<n&&(a.expirationTime=n),to(e.return,n)}}else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(ui(Uo,r),0===(2&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(r=n.alternate)&&null===Bo(r)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Ka(t,!1,i,n,o);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(r=i.alternate)&&null===Bo(r)){t.child=i;break}r=i.sibling,i.sibling=n,n=i,i=r}Ka(t,!0,n,null,o);break;case"together":Ka(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ha(e,t,n){null!==e&&(t.dependencies=e.dependencies);var r=t.expirationTime;if(0!==r&&gu(r),t.childExpirationTime<n)return null;if(null!==e&&t.child!==e.child)throw a(Error(153));if(null!==t.child){for(n=Fu(e=t.child,e.pendingProps,e.expirationTime),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Fu(e,e.pendingProps,e.expirationTime)).return=t;n.sibling=null}return t.child}function Ya(e){e.effectTag|=4}function $a(e,t){switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Xa(e){switch(e.tag){case 1:pi(e.type)&&mi();var t=e.effectTag;return 4096&t?(e.effectTag=-4097&t|64,e):null;case 3:if(Fo(),yi(),(64&(t=e.effectTag))!==gt)throw a(Error(285));return e.effectTag=-4097&t|64,e;case 5:return Vo(e),null;case 13:return si(Uo),4096&(t=e.effectTag)?(e.effectTag=-4097&t|64,e):null;case 19:return si(Uo),null;case 4:return Fo(),null;case 10:return eo(e),null;default:return null}}function Ja(e,t){return{value:e,source:t,stack:J(t)}}Ua=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ba=function(){},ja=function(e,t,n,r,o){var a=e.memoizedProps;if(a!==r){var s,u,c=t.stateNode;switch(Mo(Oo.current),e=null,n){case"input":a=ke(c,a),r=ke(c,r),e=[];break;case"option":a=Oe(c,a),r=Oe(c,r),e=[];break;case"select":a=i({},a,{value:void 0}),r=i({},r,{value:void 0}),e=[];break;case"textarea":a=Pe(c,a),r=Pe(c,r),e=[];break;default:"function"!==typeof a.onClick&&"function"===typeof r.onClick&&(c.onclick=Vn)}for(s in Ln(n,r),n=null,a)if(!r.hasOwnProperty(s)&&a.hasOwnProperty(s)&&null!=a[s])if("style"===s)for(u in c=a[s])c.hasOwnProperty(u)&&(n||(n={}),n[u]="");else"dangerouslySetInnerHTML"!==s&&"children"!==s&&"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(d.hasOwnProperty(s)?e||(e=[]):(e=e||[]).push(s,null));for(s in r){var l=r[s];if(c=null!=a?a[s]:void 0,r.hasOwnProperty(s)&&l!==c&&(null!=l||null!=c))if("style"===s)if(c){for(u in c)!c.hasOwnProperty(u)||l&&l.hasOwnProperty(u)||(n||(n={}),n[u]="");for(u in l)l.hasOwnProperty(u)&&c[u]!==l[u]&&(n||(n={}),n[u]=l[u])}else n||(e||(e=[]),e.push(s,n)),n=l;else"dangerouslySetInnerHTML"===s?(l=l?l.__html:void 0,c=c?c.__html:void 0,null!=l&&c!==l&&(e=e||[]).push(s,""+l)):"children"===s?c===l||"string"!==typeof l&&"number"!==typeof l||(e=e||[]).push(s,""+l):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&(d.hasOwnProperty(s)?(null!=l&&qn(o,s),e||c===l||(e=[])):(e=e||[]).push(s,l))}n&&(e=e||[]).push("style",n),o=e,(t.updateQueue=o)&&Ya(t)}},za=function(e,t,n,r){n!==r&&Ya(t)};var Za="function"===typeof WeakSet?WeakSet:Set;function es(e,t){var n=t.source,r=t.stack;null===r&&null!==n&&(r=J(n)),null!==n&&X(n.type),t=t.value,null!==e&&1===e.tag&&X(e.type);try{console.error(t)}catch(i){setTimeout((function(){throw i}))}}function ts(e){var t=e.ref;if(null!==t)if("function"===typeof t)try{t(null)}catch(n){Au(e,n)}else t.current=null}function ns(e,t){switch(t.tag){case 0:case 11:case 15:rs(2,0,t);break;case 1:if(256&t.effectTag&&null!==e){var n=e.memoizedProps,r=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?n:Gi(t.type,n),r),e.__reactInternalSnapshotBeforeUpdate=t}break;case 3:case 5:case 6:case 4:case 17:break;default:throw a(Error(163))}}function rs(e,t,n){if(null!==(n=null!==(n=n.updateQueue)?n.lastEffect:null)){var r=n=n.next;do{if(0!==(r.tag&e)){var i=r.destroy;r.destroy=void 0,void 0!==i&&i()}0!==(r.tag&t)&&(i=r.create,r.destroy=i()),r=r.next}while(r!==n)}}function is(e,t,n){switch("function"===typeof Ru&&Ru(t),t.tag){case 0:case 11:case 14:case 15:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var r=e.next;ji(97<n?97:n,(function(){var e=r;do{var n=e.destroy;if(void 0!==n){var i=t;try{n()}catch(o){Au(i,o)}}e=e.next}while(e!==r)}))}break;case 1:ts(t),"function"===typeof(n=t.stateNode).componentWillUnmount&&function(e,t){try{t.props=e.memoizedProps,t.state=e.memoizedState,t.componentWillUnmount()}catch(n){Au(e,n)}}(t,n);break;case 5:ts(t);break;case 4:us(e,t,n)}}function os(e){var t=e.alternate;e.return=null,e.child=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.alternate=null,e.firstEffect=null,e.lastEffect=null,e.pendingProps=null,e.memoizedProps=null,null!==t&&os(t)}function as(e){return 5===e.tag||3===e.tag||4===e.tag}function ss(e){e:{for(var t=e.return;null!==t;){if(as(t)){var n=t;break e}t=t.return}throw a(Error(160))}switch(t=n.stateNode,n.tag){case 5:var r=!1;break;case 3:case 4:t=t.containerInfo,r=!0;break;default:throw a(Error(161))}16&n.effectTag&&(ze(t,""),n.effectTag&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||as(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(n.effectTag&vt)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(n.effectTag&vt)){n=n.stateNode;break e}}for(var i=e;;){var o=5===i.tag||6===i.tag;if(o){var s=o?i.stateNode:i.stateNode.instance;if(n)if(r){var u=s;s=n,8===(o=t).nodeType?o.parentNode.insertBefore(u,s):o.insertBefore(u,s)}else t.insertBefore(s,n);else r?(8===(u=t).nodeType?(o=u.parentNode).insertBefore(s,u):(o=u).appendChild(s),null!==(u=u._reactRootContainer)&&void 0!==u||null!==o.onclick||(o.onclick=Vn)):t.appendChild(s)}else if(4!==i.tag&&null!==i.child){i.child.return=i,i=i.child;continue}if(i===e)break;for(;null===i.sibling;){if(null===i.return||i.return===e)return;i=i.return}i.sibling.return=i.return,i=i.sibling}}function us(e,t,n){for(var r,i,o=t,s=!1;;){if(!s){s=o.return;e:for(;;){if(null===s)throw a(Error(160));switch(r=s.stateNode,s.tag){case 5:i=!1;break e;case 3:case 4:r=r.containerInfo,i=!0;break e}s=s.return}s=!0}if(5===o.tag||6===o.tag){e:for(var u=e,c=o,l=n,h=c;;)if(is(u,h,l),null!==h.child&&4!==h.tag)h.child.return=h,h=h.child;else{if(h===c)break;for(;null===h.sibling;){if(null===h.return||h.return===c)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}i?(u=r,c=o.stateNode,8===u.nodeType?u.parentNode.removeChild(c):u.removeChild(c)):r.removeChild(o.stateNode)}else if(4===o.tag){if(null!==o.child){r=o.stateNode.containerInfo,i=!0,o.child.return=o,o=o.child;continue}}else if(is(e,o,n),null!==o.child){o.child.return=o,o=o.child;continue}if(o===t)break;for(;null===o.sibling;){if(null===o.return||o.return===t)return;4===(o=o.return).tag&&(s=!1)}o.sibling.return=o.return,o=o.sibling}}function cs(e,t){switch(t.tag){case 0:case 11:case 14:case 15:rs(4,8,t);break;case 1:break;case 5:var n=t.stateNode;if(null!=n){var r=t.memoizedProps,i=null!==e?e.memoizedProps:r;e=t.type;var o=t.updateQueue;if(t.updateQueue=null,null!==o){for(n[or]=r,"input"===e&&"radio"===r.type&&null!=r.name&&De(n,r),Fn(e,i),t=Fn(e,r),i=0;i<o.length;i+=2){var s=o[i],u=o[i+1];"style"===s?Pn(n,u):"dangerouslySetInnerHTML"===s?je(n,u):"children"===s?ze(n,u):Se(n,s,u,t)}switch(e){case"input":Ae(n,r);break;case"textarea":Le(n,r);break;case"select":t=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,null!=(e=r.value)?Re(n,!!r.multiple,e,!1):t!==!!r.multiple&&(null!=r.defaultValue?Re(n,!!r.multiple,r.defaultValue,!0):Re(n,!!r.multiple,r.multiple?[]:"",!1))}}}break;case 6:if(null===t.stateNode)throw a(Error(162));t.stateNode.nodeValue=t.memoizedProps;break;case 3:(t=t.stateNode).hydrate&&(t.hydrate=!1,yt(t.containerInfo));break;case 12:break;case 13:if(n=t,null===t.memoizedState?r=!1:(r=!0,n=t.child,Vs=Vi()),null!==n)e:for(e=n;;){if(5===e.tag)o=e.stateNode,r?"function"===typeof(o=o.style).setProperty?o.setProperty("display","none","important"):o.display="none":(o=e.stateNode,i=void 0!==(i=e.memoizedProps.style)&&null!==i&&i.hasOwnProperty("display")?i.display:null,o.style.display=Rn("display",i));else if(6===e.tag)e.stateNode.nodeValue=r?"":e.memoizedProps;else{if(13===e.tag&&null!==e.memoizedState&&null===e.memoizedState.dehydrated){(o=e.child.sibling).return=e,e=o;continue}if(null!==e.child){e.child.return=e,e=e.child;continue}}if(e===n)break e;for(;null===e.sibling;){if(null===e.return||e.return===n)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}ls(t);break;case 19:ls(t);break;case 17:case 20:case 21:break;default:throw a(Error(163))}}function ls(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Za),t.forEach((function(t){var r=xu.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}var hs="function"===typeof WeakMap?WeakMap:Map;function fs(e,t,n){(n=so(n,null)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){js||(js=!0,zs=r),es(e,t)},n}function ds(e,t,n){(n=so(n,null)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return es(e,t),r(i)}}var o=e.stateNode;return null!==o&&"function"===typeof o.componentDidCatch&&(n.callback=function(){"function"!==typeof r&&(null===Qs?Qs=new Set([this]):Qs.add(this),es(e,t));var n=t.stack;this.componentDidCatch(t.value,{componentStack:null!==n?n:""})}),n}var ps=Math.ceil,ms=R.ReactCurrentDispatcher,ys=R.ReactCurrentOwner,gs=0,vs=8,bs=16,ws=32,Es=0,Ss=1,Ts=2,Cs=3,Is=4,ks=5,Ns=6,Ds=gs,As=null,_s=null,xs=0,Os=Es,Rs=null,Ps=1073741823,Ms=1073741823,Ls=null,Fs=0,qs=!1,Vs=0,Us=500,Bs=null,js=!1,zs=null,Qs=null,Ws=!1,Ks=null,Gs=90,Hs=null,Ys=0,$s=null,Xs=0;function Js(){return(Ds&(bs|ws))!==gs?1073741821-(Vi()/10|0):0!==Xs?Xs:Xs=1073741821-(Vi()/10|0)}function Zs(e,t,n){if(0===(2&(t=t.mode)))return 1073741823;var r=Ui();if(0===(4&t))return 99===r?1073741823:1073741822;if((Ds&bs)!==gs)return xs;if(null!==n)e=1073741821-25*(1+((1073741821-e+(0|n.timeoutMs||5e3)/10)/25|0));else switch(r){case 99:e=1073741823;break;case 98:e=1073741821-10*(1+((1073741821-e+15)/10|0));break;case 97:case 96:e=1073741821-25*(1+((1073741821-e+500)/25|0));break;case 95:e=2;break;default:throw a(Error(326))}return null!==As&&e===xs&&--e,e}var eu,tu=0;function nu(e,t){if(50<Ys)throw Ys=0,$s=null,a(Error(185));if(null!==(e=ru(e,t))){var n=Ui();1073741823===t?(Ds&vs)!==gs&&(Ds&(bs|ws))===gs?su(e):(ou(e),Ds===gs&&Wi()):ou(e),(4&Ds)===gs||98!==n&&99!==n||(null===Hs?Hs=new Map([[e,t]]):(void 0===(n=Hs.get(e))||n>t)&&Hs.set(e,t))}}function ru(e,t){e.expirationTime<t&&(e.expirationTime=t);var n=e.alternate;null!==n&&n.expirationTime<t&&(n.expirationTime=t);var r=e.return,i=null;if(null===r&&3===e.tag)i=e.stateNode;else for(;null!==r;){if(n=r.alternate,r.childExpirationTime<t&&(r.childExpirationTime=t),null!==n&&n.childExpirationTime<t&&(n.childExpirationTime=t),null===r.return&&3===r.tag){i=r.stateNode;break}r=r.return}return null!==i&&(As===i&&(gu(t),Os===Is&&Qu(i,xs)),Wu(i,t)),i}function iu(e){var t=e.lastExpiredTime;return 0!==t?t:zu(e,t=e.firstPendingTime)?(t=e.lastPingedTime)>(e=e.nextKnownPendingLevel)?t:e:t}function ou(e){if(0!==e.lastExpiredTime)e.callbackExpirationTime=1073741823,e.callbackPriority=99,e.callbackNode=Qi(su.bind(null,e));else{var t=iu(e),n=e.callbackNode;if(0===t)null!==n&&(e.callbackNode=null,e.callbackExpirationTime=0,e.callbackPriority=90);else{var r=Js();if(1073741823===t?r=99:1===t||2===t?r=95:r=0>=(r=10*(1073741821-t)-10*(1073741821-r))?99:250>=r?98:5250>=r?97:95,null!==n){var i=e.callbackPriority;if(e.callbackExpirationTime===t&&i>=r)return;n!==Ri&&Ti(n)}e.callbackExpirationTime=t,e.callbackPriority=r,t=1073741823===t?Qi(su.bind(null,e)):zi(r,au.bind(null,e),{timeout:10*(1073741821-t)-Vi()}),e.callbackNode=t}}}function au(e,t){if(Xs=0,t)return Ku(e,t=Js()),ou(e),null;var n=iu(e);if(0!==n){if(t=e.callbackNode,(Ds&(bs|ws))!==gs)throw a(Error(327));if(ku(),e===As&&n===xs||du(e,n),null!==_s){var r=Ds;Ds|=bs;for(var i=mu();;)try{bu();break}catch(u){pu(e,u)}if(Ji(),Ds=r,ms.current=i,Os===Ss)throw t=Rs,du(e,n),Qu(e,n),ou(e),t;if(null===_s)switch(i=e.finishedWork=e.current.alternate,e.finishedExpirationTime=n,cu(e,n),r=Os,As=null,r){case Es:case Ss:throw a(Error(345));case Ts:if(2!==n){Ku(e,2);break}Tu(e);break;case Cs:if(Qu(e,n),n===(r=e.lastSuspendedTime)&&(e.nextKnownPendingLevel=Su(i)),1073741823===Ps&&10<(i=Vs+Us-Vi())){if(qs){var o=e.lastPingedTime;if(0===o||o>=n){e.lastPingedTime=n,du(e,n);break}}if(0!==(o=iu(e))&&o!==n)break;if(0!==r&&r!==n){e.lastPingedTime=r;break}e.timeoutHandle=Zn(Tu.bind(null,e),i);break}Tu(e);break;case Is:if(Qu(e,n),n===(r=e.lastSuspendedTime)&&(e.nextKnownPendingLevel=Su(i)),qs&&(0===(i=e.lastPingedTime)||i>=n)){e.lastPingedTime=n,du(e,n);break}if(0!==(i=iu(e))&&i!==n)break;if(0!==r&&r!==n){e.lastPingedTime=r;break}if(1073741823!==Ms?r=10*(1073741821-Ms)-Vi():1073741823===Ps?r=0:(r=10*(1073741821-Ps)-5e3,0>(r=(i=Vi())-r)&&(r=0),(n=10*(1073741821-n)-i)<(r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*ps(r/1960))-r)&&(r=n)),10<r){e.timeoutHandle=Zn(Tu.bind(null,e),r);break}Tu(e);break;case ks:if(1073741823!==Ps&&null!==Ls){o=Ps;var s=Ls;if(0>=(r=0|s.busyMinDurationMs)?r=0:(i=0|s.busyDelayMs,r=(o=Vi()-(10*(1073741821-o)-(0|s.timeoutMs||5e3)))<=i?0:i+r-o),10<r){Qu(e,n),e.timeoutHandle=Zn(Tu.bind(null,e),r);break}}Tu(e);break;case Ns:Qu(e,n);break;default:throw a(Error(329))}if(ou(e),e.callbackNode===t)return au.bind(null,e)}}return null}function su(e){var t=e.lastExpiredTime;if(t=0!==t?t:1073741823,e.finishedExpirationTime===t)Tu(e);else{if((Ds&(bs|ws))!==gs)throw a(Error(327));if(ku(),e===As&&t===xs||du(e,t),null!==_s){var n=Ds;Ds|=bs;for(var r=mu();;)try{vu();break}catch(i){pu(e,i)}if(Ji(),Ds=n,ms.current=r,Os===Ss)throw n=Rs,du(e,t),Qu(e,t),ou(e),n;if(null!==_s)throw a(Error(261));e.finishedWork=e.current.alternate,e.finishedExpirationTime=t,cu(e,t),Os===Ns?Qu(e,t):(As=null,Tu(e)),ou(e)}}return null}function uu(){(Ds&(1|bs|ws))===gs&&(function(){if(null!==Hs){var e=Hs;Hs=null,e.forEach((function(e,t){Ku(t,e),ou(t)})),Wi()}}(),ku())}function cu(e,t){var n=e.firstBatch;null!==n&&n._defer&&n._expirationTime>=t&&(zi(97,(function(){return n._onComplete(),null})),Os=Ns)}function lu(e,t){var n=Ds;Ds|=1;try{return e(t)}finally{(Ds=n)===gs&&Wi()}}function hu(e,t,n,r){var i=Ds;Ds|=4;try{return ji(98,e.bind(null,t,n,r))}finally{(Ds=i)===gs&&Wi()}}function fu(e,t){var n=Ds;Ds&=-2,Ds|=vs;try{return e(t)}finally{(Ds=n)===gs&&Wi()}}function du(e,t){e.finishedWork=null,e.finishedExpirationTime=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,er(n)),null!==_s)for(n=_s.return;null!==n;){var r=n;switch(r.tag){case 1:var i=r.type.childContextTypes;null!==i&&void 0!==i&&mi();break;case 3:Fo(),yi();break;case 5:Vo(r);break;case 4:Fo();break;case 13:case 19:si(Uo);break;case 10:eo(r)}n=n.return}As=e,_s=Fu(e.current,null),xs=t,Os=Es,Rs=null,Ms=Ps=1073741823,Ls=null,Fs=0,qs=!1}function pu(e,t){for(;;){try{if(Ji(),aa(),null===_s||null===_s.return)return Os=Ss,Rs=t,null;e:{var n=e,r=_s.return,i=_s,o=t;if(t=xs,i.effectTag|=2048,i.firstEffect=i.lastEffect=null,null!==o&&"object"===typeof o&&"function"===typeof o.then){var a=o,s=0!==(1&Uo.current),u=r;do{var c;if(c=13===u.tag){var l=u.memoizedState;if(null!==l)c=null!==l.dehydrated;else{var h=u.memoizedProps;c=void 0!==h.fallback&&(!0!==h.unstable_avoidThisFallback||!s)}}if(c){var f=u.updateQueue;if(null===f){var d=new Set;d.add(a),u.updateQueue=d}else f.add(a);if(0===(2&u.mode)){if(u.effectTag|=64,i.effectTag&=-2981,1===i.tag)if(null===i.alternate)i.tag=17;else{var p=so(1073741823,null);p.tag=2,co(i,p)}i.expirationTime=1073741823;break e}o=void 0,i=t;var m=n.pingCache;if(null===m?(m=n.pingCache=new hs,o=new Set,m.set(a,o)):void 0===(o=m.get(a))&&(o=new Set,m.set(a,o)),!o.has(i)){o.add(i);var y=_u.bind(null,n,a,i);a.then(y,y)}u.effectTag|=4096,u.expirationTime=t;break e}u=u.return}while(null!==u);o=Error((X(i.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display."+J(i))}Os!==ks&&(Os=Ts),o=Ja(o,i),u=r;do{switch(u.tag){case 3:a=o,u.effectTag|=4096,u.expirationTime=t,lo(u,fs(u,a,t));break e;case 1:a=o;var g=u.type,v=u.stateNode;if((64&u.effectTag)===gt&&("function"===typeof g.getDerivedStateFromError||null!==v&&"function"===typeof v.componentDidCatch&&(null===Qs||!Qs.has(v)))){u.effectTag|=4096,u.expirationTime=t,lo(u,ds(u,a,t));break e}}u=u.return}while(null!==u)}_s=Eu(_s)}catch(b){t=b;continue}break}}function mu(){var e=ms.current;return ms.current=ga,null===e?ga:e}function yu(e,t){e<Ps&&2<e&&(Ps=e),null!==t&&e<Ms&&2<e&&(Ms=e,Ls=t)}function gu(e){e>Fs&&(Fs=e)}function vu(){for(;null!==_s;)_s=wu(_s)}function bu(){for(;null!==_s&&!Ci();)_s=wu(_s)}function wu(e){var t=eu(e.alternate,e,xs);return e.memoizedProps=e.pendingProps,null===t&&(t=Eu(e)),ys.current=null,t}function Eu(e){_s=e;do{var t=_s.alternate;if(e=_s.return,(2048&_s.effectTag)===gt){e:{var n=t,r=xs,o=(t=_s).pendingProps;switch(t.tag){case 2:case 16:break;case 15:case 0:break;case 1:pi(t.type)&&mi();break;case 3:Fo(),yi(),(r=t.stateNode).pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(null===n||null===n.child)&&Na(t)&&Ya(t),Ba(t);break;case 5:Vo(t),r=Mo(Po.current);var s=t.type;if(null!==n&&null!=t.stateNode)ja(n,t,s,o,r),n.ref!==t.ref&&(t.effectTag|=128);else if(o){var u=Mo(Oo.current);if(Na(t)){s=void 0,n=(o=t).stateNode;var c=o.type,l=o.memoizedProps;switch(n[ir]=o,n[or]=l,c){case"iframe":case"object":case"embed":wn("load",n);break;case"video":case"audio":for(var h=0;h<Ze.length;h++)wn(Ze[h],n);break;case"source":wn("error",n);break;case"img":case"image":case"link":wn("error",n),wn("load",n);break;case"form":wn("reset",n),wn("submit",n);break;case"details":wn("toggle",n);break;case"input":Ne(n,l),wn("invalid",n),qn(r,"onChange");break;case"select":n._wrapperState={wasMultiple:!!l.multiple},wn("invalid",n),qn(r,"onChange");break;case"textarea":Me(n,l),wn("invalid",n),qn(r,"onChange")}for(s in Ln(c,l),h=null,l)l.hasOwnProperty(s)&&(u=l[s],"children"===s?"string"===typeof u?n.textContent!==u&&(h=["children",u]):"number"===typeof u&&n.textContent!==""+u&&(h=["children",""+u]):d.hasOwnProperty(s)&&null!=u&&qn(r,s));switch(c){case"input":Ce(n),_e(n,l,!0);break;case"textarea":Ce(n),Fe(n);break;case"select":case"option":break;default:"function"===typeof l.onClick&&(n.onclick=Vn)}r=h,o.updateQueue=r,null!==r&&Ya(t)}else{l=s,n=o,c=t,h=9===r.nodeType?r:r.ownerDocument,u===qe.html&&(u=Ve(l)),u===qe.html?"script"===l?((l=h.createElement("div")).innerHTML="<script><\/script>",h=l.removeChild(l.firstChild)):"string"===typeof n.is?h=h.createElement(l,{is:n.is}):(h=h.createElement(l),"select"===l&&(l=h,n.multiple?l.multiple=!0:n.size&&(l.size=n.size))):h=h.createElementNS(u,l),(l=h)[ir]=c,l[or]=n,Ua(n=l,t,!1,!1),t.stateNode=n,u=r;var f=Fn(s,o);switch(s){case"iframe":case"object":case"embed":wn("load",n),r=o;break;case"video":case"audio":for(r=0;r<Ze.length;r++)wn(Ze[r],n);r=o;break;case"source":wn("error",n),r=o;break;case"img":case"image":case"link":wn("error",n),wn("load",n),r=o;break;case"form":wn("reset",n),wn("submit",n),r=o;break;case"details":wn("toggle",n),r=o;break;case"input":Ne(n,o),r=ke(n,o),wn("invalid",n),qn(u,"onChange");break;case"option":r=Oe(n,o);break;case"select":n._wrapperState={wasMultiple:!!o.multiple},r=i({},o,{value:void 0}),wn("invalid",n),qn(u,"onChange");break;case"textarea":Me(n,o),r=Pe(n,o),wn("invalid",n),qn(u,"onChange");break;default:r=o}Ln(s,r),c=void 0,l=s,h=n;var p=r;for(c in p)if(p.hasOwnProperty(c)){var m=p[c];"style"===c?Pn(h,m):"dangerouslySetInnerHTML"===c?null!=(m=m?m.__html:void 0)&&je(h,m):"children"===c?"string"===typeof m?("textarea"!==l||""!==m)&&ze(h,m):"number"===typeof m&&ze(h,""+m):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(d.hasOwnProperty(c)?null!=m&&qn(u,c):null!=m&&Se(h,c,m,f))}switch(s){case"input":Ce(n),_e(n,o,!1);break;case"textarea":Ce(n),Fe(n);break;case"option":null!=o.value&&n.setAttribute("value",""+Ee(o.value));break;case"select":r=n,n=o,r.multiple=!!n.multiple,null!=(c=n.value)?Re(r,!!n.multiple,c,!1):null!=n.defaultValue&&Re(r,!!n.multiple,n.defaultValue,!0);break;default:"function"===typeof r.onClick&&(n.onclick=Vn)}Xn(s,o)&&Ya(t)}null!==t.ref&&(t.effectTag|=128)}else if(null===t.stateNode)throw a(Error(166));break;case 6:if(n&&null!=t.stateNode)za(n,t,n.memoizedProps,o);else{if("string"!==typeof o&&null===t.stateNode)throw a(Error(166));s=Mo(Po.current),Mo(Oo.current),Na(t)?(r=t.stateNode,o=t.memoizedProps,r[ir]=t,r.nodeValue!==o&&Ya(t)):(r=t,(o=(9===s.nodeType?s:s.ownerDocument).createTextNode(o))[ir]=t,r.stateNode=o)}break;case 11:break;case 13:if(si(Uo),o=t.memoizedState,(64&t.effectTag)!==gt){t.expirationTime=r;break e}r=null!==o,o=!1,null===n?Na(t):(o=null!==(s=n.memoizedState),r||null===s||null!==(s=n.child.sibling)&&(null!==(c=t.firstEffect)?(t.firstEffect=s,s.nextEffect=c):(t.firstEffect=t.lastEffect=s,s.nextEffect=null),s.effectTag=8)),r&&!o&&0!==(2&t.mode)&&(null===n&&!0!==t.memoizedProps.unstable_avoidThisFallback||0!==(1&Uo.current)?Os===Es&&(Os=Cs):(Os!==Es&&Os!==Cs||(Os=Is),0!==Fs&&null!==As&&(Qu(As,xs),Wu(As,Fs)))),(r||o)&&(t.effectTag|=4);break;case 7:case 8:case 12:break;case 4:Fo(),Ba(t);break;case 10:eo(t);break;case 9:case 14:break;case 17:pi(t.type)&&mi();break;case 19:if(si(Uo),null===(o=t.memoizedState))break;if(s=(64&t.effectTag)!==gt,null===(c=o.rendering)){if(s)$a(o,!1);else if(Os!==Es||null!==n&&(64&n.effectTag)!==gt)for(n=t.child;null!==n;){if(null!==(c=Bo(n))){for(t.effectTag|=64,$a(o,!1),null!==(o=c.updateQueue)&&(t.updateQueue=o,t.effectTag|=4),t.firstEffect=t.lastEffect=null,o=t.child;null!==o;)n=r,(s=o).effectTag&=vt,s.nextEffect=null,s.firstEffect=null,s.lastEffect=null,null===(c=s.alternate)?(s.childExpirationTime=0,s.expirationTime=n,s.child=null,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null):(s.childExpirationTime=c.childExpirationTime,s.expirationTime=c.expirationTime,s.child=c.child,s.memoizedProps=c.memoizedProps,s.memoizedState=c.memoizedState,s.updateQueue=c.updateQueue,n=c.dependencies,s.dependencies=null===n?null:{expirationTime:n.expirationTime,firstContext:n.firstContext,responders:n.responders}),o=o.sibling;ui(Uo,1&Uo.current|2),t=t.child;break e}n=n.sibling}}else{if(!s)if(null!==(n=Bo(c))){if(t.effectTag|=64,s=!0,$a(o,!0),null===o.tail&&"hidden"===o.tailMode){null!==(r=n.updateQueue)&&(t.updateQueue=r,t.effectTag|=4),null!==(t=t.lastEffect=o.lastEffect)&&(t.nextEffect=null);break}}else Vi()>o.tailExpiration&&1<r&&(t.effectTag|=64,s=!0,$a(o,!1),t.expirationTime=t.childExpirationTime=r-1);o.isBackwards?(c.sibling=t.child,t.child=c):(null!==(r=o.last)?r.sibling=c:t.child=c,o.last=c)}if(null!==o.tail){0===o.tailExpiration&&(o.tailExpiration=Vi()+500),r=o.tail,o.rendering=r,o.tail=r.sibling,o.lastEffect=t.lastEffect,r.sibling=null,o=Uo.current,ui(Uo,o=s?1&o|2:1&o),t=r;break e}break;case 20:case 21:break;default:throw a(Error(156),t.tag)}t=null}if(r=_s,1===xs||1!==r.childExpirationTime){for(o=0,s=r.child;null!==s;)(n=s.expirationTime)>o&&(o=n),(c=s.childExpirationTime)>o&&(o=c),s=s.sibling;r.childExpirationTime=o}if(null!==t)return t;null!==e&&(2048&e.effectTag)===gt&&(null===e.firstEffect&&(e.firstEffect=_s.firstEffect),null!==_s.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=_s.firstEffect),e.lastEffect=_s.lastEffect),1<_s.effectTag&&(null!==e.lastEffect?e.lastEffect.nextEffect=_s:e.firstEffect=_s,e.lastEffect=_s))}else{if(null!==(t=Xa(_s)))return t.effectTag&=2047,t;null!==e&&(e.firstEffect=e.lastEffect=null,e.effectTag|=2048)}if(null!==(t=_s.sibling))return t;_s=e}while(null!==_s);return Os===Es&&(Os=ks),null}function Su(e){var t=e.expirationTime;return t>(e=e.childExpirationTime)?t:e}function Tu(e){var t=Ui();return ji(99,Cu.bind(null,e,t)),null}function Cu(e,t){if(ku(),(Ds&(bs|ws))!==gs)throw a(Error(327));var n=e.finishedWork,r=e.finishedExpirationTime;if(null===n)return null;if(e.finishedWork=null,e.finishedExpirationTime=0,n===e.current)throw a(Error(177));e.callbackNode=null,e.callbackExpirationTime=0,e.callbackPriority=90,e.nextKnownPendingLevel=0;var i=Su(n);if(e.firstPendingTime=i,r<=e.lastSuspendedTime?e.firstSuspendedTime=e.lastSuspendedTime=e.nextKnownPendingLevel=0:r<=e.firstSuspendedTime&&(e.firstSuspendedTime=r-1),r<=e.lastPingedTime&&(e.lastPingedTime=0),r<=e.lastExpiredTime&&(e.lastExpiredTime=0),e===As&&(_s=As=null,xs=0),1<n.effectTag?null!==n.lastEffect?(n.lastEffect.nextEffect=n,i=n.firstEffect):i=n:i=n.firstEffect,null!==i){var o=Ds;Ds|=ws,ys.current=null,Yn=bn;var s=zn();if(Qn(s)){if("selectionStart"in s)var u={start:s.selectionStart,end:s.selectionEnd};else e:{var c=(u=(u=s.ownerDocument)&&u.defaultView||window).getSelection&&u.getSelection();if(c&&0!==c.rangeCount){u=c.anchorNode;var l=c.anchorOffset,h=c.focusNode;c=c.focusOffset;try{u.nodeType,h.nodeType}catch(L){u=null;break e}var f=0,d=-1,p=-1,m=0,y=0,g=s,v=null;t:for(;;){for(var b;g!==u||0!==l&&3!==g.nodeType||(d=f+l),g!==h||0!==c&&3!==g.nodeType||(p=f+c),3===g.nodeType&&(f+=g.nodeValue.length),null!==(b=g.firstChild);)v=g,g=b;for(;;){if(g===s)break t;if(v===u&&++m===l&&(d=f),v===h&&++y===c&&(p=f),null!==(b=g.nextSibling))break;v=(g=v).parentNode}g=b}u=-1===d||-1===p?null:{start:d,end:p}}else u=null}u=u||{start:0,end:0}}else u=null;$n={focusedElem:s,selectionRange:u},bn=!1,Bs=i;do{try{Iu()}catch(L){if(null===Bs)throw a(Error(330));Au(Bs,L),Bs=Bs.nextEffect}}while(null!==Bs);Bs=i;do{try{for(s=e,u=t;null!==Bs;){var w=Bs.effectTag;if(16&w&&ze(Bs.stateNode,""),128&w){var E=Bs.alternate;if(null!==E){var S=E.ref;null!==S&&("function"===typeof S?S(null):S.current=null)}}switch(w&(12|vt|bt)){case vt:ss(Bs),Bs.effectTag&=~vt;break;case 6:ss(Bs),Bs.effectTag&=~vt,cs(Bs.alternate,Bs);break;case bt:Bs.effectTag&=~bt;break;case 1028:Bs.effectTag&=~bt,cs(Bs.alternate,Bs);break;case 4:cs(Bs.alternate,Bs);break;case 8:us(s,l=Bs,u),os(l)}Bs=Bs.nextEffect}}catch(L){if(null===Bs)throw a(Error(330));Au(Bs,L),Bs=Bs.nextEffect}}while(null!==Bs);if(S=$n,E=zn(),w=S.focusedElem,u=S.selectionRange,E!==w&&w&&w.ownerDocument&&function e(t,n){return!(!t||!n)&&(t===n||(!t||3!==t.nodeType)&&(n&&3===n.nodeType?e(t,n.parentNode):"contains"in t?t.contains(n):!!t.compareDocumentPosition&&!!(16&t.compareDocumentPosition(n))))}(w.ownerDocument.documentElement,w)){null!==u&&Qn(w)&&(E=u.start,void 0===(S=u.end)&&(S=E),"selectionStart"in w?(w.selectionStart=E,w.selectionEnd=Math.min(S,w.value.length)):(S=(E=w.ownerDocument||document)&&E.defaultView||window).getSelection&&(S=S.getSelection(),l=w.textContent.length,s=Math.min(u.start,l),u=void 0===u.end?s:Math.min(u.end,l),!S.extend&&s>u&&(l=u,u=s,s=l),l=jn(w,s),h=jn(w,u),l&&h&&(1!==S.rangeCount||S.anchorNode!==l.node||S.anchorOffset!==l.offset||S.focusNode!==h.node||S.focusOffset!==h.offset)&&((E=E.createRange()).setStart(l.node,l.offset),S.removeAllRanges(),s>u?(S.addRange(E),S.extend(h.node,h.offset)):(E.setEnd(h.node,h.offset),S.addRange(E))))),E=[];for(S=w;S=S.parentNode;)1===S.nodeType&&E.push({element:S,left:S.scrollLeft,top:S.scrollTop});for("function"===typeof w.focus&&w.focus(),w=0;w<E.length;w++)(S=E[w]).element.scrollLeft=S.left,S.element.scrollTop=S.top}$n=null,bn=!!Yn,Yn=null,e.current=n,Bs=i;do{try{for(w=r;null!==Bs;){var T=Bs.effectTag;if(36&T){var C=Bs.alternate;switch(S=w,(E=Bs).tag){case 0:case 11:case 15:rs(16,32,E);break;case 1:var I=E.stateNode;if(4&E.effectTag)if(null===C)I.componentDidMount();else{var k=E.elementType===E.type?C.memoizedProps:Gi(E.type,C.memoizedProps);I.componentDidUpdate(k,C.memoizedState,I.__reactInternalSnapshotBeforeUpdate)}var N=E.updateQueue;null!==N&&mo(0,N,I);break;case 3:var D=E.updateQueue;if(null!==D){if(s=null,null!==E.child)switch(E.child.tag){case 5:s=E.child.stateNode;break;case 1:s=E.child.stateNode}mo(0,D,s)}break;case 5:var A=E.stateNode;null===C&&4&E.effectTag&&(S=A,Xn(E.type,E.memoizedProps)&&S.focus());break;case 6:case 4:case 12:break;case 13:if(null===E.memoizedState){var _=E.alternate;if(null!==_){var x=_.memoizedState;if(null!==x){var O=x.dehydrated;null!==O&&yt(O)}}}break;case 19:case 17:case 20:case 21:break;default:throw a(Error(163))}}if(128&T){var R=(E=Bs).ref;if(null!==R){var P=E.stateNode;switch(E.tag){case 5:var M=P;break;default:M=P}"function"===typeof R?R(M):R.current=M}}Bs=Bs.nextEffect}}catch(L){if(null===Bs)throw a(Error(330));Au(Bs,L),Bs=Bs.nextEffect}}while(null!==Bs);Bs=null,Pi(),Ds=o}else e.current=n;if(Ws)Ws=!1,Ks=e,Gs=t;else for(Bs=i;null!==Bs;)t=Bs.nextEffect,Bs.nextEffect=null,Bs=t;if(0===(t=e.firstPendingTime)&&(Qs=null),1073741823===t?e===$s?Ys++:(Ys=0,$s=e):Ys=0,"function"===typeof Ou&&Ou(n.stateNode,r),ou(e),js)throw js=!1,e=zs,zs=null,e;return(Ds&vs)!==gs?null:(Wi(),null)}function Iu(){for(;null!==Bs;){var e=Bs.effectTag;(256&e)!==gt&&ns(Bs.alternate,Bs),(512&e)===gt||Ws||(Ws=!0,zi(97,(function(){return ku(),null}))),Bs=Bs.nextEffect}}function ku(){if(90!==Gs){var e=97<Gs?97:Gs;return Gs=90,ji(e,Nu)}}function Nu(){if(null===Ks)return!1;var e=Ks;if(Ks=null,(Ds&(bs|ws))!==gs)throw a(Error(331));var t=Ds;for(Ds|=ws,e=e.current.firstEffect;null!==e;){try{var n=e;if((512&n.effectTag)!==gt)switch(n.tag){case 0:case 11:case 15:rs(128,0,n),rs(0,64,n)}}catch(r){if(null===e)throw a(Error(330));Au(e,r)}n=e.nextEffect,e.nextEffect=null,e=n}return Ds=t,Wi(),!0}function Du(e,t,n){co(e,t=fs(e,t=Ja(n,t),1073741823)),null!==(e=ru(e,1073741823))&&ou(e)}function Au(e,t){if(3===e.tag)Du(e,e,t);else for(var n=e.return;null!==n;){if(3===n.tag){Du(n,e,t);break}if(1===n.tag){var r=n.stateNode;if("function"===typeof n.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Qs||!Qs.has(r))){co(n,e=ds(n,e=Ja(t,e),1073741823)),null!==(n=ru(n,1073741823))&&ou(n);break}}n=n.return}}function _u(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),As===e&&xs===n?Os===Is||Os===Cs&&1073741823===Ps&&Vi()-Vs<Us?du(e,xs):qs=!0:zu(e,n)&&(0!==(t=e.lastPingedTime)&&t<n||(e.lastPingedTime=n,e.finishedExpirationTime===n&&(e.finishedExpirationTime=0,e.finishedWork=null),ou(e)))}function xu(e,t){var n=e.stateNode;null!==n&&n.delete(t),1===(t=1)&&(t=Zs(t=Js(),e,null)),null!==(e=ru(e,t))&&ou(e)}eu=function(e,t,n){var r=t.expirationTime;if(null!==e){var i=t.pendingProps;if(e.memoizedProps!==i||hi.current)_a=!0;else{if(r<n){switch(_a=!1,t.tag){case 3:Va(t),Da();break;case 5:if(qo(t),4&t.mode&&1!==n&&i.hidden)return t.expirationTime=t.childExpirationTime=1,null;break;case 1:pi(t.type)&&bi(t);break;case 4:Lo(t,t.stateNode.containerInfo);break;case 10:Zi(t,t.memoizedProps.value);break;case 13:if(null!==t.memoizedState)return 0!==(r=t.child.childExpirationTime)&&r>=n?Wa(e,t,n):(ui(Uo,1&Uo.current),null!==(t=Ha(e,t,n))?t.sibling:null);ui(Uo,1&Uo.current);break;case 19:if(r=t.childExpirationTime>=n,(64&e.effectTag)!==gt){if(r)return Ga(e,t,n);t.effectTag|=64}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null),ui(Uo,Uo.current),!r)return null}return Ha(e,t,n)}_a=!1}}else _a=!1;switch(t.expirationTime=0,t.tag){case 2:if(r=t.type,null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=vt),e=t.pendingProps,i=di(t,li.current),no(t,n),i=oa(null,t,r,e,i,n),t.effectTag|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof){if(t.tag=1,aa(),pi(r)){var o=!0;bi(t)}else o=!1;t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null;var s=r.getDerivedStateFromProps;"function"===typeof s&&bo(t,r,s,e),i.updater=wo,t.stateNode=i,i._reactInternalFiber=t,Co(t,r,e,n),t=qa(null,t,r,!0,o,n)}else t.tag=0,xa(null,t,i,n),t=t.child;return t;case 16:if(i=t.elementType,null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=vt),e=t.pendingProps,function(e){if(-1===e._status){e._status=0;var t=e._ctor;t=t(),e._result=t,t.then((function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)}),(function(t){0===e._status&&(e._status=2,e._result=t)}))}}(i),1!==i._status)throw i._result;switch(i=i._result,t.type=i,o=t.tag=function(e){if("function"===typeof e)return Lu(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===Q)return 11;if(e===G)return 14}return 2}(i),e=Gi(i,e),o){case 0:t=La(null,t,i,e,n);break;case 1:t=Fa(null,t,i,e,n);break;case 11:t=Oa(null,t,i,e,n);break;case 14:t=Ra(null,t,i,Gi(i.type,e),r,n);break;default:throw a(Error(306),i,"")}return t;case 0:return r=t.type,i=t.pendingProps,La(e,t,r,i=t.elementType===r?i:Gi(r,i),n);case 1:return r=t.type,i=t.pendingProps,Fa(e,t,r,i=t.elementType===r?i:Gi(r,i),n);case 3:if(Va(t),null===(r=t.updateQueue))throw a(Error(282));if(i=null!==(i=t.memoizedState)?i.element:null,po(t,r,t.pendingProps,null,n),(r=t.memoizedState.element)===i)Da(),t=Ha(e,t,n);else{if((i=t.stateNode.hydrate)&&(Ea=tr(t.stateNode.containerInfo.firstChild),wa=t,i=Sa=!0),i)for(n=_o(t,null,r,n),t.child=n;n;)n.effectTag=n.effectTag&~vt|bt,n=n.sibling;else xa(e,t,r,n),Da();t=t.child}return t;case 5:return qo(t),null===e&&Ia(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,s=i.children,Jn(r,i)?s=null:null!==o&&Jn(r,o)&&(t.effectTag|=16),Ma(e,t),4&t.mode&&1!==n&&i.hidden?(t.expirationTime=t.childExpirationTime=1,t=null):(xa(e,t,s,n),t=t.child),t;case 6:return null===e&&Ia(t),null;case 13:return Wa(e,t,n);case 4:return Lo(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Ao(t,null,r,n):xa(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,Oa(e,t,r,i=t.elementType===r?i:Gi(r,i),n);case 7:return xa(e,t,t.pendingProps,n),t.child;case 8:case 12:return xa(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,s=t.memoizedProps,Zi(t,o=i.value),null!==s){var u=s.value;if(0===(o=Hr(u,o)?0:0|("function"===typeof r._calculateChangedBits?r._calculateChangedBits(u,o):1073741823))){if(s.children===i.children&&!hi.current){t=Ha(e,t,n);break e}}else for(null!==(u=t.child)&&(u.return=t);null!==u;){var c=u.dependencies;if(null!==c){s=u.child;for(var l=c.firstContext;null!==l;){if(l.context===r&&0!==(l.observedBits&o)){1===u.tag&&((l=so(n,null)).tag=2,co(u,l)),u.expirationTime<n&&(u.expirationTime=n),null!==(l=u.alternate)&&l.expirationTime<n&&(l.expirationTime=n),to(u.return,n),c.expirationTime<n&&(c.expirationTime=n);break}l=l.next}}else s=10===u.tag&&u.type===t.type?null:u.child;if(null!==s)s.return=u;else for(s=u;null!==s;){if(s===t){s=null;break}if(null!==(u=s.sibling)){u.return=s.return,s=u;break}s=s.return}u=s}}xa(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=(o=t.pendingProps).children,no(t,n),r=r(i=ro(i,o.unstable_observedBits)),t.effectTag|=1,xa(e,t,r,n),t.child;case 14:return o=Gi(i=t.type,t.pendingProps),Ra(e,t,i,o=Gi(i.type,o),r,n);case 15:return Pa(e,t,t.type,t.pendingProps,r,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Gi(r,i),null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=vt),t.tag=1,pi(r)?(e=!0,bi(t)):e=!1,no(t,n),So(t,r,i),Co(t,r,i,n),qa(null,t,r,!0,e,n);case 19:return Ga(e,t,n)}throw a(Error(156),t.tag)};var Ou=null,Ru=null;function Pu(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.effectTag=gt,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childExpirationTime=this.expirationTime=0,this.alternate=null}function Mu(e,t,n,r){return new Pu(e,t,n,r)}function Lu(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Fu(e,t){var n=e.alternate;return null===n?((n=Mu(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.effectTag=gt,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childExpirationTime=e.childExpirationTime,n.expirationTime=e.expirationTime,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{expirationTime:t.expirationTime,firstContext:t.firstContext,responders:t.responders},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function qu(e,t,n,r,i,o){var s=2;if(r=e,"function"===typeof e)Lu(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case q:return Vu(n.children,i,o,t);case z:s=8,i|=7;break;case V:s=8,i|=1;break;case U:return(e=Mu(12,n,t,8|i)).elementType=U,e.type=U,e.expirationTime=o,e;case W:return(e=Mu(13,n,t,i)).type=W,e.elementType=W,e.expirationTime=o,e;case K:return(e=Mu(19,n,t,i)).elementType=K,e.expirationTime=o,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case B:s=10;break e;case j:s=9;break e;case Q:s=11;break e;case G:s=14;break e;case H:s=16,r=null;break e}throw a(Error(130),null==e?e:typeof e,"")}return(t=Mu(s,n,t,i)).elementType=e,t.type=r,t.expirationTime=o,t}function Vu(e,t,n,r){return(e=Mu(7,e,r,t)).expirationTime=n,e}function Uu(e,t,n){return(e=Mu(6,e,null,t)).expirationTime=n,e}function Bu(e,t,n){return(t=Mu(4,null!==e.children?e.children:[],e.key,t)).expirationTime=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function ju(e,t,n){this.tag=t,this.current=null,this.containerInfo=e,this.pingCache=this.pendingChildren=null,this.finishedExpirationTime=0,this.finishedWork=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=this.firstBatch=null,this.callbackPriority=90,this.lastExpiredTime=this.lastPingedTime=this.nextKnownPendingLevel=this.lastSuspendedTime=this.firstSuspendedTime=this.firstPendingTime=0}function zu(e,t){var n=e.firstSuspendedTime;return e=e.lastSuspendedTime,0!==n&&n>=t&&e<=t}function Qu(e,t){var n=e.firstSuspendedTime,r=e.lastSuspendedTime;n<t&&(e.firstSuspendedTime=t),(r>t||0===n)&&(e.lastSuspendedTime=t),t<=e.lastPingedTime&&(e.lastPingedTime=0),t<=e.lastExpiredTime&&(e.lastExpiredTime=0)}function Wu(e,t){t>e.firstPendingTime&&(e.firstPendingTime=t);var n=e.firstSuspendedTime;0!==n&&(t>=n?e.firstSuspendedTime=e.lastSuspendedTime=e.nextKnownPendingLevel=0:t>=e.lastSuspendedTime&&(e.lastSuspendedTime=t+1),t>e.nextKnownPendingLevel&&(e.nextKnownPendingLevel=t))}function Ku(e,t){var n=e.lastExpiredTime;(0===n||n>t)&&(e.lastExpiredTime=t)}function Gu(e,t,n,r,i,o){var s=t.current;e:if(n){t:{if(wt(n=n._reactInternalFiber)!==n||1!==n.tag)throw a(Error(170));var u=n;do{switch(u.tag){case 3:u=u.stateNode.context;break t;case 1:if(pi(u.type)){u=u.stateNode.__reactInternalMemoizedMergedChildContext;break t}}u=u.return}while(null!==u);throw a(Error(171))}if(1===n.tag){var c=n.type;if(pi(c)){n=vi(n,c,u);break e}}n=u}else n=ci;return null===t.context?t.context=n:t.pendingContext=n,t=o,(i=so(r,i)).payload={element:e},null!==(t=void 0===t?null:t)&&(i.callback=t),co(s,i),nu(s,r),r}function Hu(e,t,n,r){var i=t.current,o=Js(),a=go.suspense;return Gu(e,t,n,i=Zs(o,i,a),a,r)}function Yu(e){if(!(e=e.current).child)return null;switch(e.child.tag){case 5:default:return e.child.stateNode}}function $u(e){var t=1073741821-25*(1+((1073741821-Js()+500)/25|0));t<=tu&&--t,this._expirationTime=tu=t,this._root=e,this._callbacks=this._next=null,this._hasChildren=this._didComplete=!1,this._children=null,this._defer=!0}function Xu(){this._callbacks=null,this._didCommit=!1,this._onCommit=this._onCommit.bind(this)}function Ju(e,t,n){var r=new ju(e,t,n=null!=n&&!0===n.hydrate),i=Mu(3,null,null,2===t?7:1===t?3:0);return r.current=i,i.stateNode=r,e[ar]=r.current,n&&0!==t&&function(e){var t=An(e);st.forEach((function(n){_n(n,e,t)})),ut.forEach((function(n){_n(n,e,t)}))}(9===e.nodeType?e:e.ownerDocument),r}function Zu(e,t,n){this._internalRoot=Ju(e,t,n)}function ec(e,t){this._internalRoot=Ju(e,2,t)}function tc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function nc(e,t,n,r,i){var o=n._reactRootContainer;if(o){var a=o._internalRoot;if("function"===typeof i){var s=i;i=function(){var e=Yu(a);s.call(e)}}Hu(t,a,e,i)}else{if(o=n._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new Zu(e,0,t?{hydrate:!0}:void 0)}(n,r),a=o._internalRoot,"function"===typeof i){var u=i;i=function(){var e=Yu(a);u.call(e)}}fu((function(){Hu(t,a,e,i)}))}return Yu(a)}function rc(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!tc(t))throw a(Error(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:F,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)}ee=function(e,t,n){switch(t){case"input":if(Ae(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=lr(r);if(!i)throw a(Error(90));Ie(r),Ae(r,i)}}}break;case"textarea":Le(e,n);break;case"select":null!=(t=n.value)&&Re(e,!!n.multiple,t,!1)}},$u.prototype.render=function(e){if(!this._defer)throw a(Error(250));this._hasChildren=!0,this._children=e;var t=this._root._internalRoot,n=this._expirationTime,r=new Xu;return Gu(e,t,null,n,null,r._onCommit),r},$u.prototype.then=function(e){if(this._didComplete)e();else{var t=this._callbacks;null===t&&(t=this._callbacks=[]),t.push(e)}},$u.prototype.commit=function(){var e=this._root._internalRoot,t=e.firstBatch;if(!this._defer||null===t)throw a(Error(251));if(this._hasChildren){var n=this._expirationTime;if(t!==this){this._hasChildren&&(n=this._expirationTime=t._expirationTime,this.render(this._children));for(var r=null,i=t;i!==this;)r=i,i=i._next;if(null===r)throw a(Error(251));r._next=i._next,this._next=t,e.firstBatch=this}if(this._defer=!1,t=n,(Ds&(bs|ws))!==gs)throw a(Error(253));Ku(e,t),ou(e),Wi(),t=this._next,this._next=null,null!==(t=e.firstBatch=t)&&t._hasChildren&&t.render(t._children)}else this._next=null,this._defer=!1},$u.prototype._onComplete=function(){if(!this._didComplete){this._didComplete=!0;var e=this._callbacks;if(null!==e)for(var t=0;t<e.length;t++)(0,e[t])()}},Xu.prototype.then=function(e){if(this._didCommit)e();else{var t=this._callbacks;null===t&&(t=this._callbacks=[]),t.push(e)}},Xu.prototype._onCommit=function(){if(!this._didCommit){this._didCommit=!0;var e=this._callbacks;if(null!==e)for(var t=0;t<e.length;t++){var n=e[t];if("function"!==typeof n)throw a(Error(191),n);n()}}},ec.prototype.render=Zu.prototype.render=function(e,t){var n=this._internalRoot,r=new Xu;return null!==(t=void 0===t?null:t)&&r.then(t),Hu(e,n,null,r._onCommit),r},ec.prototype.unmount=Zu.prototype.unmount=function(e){var t=this._internalRoot,n=new Xu;return null!==(e=void 0===e?null:e)&&n.then(e),Hu(null,t,null,n._onCommit),n},ec.prototype.createBatch=function(){var e=new $u(this),t=e._expirationTime,n=this._internalRoot,r=n.firstBatch;if(null===r)n.firstBatch=e,e._next=null;else{for(n=null;null!==r&&r._expirationTime>=t;)n=r,r=r._next;e._next=r,null!==n&&(n._next=e)}return e},ae=lu,se=hu,ue=uu,ce=function(e,t){var n=Ds;Ds|=2;try{return e(t)}finally{(Ds=n)===gs&&Wi()}};var ic={createPortal:rc,findDOMNode:function(e){if(null==e)e=null;else if(1!==e.nodeType){var t=e._reactInternalFiber;if(void 0===t){if("function"===typeof e.render)throw a(Error(188));throw a(Error(268),Object.keys(e))}e=null===(e=St(t))?null:e.stateNode}return e},hydrate:function(e,t,n){if(!tc(t))throw a(Error(200));return nc(null,e,t,!0,n)},render:function(e,t,n){if(!tc(t))throw a(Error(200));return nc(null,e,t,!1,n)},unstable_renderSubtreeIntoContainer:function(e,t,n,r){if(!tc(n))throw a(Error(200));if(null==e||void 0===e._reactInternalFiber)throw a(Error(38));return nc(e,t,n,!1,r)},unmountComponentAtNode:function(e){if(!tc(e))throw a(Error(40));return!!e._reactRootContainer&&(fu((function(){nc(null,null,e,!1,(function(){e._reactRootContainer=null}))})),!0)},unstable_createPortal:function(){return rc.apply(void 0,arguments)},unstable_batchedUpdates:lu,unstable_interactiveUpdates:function(e,t,n,r){return uu(),hu(e,t,n,r)},unstable_discreteUpdates:hu,unstable_flushDiscreteUpdates:uu,flushSync:function(e,t){if((Ds&(bs|ws))!==gs)throw a(Error(187));var n=Ds;Ds|=1;try{return ji(99,e.bind(null,t))}finally{Ds=n,Wi()}},unstable_createRoot:function(e,t){if(!tc(e))throw a(Error(299),"unstable_createRoot");return new ec(e,t)},unstable_createSyncRoot:function(e,t){if(!tc(e))throw a(Error(299),"unstable_createRoot");return new Zu(e,1,t)},unstable_flushControlled:function(e){var t=Ds;Ds|=1;try{ji(99,e)}finally{(Ds=t)===gs&&Wi()}},__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{Events:[ur,cr,lr,x.injectEventPluginsByName,f,At,function(e){N(e,Dt)},ie,oe,In,_,ku,{current:!1}]}};!function(e){var t=e.findFiberByHostInstance;(function(e){if("undefined"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)return!1;var t=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(t.isDisabled||!t.supportsFiber)return!0;try{var n=t.inject(e);Ou=function(e){try{t.onCommitFiberRoot(n,e,void 0,64===(64&e.current.effectTag))}catch(r){}},Ru=function(e){try{t.onCommitFiberUnmount(n,e)}catch(r){}}}catch(r){}})(i({},e,{overrideHookState:null,overrideProps:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:R.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=St(e))?null:e.stateNode},findFiberByHostInstance:function(e){return t?t(e):null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null}))}({findFiberByHostInstance:sr,bundleType:0,version:"16.10.2",rendererPackageName:"react-dom"});var oc={default:ic},ac=oc&&ic||oc;e.exports=ac.default||ac},function(e,t,n){"use strict";e.exports=n(22)},function(e,t,n){"use strict";var r,i,o,a,s;if(Object.defineProperty(t,"__esModule",{value:!0}),"undefined"===typeof window||"function"!==typeof MessageChannel){var u=null,c=null,l=function e(){if(null!==u)try{var n=t.unstable_now();u(!0,n),u=null}catch(r){throw setTimeout(e,0),r}},h=Date.now();t.unstable_now=function(){return Date.now()-h},r=function(e){null!==u?setTimeout(r,0,e):(u=e,setTimeout(l,0))},i=function(e,t){c=setTimeout(e,t)},o=function(){clearTimeout(c)},a=function(){return!1},s=t.unstable_forceFrameRate=function(){}}else{var f=window.performance,d=window.Date,p=window.setTimeout,m=window.clearTimeout,y=window.requestAnimationFrame,g=window.cancelAnimationFrame;if("undefined"!==typeof console&&("function"!==typeof y&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"),"function"!==typeof g&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills")),"object"===typeof f&&"function"===typeof f.now)t.unstable_now=function(){return f.now()};else{var v=d.now();t.unstable_now=function(){return d.now()-v}}var b=!1,w=null,E=-1,S=5,T=0;a=function(){return t.unstable_now()>=T},s=function(){},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing framerates higher than 125 fps is not unsupported"):S=0<e?Math.floor(1e3/e):33.33};var C=new MessageChannel,I=C.port2;C.port1.onmessage=function(){if(null!==w){var e=t.unstable_now();T=e+S;try{w(!0,e)?I.postMessage(null):(b=!1,w=null)}catch(n){throw I.postMessage(null),n}}else b=!1},r=function(e){w=e,b||(b=!0,I.postMessage(null))},i=function(e,n){E=p((function(){e(t.unstable_now())}),n)},o=function(){m(E),E=-1}}function k(e,t){var n=e.length;e.push(t);e:for(;;){var r=Math.floor((n-1)/2),i=e[r];if(!(void 0!==i&&0<A(i,t)))break e;e[r]=t,e[n]=i,n=r}}function N(e){return void 0===(e=e[0])?null:e}function D(e){var t=e[0];if(void 0!==t){var n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length;r<i;){var o=2*(r+1)-1,a=e[o],s=o+1,u=e[s];if(void 0!==a&&0>A(a,n))void 0!==u&&0>A(u,a)?(e[r]=u,e[s]=n,r=s):(e[r]=a,e[o]=n,r=o);else{if(!(void 0!==u&&0>A(u,n)))break e;e[r]=u,e[s]=n,r=s}}}return t}return null}function A(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}var _=[],x=[],O=1,R=null,P=3,M=!1,L=!1,F=!1;function q(e){for(var t=N(x);null!==t;){if(null===t.callback)D(x);else{if(!(t.startTime<=e))break;D(x),t.sortIndex=t.expirationTime,k(_,t)}t=N(x)}}function V(e){if(F=!1,q(e),!L)if(null!==N(_))L=!0,r(U);else{var t=N(x);null!==t&&i(V,t.startTime-e)}}function U(e,n){L=!1,F&&(F=!1,o()),M=!0;var r=P;try{for(q(n),R=N(_);null!==R&&(!(R.expirationTime>n)||e&&!a());){var s=R.callback;if(null!==s){R.callback=null,P=R.priorityLevel;var u=s(R.expirationTime<=n);n=t.unstable_now(),"function"===typeof u?R.callback=u:R===N(_)&&D(_),q(n)}else D(_);R=N(_)}if(null!==R)var c=!0;else{var l=N(x);null!==l&&i(V,l.startTime-n),c=!1}return c}finally{R=null,P=r,M=!1}}function B(e){switch(e){case 1:return-1;case 2:return 250;case 5:return 1073741823;case 4:return 1e4;default:return 5e3}}var j=s;t.unstable_ImmediatePriority=1,t.unstable_UserBlockingPriority=2,t.unstable_NormalPriority=3,t.unstable_IdlePriority=5,t.unstable_LowPriority=4,t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=P;P=e;try{return t()}finally{P=n}},t.unstable_next=function(e){switch(P){case 1:case 2:case 3:var t=3;break;default:t=P}var n=P;P=t;try{return e()}finally{P=n}},t.unstable_scheduleCallback=function(e,n,a){var s=t.unstable_now();if("object"===typeof a&&null!==a){var u=a.delay;u="number"===typeof u&&0<u?s+u:s,a="number"===typeof a.timeout?a.timeout:B(e)}else a=B(e),u=s;return e={id:O++,callback:n,priorityLevel:e,startTime:u,expirationTime:a=u+a,sortIndex:-1},u>s?(e.sortIndex=u,k(x,e),null===N(_)&&e===N(x)&&(F?o():F=!0,i(V,u-s))):(e.sortIndex=a,k(_,e),L||M||(L=!0,r(U))),e},t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_wrapCallback=function(e){var t=P;return function(){var n=P;P=t;try{return e.apply(this,arguments)}finally{P=n}}},t.unstable_getCurrentPriorityLevel=function(){return P},t.unstable_shouldYield=function(){var e=t.unstable_now();q(e);var n=N(_);return n!==R&&null!==R&&null!==n&&null!==n.callback&&n.startTime<=e&&n.expirationTime<R.expirationTime||a()},t.unstable_requestPaint=j,t.unstable_continueExecution=function(){L||M||(L=!0,r(U))},t.unstable_pauseExecution=function(){},t.unstable_getFirstCallbackNode=function(){return N(_)},t.unstable_Profiling=null},,function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var r=n(11),i={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},o=function(e,t){if(!e)throw a(t)},a=function(e){return new Error("Firebase Database ("+i.SDK_VERSION+") INTERNAL ASSERT FAILED: "+e)},s=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},u={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var o=e[i],a=i+1<e.length,s=a?e[i+1]:0,u=i+2<e.length,c=u?e[i+2]:0,l=o>>2,h=(3&o)<<4|s>>4,f=(15&s)<<2|c>>6,d=63&c;u||(d=64,a||(f=64)),r.push(n[l],n[h],n[f],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(s(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var a=((7&i)<<18|(63&(o=e[n++]))<<12|(63&(s=e[n++]))<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(a>>10)),t[r++]=String.fromCharCode(56320+(1023&a))}else{o=e[n++];var s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var o=n[e.charAt(i++)],a=i<e.length?n[e.charAt(i)]:0,s=++i<e.length?n[e.charAt(i)]:64,u=++i<e.length?n[e.charAt(i)]:64;if(++i,null==o||null==a||null==s||null==u)throw Error();var c=o<<2|a>>4;if(r.push(c),64!==s){var l=a<<4&240|s>>2;if(r.push(l),64!==u){var h=s<<6&192|u;r.push(h)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},c=function(e){try{return u.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function l(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&(e[n]=l(e[n],t[n]));return e}var h=function(){function e(){var e=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(t,n){e.resolve=t,e.reject=n}))}return e.prototype.wrapCallback=function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}},e}();function f(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}var d="FirebaseError",p=function(e){function t(n,r){var i=e.call(this,r)||this;return i.code=n,i.name=d,Object.setPrototypeOf(i,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(i,m.prototype.create),i}return r.__extends(t,e),t}(Error),m=function(){function e(e,t,n){this.service=e,this.serviceName=t,this.errors=n}return e.prototype.create=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=t[0]||{},i=this.service+"/"+e,o=this.errors[e],a=o?y(o,r):"Error",s=this.serviceName+": "+a+" ("+i+").",u=new p(i,s),c=0,l=Object.keys(r);c<l.length;c++){var h=l[c];"_"!==h.slice(-1)&&(h in u&&console.warn('Overwriting FirebaseError base field "'+h+'" can cause unexpected behavior.'),u[h]=r[h])}return u},e}();function y(e,t){return e.replace(g,(function(e,n){var r=t[n];return null!=r?r.toString():"<"+n+"?>"}))}var g=/\{\$([^}]+)}/g;function v(e){return JSON.parse(e)}var b=function(e){var t={},n={},r={},i="";try{var o=e.split(".");t=v(c(o[0])||""),n=v(c(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch(a){}return{header:t,claims:n,data:r,signature:i}};var w=function(){function e(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}return e.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},e.prototype.compress_=function(e,t){t||(t=0);var n=this.W_;if("string"===typeof e)for(var r=0;r<16;r++)n[r]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(r=0;r<16;r++)n[r]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(r=16;r<80;r++){var i=n[r-3]^n[r-8]^n[r-14]^n[r-16];n[r]=4294967295&(i<<1|i>>>31)}var o,a,s=this.chain_[0],u=this.chain_[1],c=this.chain_[2],l=this.chain_[3],h=this.chain_[4];for(r=0;r<80;r++){r<40?r<20?(o=l^u&(c^l),a=1518500249):(o=u^c^l,a=1859775393):r<60?(o=u&c|l&(u|c),a=2400959708):(o=u^c^l,a=3395469782);i=(s<<5|s>>>27)+o+h+a+n[r]&4294967295;h=l,l=c,c=4294967295&(u<<30|u>>>2),u=s,s=i}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+u&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+h&4294967295},e.prototype.update=function(e,t){if(null!=e){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<t;){if(0===o)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"===typeof e){for(;r<t;)if(i[o]=e.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<t;)if(i[o]=e[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=t}},e.prototype.digest=function(){var e=[],t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&t,t/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)e[r]=this.chain_[n]>>i&255,++r;return e},e}();var E=function(){function e(e,t){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((function(){e(n)})).catch((function(e){n.error(e)}))}return e.prototype.next=function(e){this.forEachObserver((function(t){t.next(e)}))},e.prototype.error=function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)},e.prototype.complete=function(){this.forEachObserver((function(e){e.complete()})),this.close()},e.prototype.subscribe=function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!==typeof e||null===e)return!1;for(var n=0,r=t;n<r.length;n++){var i=r[n];if(i in e&&"function"===typeof e[i])return!0}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=S),void 0===r.error&&(r.error=S),void 0===r.complete&&(r.complete=S);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}})),this.observers.push(r),o},e.prototype.unsubscribeOne=function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},e.prototype.forEachObserver=function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)},e.prototype.sendOne=function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(r){"undefined"!==typeof console&&console.error&&console.error(r)}}))},e.prototype.close=function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))},e}();function S(){}function T(e,t,n){var r="";switch(t){case 1:r=n?"first":"First";break;case 2:r=n?"second":"Second";break;case 3:r=n?"third":"Third";break;case 4:r=n?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}var i=e+" failed: ";return i+=r+" argument "}t.CONSTANTS=i,t.Deferred=h,t.ErrorFactory=m,t.FirebaseError=p,t.Sha1=w,t.assert=o,t.assertionError=a,t.async=function(e,t){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];Promise.resolve(!0).then((function(){e.apply(void 0,n)})).catch((function(e){t&&t(e)}))}},t.base64=u,t.base64Decode=c,t.base64Encode=function(e){var t=s(e);return u.encodeByteArray(t,!0)},t.contains=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.createSubscribe=function(e,t){var n=new E(e,t);return n.subscribe.bind(n)},t.decode=b,t.deepCopy=function(e){return l(void 0,e)},t.deepExtend=l,t.errorPrefix=T,t.getUA=f,t.isAdmin=function(e){var t=b(e).claims;return"object"===typeof t&&!0===t.admin},t.isBrowser=function(){return"object"===typeof self&&self.self===self},t.isEmpty=function(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0},t.isMobileCordova=function(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(f())},t.isNode=function(){try{return"[object process]"===Object.prototype.toString.call(e.process)}catch(t){return!1}},t.isNodeSdk=function(){return!0===i.NODE_CLIENT||!0===i.NODE_ADMIN},t.isReactNative=function(){return"object"===typeof navigator&&"ReactNative"===navigator.product},t.isValidFormat=function(e){var t=b(e).claims;return!!t&&"object"===typeof t&&t.hasOwnProperty("iat")},t.isValidTimestamp=function(e){var t=b(e).claims,n=Math.floor((new Date).getTime()/1e3),r=0,i=0;return"object"===typeof t&&(t.hasOwnProperty("nbf")?r=t.nbf:t.hasOwnProperty("iat")&&(r=t.iat),i=t.hasOwnProperty("exp")?t.exp:r+86400),!!n&&!!r&&!!i&&n>=r&&n<=i},t.issuedAtTime=function(e){var t=b(e).claims;return"object"===typeof t&&t.hasOwnProperty("iat")?t.iat:null},t.jsonEval=v,t.map=function(e,t,n){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r},t.querystring=function(e){for(var t=[],n=function(e,n){Array.isArray(n)?n.forEach((function(n){t.push(encodeURIComponent(e)+"="+encodeURIComponent(n))})):t.push(encodeURIComponent(e)+"="+encodeURIComponent(n))},r=0,i=Object.entries(e);r<i.length;r++){var o=i[r];n(o[0],o[1])}return t.length?"&"+t.join("&"):""},t.querystringDecode=function(e){var t={};return e.replace(/^\?/,"").split("&").forEach((function(e){if(e){var n=e.split("=");t[n[0]]=n[1]}})),t},t.safeGet=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0},t.stringLength=function(e){for(var t=0,n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t},t.stringToByteArray=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);if(i>=55296&&i<=56319){var a=i-55296;o(++r<e.length,"Surrogate pair missing trail surrogate."),i=65536+(a<<10)+(e.charCodeAt(r)-56320)}i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):i<65536?(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},t.stringify=function(e){return JSON.stringify(e)},t.validateArgCount=function(e,t,n,r){var i;if(r<t?i="at least "+t:r>n&&(i=0===n?"none":"no more than "+n),i)throw new Error(e+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")},t.validateCallback=function(e,t,n,r){if((!r||n)&&"function"!==typeof n)throw new Error(T(e,t,r)+"must be a valid function.")},t.validateContextObject=function(e,t,n,r){if((!r||n)&&("object"!==typeof n||null===n))throw new Error(T(e,t,r)+"must be a valid context object.")},t.validateNamespace=function(e,t,n,r){if((!r||n)&&"string"!==typeof n)throw new Error(T(e,t,r)+"must be a valid firebase namespace.")}}).call(this,n(12))},function(e,t,n){"use strict";function r(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}n.r(t),n.d(t,"LogLevel",(function(){return i})),n.d(t,"Logger",(function(){return u})),n.d(t,"setLogLevel",(function(){return c}));var i,o=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(i||(i={}));var a=i.INFO,s=function(e,t){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];if(!(t<e.logLevel)){var a=(new Date).toISOString();switch(t){case i.DEBUG:case i.VERBOSE:console.log.apply(console,r(["["+a+"]  "+e.name+":"],n));break;case i.INFO:console.info.apply(console,r(["["+a+"]  "+e.name+":"],n));break;case i.WARN:console.warn.apply(console,r(["["+a+"]  "+e.name+":"],n));break;case i.ERROR:console.error.apply(console,r(["["+a+"]  "+e.name+":"],n));break;default:throw new Error("Attempted to log a message with an invalid logType (value: "+t+")")}}},u=function(){function e(e){this.name=e,this._logLevel=a,this._logHandler=s,o.push(this)}return Object.defineProperty(e.prototype,"logLevel",{get:function(){return this._logLevel},set:function(e){if(!(e in i))throw new TypeError("Invalid value assigned to `logLevel`");this._logLevel=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"logHandler",{get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e},enumerable:!0,configurable:!0}),e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logHandler.apply(this,r([this,i.DEBUG],e))},e.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logHandler.apply(this,r([this,i.VERBOSE],e))},e.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logHandler.apply(this,r([this,i.INFO],e))},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logHandler.apply(this,r([this,i.WARN],e))},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logHandler.apply(this,r([this,i.ERROR],e))},e}();function c(e){o.forEach((function(t){t.logLevel=e}))}},function(e,t,n){(function(e){!function(t){"use strict";try{(function(){t=t&&t.hasOwnProperty("default")?t.default:t;var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function r(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var i,o,a=function(){return(a=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function s(e,t,n,r){return new(n=n||Promise)((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){e.done?i(e.value):new n((function(t){t(e.value)})).then(a,s)}u((r=r.apply(e,t||[])).next())}))}function u(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=0<(i=a.trys).length&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(s){o=[6,s],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}function c(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}function l(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}function h(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(t<e.logLevel)){var o=(new Date).toISOString();switch(t){case i.DEBUG:case i.VERBOSE:console.log.apply(console,l(["["+o+"]  "+e.name+":"],n));break;case i.INFO:console.info.apply(console,l(["["+o+"]  "+e.name+":"],n));break;case i.WARN:console.warn.apply(console,l(["["+o+"]  "+e.name+":"],n));break;case i.ERROR:console.error.apply(console,l(["["+o+"]  "+e.name+":"],n));break;default:throw new Error("Attempted to log a message with an invalid logType (value: "+t+")")}}}(o=i=i||{})[o.DEBUG=0]="DEBUG",o[o.VERBOSE=1]="VERBOSE",o[o.INFO=2]="INFO",o[o.WARN=3]="WARN",o[o.ERROR=4]="ERROR",o[o.SILENT=5]="SILENT";var f=i.INFO,d=(Object.defineProperty(p.prototype,"logLevel",{get:function(){return this._logLevel},set:function(e){if(!(e in i))throw new TypeError("Invalid value assigned to `logLevel`");this._logLevel=e},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"logHandler",{get:function(){return this._logHandler},set:function(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e},enumerable:!0,configurable:!0}),p.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logHandler.apply(this,l([this,i.DEBUG],e))},p.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logHandler.apply(this,l([this,i.VERBOSE],e))},p.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logHandler.apply(this,l([this,i.INFO],e))},p.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logHandler.apply(this,l([this,i.WARN],e))},p.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logHandler.apply(this,l([this,i.ERROR],e))},p);function p(e){this.name=e,this._logLevel=f,this._logHandler=h}function m(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}var y,g=(r(v,y=Error),v);function v(e,t){var n=y.call(this,t)||this;return n.code=e,n.name="FirebaseError",Object.setPrototypeOf(n,v.prototype),Error.captureStackTrace&&Error.captureStackTrace(n,b.prototype.create),n}var b=(w.prototype.create=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=t[0]||{},i=this.service+"/"+e,o=this.errors[e],a=o?function(e,t){return e.replace(S,(function(e,n){var r=t[n];return null!=r?r.toString():"<"+n+"?>"}))}(o,r):"Error",s=this.serviceName+": "+a+" ("+i+").",u=new g(i,s),c=0,l=Object.keys(r);c<l.length;c++){var h=l[c];"_"!==h.slice(-1)&&(h in u&&console.warn('Overwriting FirebaseError base field "'+h+'" can cause unexpected behavior.'),u[h]=r[h])}return u},w);function w(e,t,n){this.service=e,this.serviceName=t,this.errors=n}var E,S=/\{\$([^}]+)}/g,T="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof e?e:"undefined"!=typeof self?self:{},C=C||{},I=T;function k(e){return"string"==typeof e}function N(e){return"number"==typeof e}function D(e,t){e=e.split("."),t=t||I;for(var n=0;n<e.length;n++)if(null==(t=t[e[n]]))return null;return t}function A(){}function _(e){var t=typeof e;if("object"==t){if(!e)return"null";if(e instanceof Array)return"array";if(e instanceof Object)return t;var n=Object.prototype.toString.call(e);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof e.length&&void 0!==e.splice&&void 0!==e.propertyIsEnumerable&&!e.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||void 0!==e.call&&void 0!==e.propertyIsEnumerable&&!e.propertyIsEnumerable("call"))return"function"}else if("function"==t&&void 0===e.call)return"object";return t}function x(e){return"array"==_(e)}function O(e){var t=_(e);return"array"==t||"object"==t&&"number"==typeof e.length}function R(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var P="closure_uid_"+(1e9*Math.random()>>>0),M=0;function L(e,t,n){return e.call.apply(e.bind,arguments)}function F(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function q(e,t,n){return(q=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?L:F).apply(null,arguments)}function V(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}var U=Date.now||function(){return+new Date};function B(e,t){function n(){}n.prototype=t.prototype,e.N=t.prototype,e.prototype=new n,(e.prototype.constructor=e).yb=function(e,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return t.prototype[n].apply(e,i)}}function j(){this.j=this.j,this.i=this.i}j.prototype.j=!1,j.prototype.la=function(){!this.j&&(this.j=!0,this.G(),0)&&(this[P]||(this[P]=++M))},j.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var z=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if(k(e))return k(t)&&1==t.length?e.indexOf(t,0):-1;for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},Q=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,i=k(e)?e.split(""):e,o=0;o<r;o++)o in i&&t.call(n,i[o],o,e)};function W(e){return Array.prototype.concat.apply([],arguments)}function K(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function G(e){return/^[\s\xa0]*$/.test(e)}var H,Y=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function $(e,t){return-1!=e.indexOf(t)}function X(e,t){return e<t?-1:t<e?1:0}e:{var J=I.navigator;if(J){var Z=J.userAgent;if(Z){H=Z;break e}}H=""}function ee(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function te(e){var t,n={};for(t in e)n[t]=e[t];return n}var ne="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function re(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var o=0;o<ne.length;o++)n=ne[o],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function ie(e){return ie[" "](e),e}ie[" "]=A;var oe,ae,se=$(H,"Opera"),ue=$(H,"Trident")||$(H,"MSIE"),ce=$(H,"Edge"),le=ce||ue,he=$(H,"Gecko")&&!($(H.toLowerCase(),"webkit")&&!$(H,"Edge"))&&!($(H,"Trident")||$(H,"MSIE"))&&!$(H,"Edge"),fe=$(H.toLowerCase(),"webkit")&&!$(H,"Edge");function de(){var e=I.document;return e?e.documentMode:void 0}e:{var pe="",me=(ae=H,he?/rv:([^\);]+)(\)|;)/.exec(ae):ce?/Edge\/([\d\.]+)/.exec(ae):ue?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(ae):fe?/WebKit\/(\S+)/.exec(ae):se?/(?:Version)[ \/]?(\S+)/.exec(ae):void 0);if(me&&(pe=me?me[1]:""),ue){var ye=de();if(null!=ye&&ye>parseFloat(pe)){oe=String(ye);break e}}oe=pe}var ge,ve={};function be(e){return function(t,n){var r=ve;return Object.prototype.hasOwnProperty.call(r,t)?r[t]:r[t]=function(){for(var t=0,n=Y(String(oe)).split("."),r=Y(String(e)).split("."),i=Math.max(n.length,r.length),o=0;0==t&&o<i;o++){var a=n[o]||"",s=r[o]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==a[0].length&&0==s[0].length)break;t=X(0==a[1].length?0:parseInt(a[1],10),0==s[1].length?0:parseInt(s[1],10))||X(0==a[2].length,0==s[2].length)||X(a[2],s[2]),a=a[3],s=s[3]}while(0==t)}return 0<=t}()}(e)}var we=I.document;ge=we&&ue?de()||("CSS1Compat"==we.compatMode?parseInt(oe,10):5):void 0;var Ee=!ue||9<=Number(ge),Se=ue&&!be("9"),Te=function(){if(!I.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{I.addEventListener("test",A,t),I.removeEventListener("test",A,t)}catch(e){}return e}();function Ce(e,t){this.type=e,this.a=this.target=t,this.Ja=!0}function Ie(e,t){if(Ce.call(this,e?e.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.a=t,t=e.relatedTarget){if(he){e:{try{ie(t.nodeName);var i=!0;break e}catch(e){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType=k(e.pointerType)?e.pointerType:ke[e.pointerType]||"",(this.c=e).defaultPrevented&&this.b()}}Ce.prototype.b=function(){this.Ja=!1},B(Ie,Ce);var ke={2:"touch",3:"pen",4:"mouse"};Ie.prototype.b=function(){Ie.N.b.call(this);var e=this.c;if(e.preventDefault)e.preventDefault();else if(e.returnValue=!1,Se)try{(e.ctrlKey||112<=e.keyCode&&e.keyCode<=123)&&(e.keyCode=-1)}catch(e){}};var Ne="closure_listenable_"+(1e6*Math.random()|0),De=0;function Ae(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.da=i,this.key=++De,this.X=this.Z=!1}function _e(e){e.X=!0,e.listener=null,e.proxy=null,e.src=null,e.da=null}function xe(e){this.src=e,this.a={},this.b=0}function Oe(e,t){var n=t.type;if(n in e.a){var r,i=e.a[n],o=z(i,t);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(_e(t),0==e.a[n].length&&(delete e.a[n],e.b--))}}function Re(e,t,n,r){for(var i=0;i<e.length;++i){var o=e[i];if(!o.X&&o.listener==t&&o.capture==!!n&&o.da==r)return i}return-1}xe.prototype.add=function(e,t,n,r,i){var o=e.toString();(e=this.a[o])||(e=this.a[o]=[],this.b++);var a=Re(e,t,r,i);return-1<a?(t=e[a],n||(t.Z=!1)):((t=new Ae(t,this.src,o,!!r,i)).Z=n,e.push(t)),t};var Pe="closure_lm_"+(1e6*Math.random()|0),Me={};function Le(e,t,n,r,i){if(r&&r.once)return function e(t,n,r,i,o){if(x(n)){for(var a=0;a<n.length;a++)e(t,n[a],r,i,o);return null}return r=Qe(r),t&&t[Ne]?t.Ba(n,r,R(i)?!!i.capture:!!i,o):Fe(t,n,r,!0,i,o)}(e,t,n,r,i);if(x(t)){for(var o=0;o<t.length;o++)Le(e,t[o],n,r,i);return null}return n=Qe(n),e&&e[Ne]?e.Aa(t,n,R(r)?!!r.capture:!!r,i):Fe(e,t,n,!1,r,i)}function Fe(e,t,n,r,i,o){if(!t)throw Error("Invalid event type");var a=R(i)?!!i.capture:!!i;if(a&&!Ee)return null;var s=je(e);if(s||(e[Pe]=s=new xe(e)),(n=s.add(t,n,r,a,o)).proxy)return n;if(r=function(){var e=Be,t=Ee?function(n){return e.call(t.src,t.listener,n)}:function(n){if(!(n=e.call(t.src,t.listener,n)))return n};return t}(),(n.proxy=r).src=e,r.listener=n,e.addEventListener)Te||(i=a),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(Ve(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function qe(e){if(!N(e)&&e&&!e.X){var t=e.src;if(t&&t[Ne])Oe(t.c,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Ve(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=je(t))?(Oe(n,e),0==n.b&&(n.src=null,t[Pe]=null)):_e(e)}}}function Ve(e){return e in Me?Me[e]:Me[e]="on"+e}function Ue(e,t){var n=e.listener,r=e.da||e.src;return e.Z&&qe(e),n.call(r,t)}function Be(e,t){return!!e.X||Ue(e,Ee?new Ie(t,this):t=new Ie(t||D("window.event"),this))}function je(e){return(e=e[Pe])instanceof xe?e:null}var ze="__closure_events_fn_"+(1e9*Math.random()>>>0);function Qe(e){return"function"==_(e)?e:(e[ze]||(e[ze]=function(t){return e.handleEvent(t)}),e[ze])}function We(){j.call(this),this.c=new xe(this),(this.J=this).B=null}function Ke(e,t,n,r){if(!(t=e.c.a[String(t)]))return!0;t=t.concat();for(var i=!0,o=0;o<t.length;++o){var a=t[o];if(a&&!a.X&&a.capture==n){var s=a.listener,u=a.da||a.src;a.Z&&Oe(e.c,a),i=!1!==s.call(u,r)&&i}}return i&&0!=r.Ja}B(We,j),We.prototype[Ne]=!0,(E=We.prototype).addEventListener=function(e,t,n,r){Le(this,e,t,n,r)},E.removeEventListener=function(e,t,n,r){!function e(t,n,r,i,o){if(x(n))for(var a=0;a<n.length;a++)e(t,n[a],r,i,o);else i=R(i)?!!i.capture:!!i,r=Qe(r),t&&t[Ne]?(t=t.c,(n=String(n).toString())in t.a&&-1<(r=Re(a=t.a[n],r,i,o))&&(_e(a[r]),Array.prototype.splice.call(a,r,1),0==a.length&&(delete t.a[n],t.b--))):(t=t&&je(t))&&(n=t.a[n.toString()],t=-1,n&&(t=Re(n,r,i,o)),(r=-1<t?n[t]:null)&&qe(r))}(this,e,t,n,r)},E.dispatchEvent=function(e){var t,n=this.B;if(n)for(t=[];n;n=n.B)t.push(n);n=this.J;var r=e.type||e;if(k(e))e=new Ce(e,n);else if(e instanceof Ce)e.target=e.target||n;else{var i=e;re(e=new Ce(r,n),i)}if(i=!0,t)for(var o=t.length-1;0<=o;o--){var a=e.a=t[o];i=Ke(a,r,!0,e)&&i}if(i=Ke(a=e.a=n,r,!0,e)&&i,i=Ke(a,r,!1,e)&&i,t)for(o=0;o<t.length;o++)i=Ke(a=e.a=t[o],r,!1,e)&&i;return i},E.G=function(){if(We.N.G.call(this),this.c){var e,t=this.c;for(e in t.a){for(var n=t.a[e],r=0;r<n.length;r++)_e(n[r]);delete t.a[e],t.b--}}this.B=null},E.Aa=function(e,t,n,r){return this.c.add(String(e),t,!1,n,r)},E.Ba=function(e,t,n,r){return this.c.add(String(e),t,!0,n,r)};var Ge=I.JSON.stringify;function He(e,t){this.c=e,this.f=t,this.b=0,this.a=null}function Ye(){this.b=this.a=null}He.prototype.get=function(){if(0<this.b){this.b--;var e=this.a;this.a=e.next,e.next=null}else e=this.c();return e};var $e,Xe=new He((function(){return new Je}),(function(e){e.reset()}));function Je(){this.next=this.b=this.a=null}function Ze(e){I.setTimeout((function(){throw e}),0)}function et(e,t){$e||function(){var e=I.Promise.resolve(void 0);$e=function(){e.then(rt)}}(),tt||($e(),tt=!0),nt.add(e,t)}Ye.prototype.add=function(e,t){var n=Xe.get();n.set(e,t),this.b?this.b.next=n:this.a=n,this.b=n},Je.prototype.set=function(e,t){this.a=e,this.b=t,this.next=null};var tt=!(Je.prototype.reset=function(){this.next=this.b=this.a=null}),nt=new Ye;function rt(){for(var e;r=n=void 0,r=null,(n=nt).a&&(r=n.a,n.a=n.a.next,n.a||(n.b=null),r.next=null),e=r;){try{e.a.call(e.b)}catch(e){Ze(e)}var t=Xe;t.f(e),t.b<100&&(t.b++,e.next=t.a,t.a=e)}var n,r;tt=!1}function it(e,t){We.call(this),this.b=e||1,this.a=t||I,this.f=q(this.gb,this),this.g=U()}function ot(e){e.ba=!1,e.L&&(e.a.clearTimeout(e.L),e.L=null)}function at(e,t,n){if("function"==_(e))n&&(e=q(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=q(e.handleEvent,e)}return 2147483647<Number(t)?-1:I.setTimeout(e,t||0)}function st(e,t,n){j.call(this),this.f=null!=n?q(e,n):e,this.c=t,this.b=q(this.ab,this),this.a=[]}function ut(e){e.U=at(e.b,e.c),e.f.apply(null,e.a)}function ct(e){j.call(this),this.b=e,this.a={}}B(it,We),(E=it.prototype).ba=!1,E.L=null,E.gb=function(){if(this.ba){var e=U()-this.g;0<e&&e<.8*this.b?this.L=this.a.setTimeout(this.f,this.b-e):(this.L&&(this.a.clearTimeout(this.L),this.L=null),this.dispatchEvent("tick"),this.ba&&(ot(this),this.start()))}},E.start=function(){this.ba=!0,this.L||(this.L=this.a.setTimeout(this.f,this.b),this.g=U())},E.G=function(){it.N.G.call(this),ot(this),delete this.a},B(st,j),(E=st.prototype).ea=!1,E.U=null,E.Ua=function(e){this.a=arguments,this.U?this.ea=!0:ut(this)},E.G=function(){st.N.G.call(this),this.U&&(I.clearTimeout(this.U),this.U=null,this.ea=!1,this.a=[])},E.ab=function(){this.U=null,this.ea&&(this.ea=!1,ut(this))},B(ct,j);var lt=[];function ht(e,t,n,r){x(n)||(n&&(lt[0]=n.toString()),n=lt);for(var i=0;i<n.length;i++){var o=Le(t,n[i],r||e.handleEvent,!1,e.b||e);if(!o)break;e.a[o.key]=o}}function ft(e){ee(e.a,(function(e,t){this.a.hasOwnProperty(t)&&qe(e)}),e),e.a={}}function dt(){}ct.prototype.G=function(){ct.N.G.call(this),ft(this)},ct.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var pt=new We;function mt(e){Ce.call(this,"serverreachability",e)}function yt(e){pt.dispatchEvent(new mt(pt,e))}function gt(e){Ce.call(this,"statevent",e)}function vt(e){pt.dispatchEvent(new gt(pt,e))}function bt(e){Ce.call(this,"timingevent",e)}function wt(e,t){if("function"!=_(e))throw Error("Fn must not be null and must be a function");return I.setTimeout((function(){e()}),t)}B(mt,Ce),B(gt,Ce),B(bt,Ce);var Et={NO_ERROR:0,hb:1,ob:2,nb:3,kb:4,mb:5,pb:6,Ma:7,TIMEOUT:8,sb:9},St={jb:"complete",wb:"success",Na:"error",Ma:"abort",ub:"ready",vb:"readystatechange",TIMEOUT:"timeout",qb:"incrementaldata",tb:"progress",lb:"downloadprogress",xb:"uploadprogress"};function Tt(){}function Ct(e){var t;return(t=e.a)||(t=e.a={}),t}function It(){}Tt.prototype.a=null;var kt,Nt={OPEN:"a",ib:"b",Na:"c",rb:"d"};function Dt(){Ce.call(this,"d")}function At(){Ce.call(this,"c")}function _t(){}function xt(e,t,n){this.g=e,this.W=t,this.V=n||1,this.I=new ct(this),this.O=Ot,e=le?125:void 0,this.P=new it(e),this.h=null,this.b=!1,this.l=this.D=this.f=this.F=this.v=this.R=this.i=null,this.j=[],this.a=null,this.A=0,this.c=this.w=null,this.o=-1,this.m=!1,this.J=0,this.B=null,this.s=this.S=this.H=!1}B(Dt,Ce),B(At,Ce),B(_t,Tt),kt=new _t;var Ot=45e3,Rt={},Pt={};function Mt(e,t,n){e.F=1,e.f=sn(Zt(t)),e.l=n,e.H=!0,Ft(e,null)}function Lt(e,t,n,r){e.F=1,e.f=sn(Zt(t)),e.l=null,e.H=n,Ft(e,r)}function Ft(e,t){e.v=U(),Ut(e),e.D=Zt(e.f),an(e.D,"t",e.V),e.A=0,e.a=e.g.$(e.g.Y()?t:null),0<e.J&&(e.B=new st(q(e.Ka,e,e.a),e.J)),ht(e.I,e.a,"readystatechange",e.eb),t=e.h?te(e.h):{},e.l?(e.w||(e.w="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.a.ca(e.D,e.w,e.l,t)):(e.w="GET",e.a.ca(e.D,e.w,null,t)),yt(1)}function qt(e,t,n){for(var r=!0;!e.m&&e.A<n.length;){var i=Vt(e,n);if(i==Pt){4==t&&(e.c=4,vt(14),r=!1);break}if(i==Rt){e.c=4,vt(15),r=!1;break}Wt(e,i)}4==t&&0==n.length&&(e.c=1,vt(16),r=!1),e.b=e.b&&r,r||(Qt(e),zt(e))}function Vt(e,t){var n=e.A,r=t.indexOf("\n",n);return-1==r?Pt:(n=Number(t.substring(n,r)),isNaN(n)?Rt:(r+=1)+n>t.length?Pt:(t=t.substr(r,n),e.A=r+n,t))}function Ut(e){e.R=U()+e.O,Bt(e,e.O)}function Bt(e,t){if(null!=e.i)throw Error("WatchDog timer not null");e.i=wt(q(e.bb,e),t)}function jt(e){e.i&&(I.clearTimeout(e.i),e.i=null)}function zt(e){e.g.Da()||e.m||e.g.na(e)}function Qt(e){jt(e);var t=e.B;t&&"function"==typeof t.la&&t.la(),e.B=null,ot(e.P),ft(e.I),e.a&&(t=e.a,e.a=null,t.abort(),t.la())}function Wt(e,t){try{e.g.Ga(e,t),yt(4)}catch(e){}}function Kt(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(O(e)||k(e))Q(e,t,void 0);else{if(e.K&&"function"==typeof e.K)var n=e.K();else if(e.C&&"function"==typeof e.C)n=void 0;else if(O(e)||k(e)){n=[];for(var r=e.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,e)n[r++]=i;i=(r=function(e){if(e.C&&"function"==typeof e.C)return e.C();if(k(e))return e.split("");if(O(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e)).length;for(var o=0;o<i;o++)t.call(void 0,r[o],n&&n[o],e)}}function Gt(e,t){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof Gt)for(n=e.K(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function Ht(e,t){$t(e.b,t)&&(delete e.b[t],e.c--,e.a.length>2*e.c&&Yt(e))}function Yt(e){if(e.c!=e.a.length){for(var t=0,n=0;t<e.a.length;){var r=e.a[t];$t(e.b,r)&&(e.a[n++]=r),t++}e.a.length=n}if(e.c!=e.a.length){var i={};for(n=t=0;t<e.a.length;)$t(i,r=e.a[t])||(i[e.a[n++]=r]=1),t++;e.a.length=n}}function $t(e,t){return Object.prototype.hasOwnProperty.call(e,t)}(E=xt.prototype).setTimeout=function(e){this.O=e},E.eb=function(e){e=e.target;var t=this.B;t&&3==Zn(e)?t.Ua():this.Ka(e)},E.Ka=function(e){try{if(e==this.a)e:{var t=Zn(this.a),n=this.a.ya(),r=this.a.T();if(!(t<3||3==t&&!le&&!this.a.aa())){this.m||4!=t||7==n||yt(8==n||r<=0?3:2),jt(this);var i=this.a.T();this.o=i;var o=this.a.aa();if(this.b=200==i){if(this.S&&!this.s){t:{if(this.a){var a=er(this.a,"X-HTTP-Initial-Response");if(a&&!G(a)){var s=a;break t}}s=null}if(!s){this.b=!1,this.c=3,vt(12),Qt(this),zt(this);break e}this.s=!0,Wt(this,s)}this.H?(qt(this,t,o),le&&this.b&&3==t&&(ht(this.I,this.P,"tick",this.cb),this.P.start())):Wt(this,o),4==t&&Qt(this),this.b&&!this.m&&(4==t?this.g.na(this):(this.b=!1,Ut(this)))}else 400==i&&0<o.indexOf("Unknown SID")?(this.c=3,vt(12)):(this.c=0,vt(13)),Qt(this),zt(this)}}}catch(e){}},E.cb=function(){if(this.a){var e=Zn(this.a),t=this.a.aa();this.A<t.length&&(jt(this),qt(this,e,t),this.b&&4!=e&&Ut(this))}},E.cancel=function(){this.m=!0,Qt(this)},E.bb=function(){this.i=null;var e=U();0<=e-this.R?(2!=this.F&&(yt(3),vt(17)),Qt(this),this.c=2,zt(this)):Bt(this,this.R-e)},(E=Gt.prototype).C=function(){Yt(this);for(var e=[],t=0;t<this.a.length;t++)e.push(this.b[this.a[t]]);return e},E.K=function(){return Yt(this),this.a.concat()},E.get=function(e,t){return $t(this.b,e)?this.b[e]:t},E.set=function(e,t){$t(this.b,e)||(this.c++,this.a.push(e)),this.b[e]=t},E.forEach=function(e,t){for(var n=this.K(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);e.call(t,o,i,this)}};var Xt=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Jt(e,t){var n;this.b=this.j=this.f="",this.i=null,this.g=this.a="",this.h=!1,e instanceof Jt?(this.h=void 0!==t?t:e.h,en(this,e.f),this.j=e.j,tn(this,e.b),nn(this,e.i),this.a=e.a,rn(this,En(e.c)),this.g=e.g):e&&(n=String(e).match(Xt))?(this.h=!!t,en(this,n[1]||"",!0),this.j=un(n[2]||""),tn(this,n[3]||"",!0),nn(this,n[4]),this.a=un(n[5]||"",!0),rn(this,n[6]||"",!0),this.g=un(n[7]||"")):(this.h=!!t,this.c=new yn(null,this.h))}function Zt(e){return new Jt(e)}function en(e,t,n){e.f=n?un(t,!0):t,e.f&&(e.f=e.f.replace(/:$/,""))}function tn(e,t,n){e.b=n?un(t,!0):t}function nn(e,t){if(t){if(t=Number(t),isNaN(t)||t<0)throw Error("Bad port number "+t);e.i=t}else e.i=null}function rn(e,t,n){t instanceof yn?(e.c=t,function(e,t){t&&!e.f&&(gn(e),e.c=null,e.a.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(vn(this,t),wn(this,n,e))}),e)),e.f=t}(e.c,e.h)):(n||(t=cn(t,pn)),e.c=new yn(t,e.h))}function on(e,t,n){e.c.set(t,n)}function an(e,t,n){x(n)||(n=[String(n)]),wn(e.c,t,n)}function sn(e){return on(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^U()).toString(36)),e}function un(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function cn(e,t,n){return k(e)?(e=encodeURI(e).replace(t,ln),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function ln(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Jt.prototype.toString=function(){var e=[],t=this.f;t&&e.push(cn(t,hn,!0),":");var n=this.b;return!n&&"file"!=t||(e.push("//"),(t=this.j)&&e.push(cn(t,hn,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.i)&&e.push(":",String(n))),(n=this.a)&&(this.b&&"/"!=n.charAt(0)&&e.push("/"),e.push(cn(n,"/"==n.charAt(0)?dn:fn,!0))),(n=this.c.toString())&&e.push("?",n),(n=this.g)&&e.push("#",cn(n,mn)),e.join("")},Jt.prototype.resolve=function(e){var t=Zt(this),n=!!e.f;n?en(t,e.f):n=!!e.j,n?t.j=e.j:n=!!e.b,n?tn(t,e.b):n=null!=e.i;var r=e.a;if(n)nn(t,e.i);else if(n=!!e.a){if("/"!=r.charAt(0))if(this.b&&!this.a)r="/"+r;else{var i=t.a.lastIndexOf("/");-1!=i&&(r=t.a.substr(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if($(i,"./")||$(i,"/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var o=[],a=0;a<i.length;){var s=i[a++];"."==s?r&&a==i.length&&o.push(""):".."==s?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),r&&a==i.length&&o.push("")):(o.push(s),r=!0)}r=o.join("/")}else r=i}return n?t.a=r:n=""!==e.c.toString(),n?rn(t,En(e.c)):n=!!e.g,n&&(t.g=e.g),t};var hn=/[#\/\?@]/g,fn=/[#\?:]/g,dn=/[#\?]/g,pn=/[#\?@]/g,mn=/#/g;function yn(e,t){this.b=this.a=null,this.c=e||null,this.f=!!t}function gn(e){e.a||(e.a=new Gt,e.b=0,e.c&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var o=e[n].substring(0,r);i=e[n].substring(r+1)}else o=e[n];t(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.c,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function vn(e,t){gn(e),t=Sn(e,t),$t(e.a.b,t)&&(e.c=null,e.b-=e.a.get(t).length,Ht(e.a,t))}function bn(e,t){return gn(e),t=Sn(e,t),$t(e.a.b,t)}function wn(e,t,n){vn(e,t),0<n.length&&(e.c=null,e.a.set(Sn(e,t),K(n)),e.b+=n.length)}function En(e){var t=new yn;return t.c=e.c,e.a&&(t.a=new Gt(e.a),t.b=e.b),t}function Sn(e,t){return t=String(t),e.f&&(t=t.toLowerCase()),t}function Tn(e){this.a=e,this.b=this.h=null,this.g=!1,this.i=null,this.c=-1,this.l=this.f=null}function Cn(e){var t=e.a.F.a;if(null!=t)vt(4),t?(vt(10),fr(e.a,e,!1)):(vt(11),fr(e.a,e,!0));else{e.b=new xt(e,void 0,void 0),e.b.h=e.h,t=gr(t=e.a,t.Y()?e.f:null,e.i),vt(4),an(t,"TYPE","xmlhttp");var n=e.a.j,r=e.a.I;n&&r&&on(t,n,r),Lt(e.b,t,!1,e.f)}}function In(){this.a=this.b=null}function kn(){this.a=new Gt}function Nn(e){var t=typeof e;return"object"==t&&e||"function"==t?"o"+(e[P]||(e[P]=++M)):t.charAt(0)+e}function Dn(e,t){this.b=e,this.a=t}function An(e){this.g=e||_n,e=I.PerformanceNavigationTiming?0<(e=I.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):!!(I.ka&&I.ka.Ea&&I.ka.Ea()&&I.ka.Ea().zb),this.f=e?this.g:1,this.a=null,1<this.f&&(this.a=new kn),this.b=null,this.c=[]}(E=yn.prototype).add=function(e,t){gn(this),this.c=null,e=Sn(this,e);var n=this.a.get(e);return n||this.a.set(e,n=[]),n.push(t),this.b+=1,this},E.forEach=function(e,t){gn(this),this.a.forEach((function(n,r){Q(n,(function(n){e.call(t,n,r,this)}),this)}),this)},E.K=function(){gn(this);for(var e=this.a.C(),t=this.a.K(),n=[],r=0;r<t.length;r++)for(var i=e[r],o=0;o<i.length;o++)n.push(t[r]);return n},E.C=function(e){gn(this);var t=[];if(k(e))bn(this,e)&&(t=W(t,this.a.get(Sn(this,e))));else{e=this.a.C();for(var n=0;n<e.length;n++)t=W(t,e[n])}return t},E.set=function(e,t){return gn(this),this.c=null,bn(this,e=Sn(this,e))&&(this.b-=this.a.get(e).length),this.a.set(e,[t]),this.b+=1,this},E.get=function(e,t){return e&&0<(e=this.C(e)).length?String(e[0]):t},E.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var e=[],t=this.a.K(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.C(r);for(var o=0;o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),e.push(a)}}return this.c=e.join("&")},B((function(){}),(function(){})),(E=Tn.prototype).M=null,E.$=function(e){return this.a.$(e)},E.abort=function(){this.b&&(this.b.cancel(),this.b=null),this.c=-1},E.Da=function(){return!1},E.Ga=function(e,t){if(this.c=e.o,0==this.M){if(!this.a.o&&(e=e.a)){var n=er(e,"X-Client-Wire-Protocol");this.l=n||null,this.a.j&&(e=er(e,"X-HTTP-Session-Id"))&&(this.a.I=e)}if(t){try{var r=this.a.ja.a.parse(t)}catch(e){return(t=this.a).m=this.c,void mr(t,2)}this.f=r[0]}else(t=this.a).m=this.c,mr(t,2)}else 1==this.M&&(this.g?vt(6):"11111"==t?(vt(5),this.g=!0,(!ue||10<=Number(ge))&&(this.c=200,this.b.cancel(),vt(11),fr(this.a,this,!0))):(vt(7),this.g=!1))},E.na=function(){if(this.c=this.b.o,this.b.b)0==this.M?(this.M=1,Cn(this)):1==this.M&&(this.g?(vt(11),fr(this.a,this,!0)):(vt(10),fr(this.a,this,!1)));else{0==this.M?vt(8):1==this.M&&vt(9);var e=this.a;e.m=this.c,mr(e,2)}},E.Y=function(){return this.a.Y()},E.ma=function(){return this.a.ma()},kn.prototype.add=function(e){this.a.set(Nn(e),e)},kn.prototype.C=function(){return this.a.C()};var _n=10;function xn(e,t){!e.a&&($(t,"spdy")||$(t,"quic")||$(t,"h2"))&&(e.f=e.g,e.a=new kn,e.b&&(Mn(e,e.b),e.b=null))}function On(e){return!!e.b||!!e.a&&e.a.a.c>=e.f}function Rn(e){return e.b?1:e.a?e.a.a.c:0}function Pn(e,t){return e.b?e.b==t:!!e.a&&(t=Nn(t),$t(e.a.a.b,t))}function Mn(e,t){e.a?e.a.add(t):e.b=t}function Ln(e,t){var n;e.b&&e.b==t?e.b=null:((n=e.a)&&(n=Nn(t),n=$t(e.a.a.b,n)),n&&Ht(e.a.a,Nn(t)))}function Fn(e){if(null!=e.b)return e.c.concat(e.b.j);if(null==e.a||0==e.a.a.c)return K(e.c);var t=e.c;return Q(e.a.C(),(function(e){t=t.concat(e.j)})),t}function qn(){}function Vn(){this.a=new qn}function Un(e,t,n){var r=n||"";try{Kt(e,(function(e,n){var i=e;R(e)&&(i=Ge(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(e){throw t.push(r+"type="+encodeURIComponent("_badmap")),e}}function Bn(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(e){}}An.prototype.cancel=function(){this.c=Fn(this),this.b?(this.b.cancel(),this.b=null):this.a&&0!=this.a.a.c&&(Q(this.a.C(),(function(e){e.cancel()})),function(e){e.b={},e.a.length=0,e.c=0}(this.a.a))},qn.prototype.stringify=function(e){return I.JSON.stringify(e,void 0)},qn.prototype.parse=function(e){return I.JSON.parse(e,void 0)};var jn=I.JSON.parse;function zn(e){We.call(this),this.headers=new Gt,this.H=e||null,this.b=!1,this.s=this.a=null,this.A="",this.h=0,this.f="",this.g=this.w=this.l=this.v=!1,this.o=0,this.m=null,this.I=Qn,this.D=this.F=!1}B(zn,We);var Qn="",Wn=/^https?$/i,Kn=["POST","PUT"];function Gn(e){return"content-type"==e.toLowerCase()}function Hn(e,t){e.b=!1,e.a&&(e.g=!0,e.a.abort(),e.g=!1),e.f=t,e.h=5,Yn(e),Xn(e)}function Yn(e){e.v||(e.v=!0,e.dispatchEvent("complete"),e.dispatchEvent("error"))}function $n(e){if(e.b&&void 0!==C&&(!e.s[1]||4!=Zn(e)||2!=e.T()))if(e.l&&4==Zn(e))at(e.Fa,0,e);else if(e.dispatchEvent("readystatechange"),4==Zn(e)){e.b=!1;try{var t,n=e.T();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var o=String(e.A).match(Xt)[1]||null;if(!o&&I.self&&I.self.location){var a=I.self.location.protocol;o=a.substr(0,a.length-1)}i=!Wn.test(o?o.toLowerCase():"")}t=i}t?(e.dispatchEvent("complete"),e.dispatchEvent("success")):(e.h=6,e.f=e.za()+" ["+e.T()+"]",Yn(e))}finally{Xn(e)}}}function Xn(e,t){if(e.a){Jn(e);var n=e.a,r=e.s[0]?A:null;e.a=null,e.s=null,t||e.dispatchEvent("ready");try{n.onreadystatechange=r}catch(e){}}}function Jn(e){e.a&&e.D&&(e.a.ontimeout=null),e.m&&(I.clearTimeout(e.m),e.m=null)}function Zn(e){return e.a?e.a.readyState:0}function er(e,t){return e.a?e.a.getResponseHeader(t):null}function tr(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}if(r)return e;if(n=function(e){var t="";return ee(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}(n),k(e)){if(t=encodeURIComponent(String(t)),t+=n=null!=n?"="+encodeURIComponent(String(n)):""){if((n=e.indexOf("#"))<0&&(n=e.length),(r=e.indexOf("?"))<0||n<r){r=n;var i=""}else i=e.substring(r+1,n);n=(e=[e.substr(0,r),i,e.substr(n)])[1],e[1]=t?n?n+"&"+t:t:n,e=e[0]+(e[1]?"?"+e[1]:"")+e[2]}return e}return on(e,t,n),e}function nr(e){this.f=[],this.F=new In,this.ga=this.pa=this.B=this.ha=this.a=this.I=this.j=this.V=this.g=this.J=this.i=null,this.Ra=this.P=0,this.Pa=!!D("internalChannelParams.failFast",e),this.ia=this.w=this.s=this.l=this.h=this.c=null,this.oa=!0,this.m=this.ra=this.O=-1,this.S=this.v=this.A=0,this.Oa=D("internalChannelParams.baseRetryDelayMs",e)||5e3,this.Sa=D("internalChannelParams.retryDelaySeedMs",e)||1e4,this.Qa=D("internalChannelParams.forwardChannelMaxRetries",e)||2,this.qa=D("internalChannelParams.forwardChannelRequestTimeoutMs",e)||2e4,this.La=e&&e.Ab||void 0,this.D=void 0,this.R=e&&e.supportsCrossDomainXhr||!1,this.H="",this.b=new An(e&&e.concurrentRequestLimit),this.ja=new Vn,this.o=!e||void 0===e.backgroundChannelTest||e.backgroundChannelTest,(this.W=e&&e.fastHandshake||!1)&&!this.o&&(this.o=!0),e&&e.forceLongPolling&&(this.oa=!1),this.fa=void 0}function rr(e){if(ir(e),3==e.u){var t=e.P++,n=Zt(e.B);on(n,"SID",e.H),on(n,"RID",t),on(n,"TYPE","terminate"),ur(e,n),(t=new xt(e,t,void 0)).F=2,t.f=sn(Zt(n)),n=!1,I.navigator&&I.navigator.sendBeacon&&(n=I.navigator.sendBeacon(t.f.toString(),"")),!n&&I.Image&&((new Image).src=t.f,n=!0),n||(t.a=t.g.$(null),t.a.ca(t.f)),t.v=U(),Ut(t)}yr(e)}function ir(e){e.w&&(e.w.abort(),e.w=null),e.a&&(e.a.cancel(),e.a=null),e.l&&(I.clearTimeout(e.l),e.l=null),dr(e),e.b.cancel(),e.h&&(N(e.h)&&I.clearTimeout(e.h),e.h=null)}function or(e,t){e.f.push(new Dn(e.Ra++,t)),3==e.u&&ar(e)}function ar(e){On(e.b)||e.h||(e.h=!0,et(e.Ia,e),e.A=0)}function sr(e,t){var n;n=t?t.W:e.P++;var r=Zt(e.B);on(r,"SID",e.H),on(r,"RID",n),on(r,"AID",e.O),ur(e,r),e.g&&e.i&&tr(r,e.g,e.i),n=new xt(e,n,e.A+1),null===e.g&&(n.h=e.i),t&&(e.f=t.j.concat(e.f)),t=cr(e,n,1e3),n.setTimeout(Math.round(.5*e.qa)+Math.round(.5*e.qa*Math.random())),Mn(e.b,n),Mt(n,r,t)}function ur(e,t){e.c&&Kt({},(function(e,n){on(t,n,e)}))}function cr(e,t,n){n=Math.min(e.f.length,n);var r=e.c?q(e.c.Ta,e.c,e):null;e:for(var i=e.f,o=-1;;){var a=["count="+n];-1==o?0<n?(o=i[0].b,a.push("ofs="+o)):o=0:a.push("ofs="+o);for(var s=!0,u=0;u<n;u++){var c=i[u].b,l=i[u].a;if((c-=o)<0)o=Math.max(0,i[u].b-100),s=!1;else try{Un(l,a,"req"+c+"_")}catch(e){r&&r(l)}}if(s){r=a.join("&");break e}}return e=e.f.splice(0,n),t.j=e,r}function lr(e){e.a||e.l||(e.S=1,et(e.Ha,e),e.v=0)}function hr(e){return!(e.a||e.l||3<=e.v)&&(e.S++,e.l=wt(q(e.Ha,e),pr(e,e.v)),e.v++,!0)}function fr(e,t,n){var r=t.l;r&&xn(e.b,r),e.ia=e.oa&&n,e.m=t.c,e.B=gr(e,null,e.ha),ar(e)}function dr(e){null!=e.s&&(I.clearTimeout(e.s),e.s=null)}function pr(e,t){var n=e.Oa+Math.floor(Math.random()*e.Sa);return e.ma()||(n*=2),n*t}function mr(e,t){if(2==t){var n=null;e.c&&(n=null);var r=q(e.fb,e);n||(n=new Jt("//www.google.com/images/cleardot.gif"),I.location&&"http"==I.location.protocol||en(n,"https"),sn(n)),function(e,t){var n=new dt;if(I.Image){var r=new Image;r.onload=V(Bn,n,r,"TestLoadImage: loaded",!0,t),r.onerror=V(Bn,n,r,"TestLoadImage: error",!1,t),r.onabort=V(Bn,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=V(Bn,n,r,"TestLoadImage: timeout",!1,t),I.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else vt(2);e.u=0,e.c&&e.c.ta(t),yr(e),ir(e)}function yr(e){e.u=0,e.m=-1,e.c&&(0==Fn(e.b).length&&0==e.f.length||(e.b.c.length=0,K(e.f),e.f.length=0),e.c.sa())}function gr(e,t,n){var r=function(e){return e instanceof Jt?Zt(e):new Jt(e,void 0)}(n);if(""!=r.b)t&&tn(r,t+"."+r.b),nn(r,r.i);else{var i,o=I.location;i=t?t+"."+o.hostname:o.hostname,r=function(e,t,n,r){var i=new Jt(null,void 0);return e&&en(i,e),t&&tn(i,t),n&&nn(i,n),r&&(i.a=r),i}(o.protocol,i,+o.port,n)}return e.V&&ee(e.V,(function(e,t){on(r,t,e)})),t=e.j,n=e.I,t&&n&&on(r,t,n),on(r,"VER",e.wa),ur(e,r),r}function vr(){}function br(){if(ue&&!(10<=Number(ge)))throw Error("Environmental error: no available transport.")}function wr(e,t){We.call(this),this.a=new nr(t),this.g=e,this.m=t&&t.testUrl?t.testUrl:function(e){for(var t=e,n=1;n<arguments.length;n++){var r,i=arguments[n];0==i.lastIndexOf("/",0)?t=i:((r=""==t)||(r=0<=(r=t.length-1)&&t.indexOf("/",r)==r),t+=r?i:"/"+i)}return t}(this.g,"test"),this.b=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.a.i=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.xa&&(e?e["X-WebChannel-Client-Profile"]=t.xa:e={"X-WebChannel-Client-Profile":t.xa}),this.a.J=e,(e=t&&t.httpHeadersOverwriteParam)&&!G(e)&&(this.a.g=e),this.l=t&&t.supportsCrossDomainXhr||!1,this.h=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!G(t)&&(this.a.j=t,null!==(e=this.b)&&t in e&&t in(e=this.b)&&delete e[t]),this.f=new Tr(this)}function Er(e){Dt.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.c=e)?(e=this.c,this.data=null!==t&&e in t?t[e]:void 0):this.data=t}else this.data=e}function Sr(){At.call(this),this.status=1}function Tr(e){this.a=e}(E=zn.prototype).ca=function(e,t,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.A+"; newUri="+e);t=t?t.toUpperCase():"GET",this.A=e,this.f="",this.h=0,this.v=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=this.H?Ct(this.H):Ct(kt),this.a.onreadystatechange=q(this.Fa,this);try{this.w=!0,this.a.open(t,String(e),!0),this.w=!1}catch(e){return void Hn(this,e)}e=n||"";var i=new Gt(this.headers);r&&Kt(r,(function(e,t){i.set(t,e)})),r=function(e){e:{for(var t=Gn,n=e.length,r=k(e)?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}return t<0?null:k(e)?e.charAt(t):e[t]}(i.K()),n=I.FormData&&e instanceof I.FormData,0<=z(Kn,t)&&!r&&!n&&i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(e,t){this.a.setRequestHeader(t,e)}),this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{Jn(this),0<this.o&&((this.D=function(e){return ue&&be(9)&&N(e.timeout)&&void 0!==e.ontimeout}(this.a))?(this.a.timeout=this.o,this.a.ontimeout=q(this.Ca,this)):this.m=at(this.Ca,this.o,this)),this.l=!0,this.a.send(e),this.l=!1}catch(e){Hn(this,e)}},E.Ca=function(){void 0!==C&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,this.dispatchEvent("timeout"),this.abort(8))},E.abort=function(e){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=e||7,this.dispatchEvent("complete"),this.dispatchEvent("abort"),Xn(this))},E.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),Xn(this,!0)),zn.N.G.call(this)},E.Fa=function(){this.j||(this.w||this.l||this.g?$n(this):this.$a())},E.$a=function(){$n(this)},E.T=function(){try{return 2<Zn(this)?this.a.status:-1}catch(r){return-1}},E.za=function(){try{return 2<Zn(this)?this.a.statusText:""}catch(r){return""}},E.aa=function(){try{return this.a?this.a.responseText:""}catch(r){return""}},E.Va=function(e){if(this.a){var t=this.a.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),jn(t)}},E.ya=function(){return this.h},E.Ya=function(){return k(this.f)?this.f:String(this.f)},(E=nr.prototype).wa=8,E.u=1,E.Da=function(){return 0==this.u},E.Ia=function(e){if(this.h)if(this.h=null,1==this.u){if(!e){this.P=Math.floor(1e5*Math.random());var t,n=new xt(this,e=this.P++,void 0),r=this.i;if(this.J&&(r?re(r=te(r),this.J):r=this.J),null===this.g&&(n.h=r),this.W)e:{for(var i=t=0;i<this.f.length;i++){var o=this.f[i];if(void 0===(o="__data__"in o.a&&k(o=o.a.__data__)?o.length:void 0))break;if(4096<(t+=o)){t=i;break e}if(4096===t||i===this.f.length-1){t=i+1;break e}}t=1e3}else t=1e3;t=cr(this,n,t),on(i=Zt(this.B),"RID",e),on(i,"CVER",22),this.o&&this.j&&on(i,"X-HTTP-Session-Id",this.j),ur(this,i),this.g&&r&&tr(i,this.g,r),Mn(this.b,n),this.W?(on(i,"$req",t),on(i,"SID","null"),n.S=!0,Mt(n,i,null)):Mt(n,i,t),this.u=2}}else 3==this.u&&(e?sr(this,e):0==this.f.length||On(this.b)||sr(this))},E.Ha=function(){this.l=null,this.a=new xt(this,"rpc",this.S),null===this.g&&(this.a.h=this.i),this.a.J=0;var e=Zt(this.pa);on(e,"RID","rpc"),on(e,"SID",this.H),on(e,"CI",this.ia?"0":"1"),on(e,"AID",this.O),ur(this,e),on(e,"TYPE","xmlhttp"),this.g&&this.i&&tr(e,this.g,this.i),this.D&&this.a.setTimeout(this.D),Lt(this.a,e,!0,this.ga)},E.Ga=function(e,t){if(0!=this.u&&(this.a==e||Pn(this.b,e)))if(this.m=e.o,!e.s&&Pn(this.b,e)&&3==this.u){try{var n=this.ja.a.parse(t)}catch(e){n=null}if(x(n)&&3==n.length){if(0==(t=n)[0]){e:if(!this.l){if(this.a){if(!(this.a.v+3e3<e.v))break e;dr(this),this.a.cancel(),this.a=null}hr(this),vt(18)}}else this.ra=t[1],0<this.ra-this.O&&t[2]<37500&&this.ia&&0==this.v&&!this.s&&(this.s=wt(q(this.Za,this),6e3));if(Rn(this.b)<=1&&this.fa){try{this.fa()}catch(e){}this.fa=void 0}}else mr(this,11)}else if(!e.s&&this.a!=e||dr(this),!G(t))for(t=n=this.ja.a.parse(t),n=0;n<t.length;n++){var r=t[n];if(this.O=r[0],r=r[1],2==this.u)if("c"==r[0]){this.H=r[1],this.ga=r[2];var i=r[3];null!=i&&(this.wa=i),null!=(r=r[5])&&N(r)&&0<r&&(this.D=1.5*r),this.o&&(r=e.a)&&((i=er(r,"X-Client-Wire-Protocol"))&&xn(this.b,i),this.j&&(r=er(r,"X-HTTP-Session-Id")))&&(this.I=r,on(this.B,this.j,r)),this.u=3,this.c&&this.c.va(),r=e,this.pa=gr(this,this.Y()?this.ga:null,this.ha),r.s?(Ln(this.b,r),(i=this.D)&&r.setTimeout(i),r.i&&(jt(r),Ut(r)),this.a=r):lr(this),0<this.f.length&&ar(this)}else"stop"!=r[0]&&"close"!=r[0]||mr(this,7);else 3==this.u&&("stop"==r[0]||"close"==r[0]?"stop"==r[0]?mr(this,7):rr(this):"noop"!=r[0]&&this.c&&this.c.ua(r),this.v=0)}},E.Za=function(){null!=this.s&&(this.s=null,this.a.cancel(),this.a=null,hr(this),vt(19))},E.na=function(e){var t=null;if(this.a==e){dr(this),this.a=null;var n=2}else{if(!Pn(this.b,e))return;t=e.j,Ln(this.b,e),n=1}if(this.m=e.o,0!=this.u)if(e.b)1==n?(t=U()-e.v,pt.dispatchEvent(new bt(pt,e.l?e.l.length:0,t,this.A)),ar(this)):lr(this);else{var r=e.c;if(3==r||0==r&&0<this.m||!(1==n&&function(e,t){return!(Rn(e.b)>=e.b.f-(e.h?1:0))&&(e.h?(e.f=t.j.concat(e.f),!0):!(1==e.u||2==e.u||e.A>=(e.Pa?0:e.Qa))&&(e.h=wt(q(e.Ia,e,t),pr(e,e.A)),e.A++,!0))}(this,e)||2==n&&hr(this)))switch(t&&0<t.length&&(e=this.b,e.c=e.c.concat(t)),r){case 1:mr(this,5);break;case 4:mr(this,10);break;case 3:mr(this,6);break;default:mr(this,2)}}},E.fb=function(e){vt(e?2:1)},E.$=function(e){if(e&&!this.R)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new zn(this.La)).F=this.R,e},E.ma=function(){return!!this.c&&!0},E.Y=function(){return this.R},(E=vr.prototype).va=function(){},E.ua=function(){},E.ta=function(){},E.sa=function(){},E.Ta=function(){},br.prototype.a=function(e,t){return new wr(e,t)},B(wr,We),(E=wr.prototype).addEventListener=function(e,t,n,r){wr.N.addEventListener.call(this,e,t,n,r)},E.removeEventListener=function(e,t,n,r){wr.N.removeEventListener.call(this,e,t,n,r)},E.Wa=function(){this.a.c=this.f,this.l&&(this.a.R=!0);var e=this.a,t=this.m,n=this.g,r=this.b||void 0;vt(0),e.ha=n,e.V=r||{},e.o&&(e.F.b=[],e.F.a=!1),e.w=new Tn(e),null===e.g&&(e.w.h=e.i),n=t,e.g&&e.i&&(n=tr(t,e.g,e.i)),(e=e.w).i=n,t=gr(e.a,null,e.i),vt(3),null!=(n=e.a.F.b)?(e.f=n[0],e.M=1,Cn(e)):(an(t,"MODE","init"),!e.a.o&&e.a.j&&an(t,"X-HTTP-Session-Id",e.a.j),e.b=new xt(e,void 0,void 0),e.b.h=e.h,Lt(e.b,t,!1,null),e.M=0)},E.close=function(){rr(this.a)},E.Xa=function(e){if(k(e)){var t={};t.__data__=e,or(this.a,t)}else this.h?((t={}).__data__=Ge(e),or(this.a,t)):or(this.a,e)},E.G=function(){this.a.c=null,delete this.f,rr(this.a),delete this.a,wr.N.G.call(this)},B(Er,Dt),B(Sr,At),B(Tr,vr),Tr.prototype.va=function(){this.a.dispatchEvent("a")},Tr.prototype.ua=function(e){this.a.dispatchEvent(new Er(e))},Tr.prototype.ta=function(e){this.a.dispatchEvent(new Sr(e))},Tr.prototype.sa=function(){this.a.dispatchEvent("b")};var Cr=V((function(e,t){function n(){}n.prototype=e.prototype;var r=new n;return e.apply(r,Array.prototype.slice.call(arguments,1)),r}),br);br.prototype.createWebChannel=br.prototype.a,wr.prototype.send=wr.prototype.Xa,wr.prototype.open=wr.prototype.Wa,wr.prototype.close=wr.prototype.close,Et.NO_ERROR=0,Et.TIMEOUT=8,Et.HTTP_ERROR=6,St.COMPLETE="complete",(It.EventType=Nt).OPEN="a",Nt.CLOSE="b",Nt.ERROR="c",Nt.MESSAGE="d",We.prototype.listen=We.prototype.Aa,zn.prototype.listenOnce=zn.prototype.Ba,zn.prototype.getLastError=zn.prototype.Ya,zn.prototype.getLastErrorCode=zn.prototype.ya,zn.prototype.getStatus=zn.prototype.T,zn.prototype.getStatusText=zn.prototype.za,zn.prototype.getResponseJson=zn.prototype.Va,zn.prototype.getResponseText=zn.prototype.aa,zn.prototype.send=zn.prototype.ca;var Ir,kr,Nr={createWebChannelTransport:Cr,ErrorCode:Et,EventType:St,WebChannel:It,XhrIo:zn},Dr=Nr.createWebChannelTransport,Ar=Nr.ErrorCode,_r=Nr.EventType,xr=Nr.WebChannel,Or=Nr.XhrIo,Rr=t.SDK_VERSION,Pr=new d("@firebase/firestore");function Mr(){return Pr.logLevel===i.DEBUG?Ir.DEBUG:Pr.logLevel===i.SILENT?Ir.SILENT:Ir.ERROR}function Lr(e){switch(e){case Ir.DEBUG:Pr.logLevel=i.DEBUG;break;case Ir.ERROR:Pr.logLevel=i.ERROR;break;case Ir.SILENT:Pr.logLevel=i.SILENT;break;default:Pr.error("Firestore ("+Rr+"): Invalid value passed to `setLogLevel`")}}function Fr(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(Pr.logLevel<=i.DEBUG){var o=n.map(Vr);Pr.debug.apply(Pr,c(["Firestore ("+Rr+") ["+e+"]: "+t],o))}}function qr(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(Pr.logLevel<=i.ERROR){var r=t.map(Vr);Pr.error.apply(Pr,c(["Firestore ("+Rr+"): "+e],r))}}function Vr(e){if("string"==typeof e)return e;var t=jr.getPlatform();try{return t.formatJSON(e)}catch(t){return e}}function Ur(e){var t="FIRESTORE ("+Rr+") INTERNAL ASSERTION FAILED: "+e;throw qr(t),new Error(t)}function Br(e,t){e||Ur(t)}(kr=Ir=Ir||{})[kr.DEBUG=0]="DEBUG",kr[kr.ERROR=1]="ERROR",kr[kr.SILENT=2]="SILENT";var jr=(zr.setPlatform=function(e){zr.platform&&Ur("Platform already defined"),zr.platform=e},zr.getPlatform=function(){return zr.platform||Ur("Platform not set"),zr.platform},zr);function zr(){}function Qr(){return jr.getPlatform().emptyByteString}var Wr,Kr={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Gr=(r(Hr,Wr=Error),Hr);function Hr(e,t){var n=Wr.call(this,t)||this;return n.code=e,n.message=t,n.name="FirebaseError",n.toString=function(){return n.name+": [code="+n.code+"]: "+n.message},n}function Yr(e,t){function n(){var e="This constructor is private.";throw t&&(e+=" ",e+=t),new Gr(Kr.INVALID_ARGUMENT,e)}for(var r in n.prototype=e.prototype,e)e.hasOwnProperty(r)&&(n[r]=e[r]);return n}function $r(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Xr(e,t){return void 0!==e?e:t}function Jr(e,t){for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Number(n);isNaN(r)||t(r,e[n])}}function Zr(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function ei(e){for(var t in Br(null!=e&&"object"==typeof e,"isEmpty() expects object parameter."),e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function ti(e,t){if(0!==t.length)throw new Gr(Kr.INVALID_ARGUMENT,"Function "+e+"() does not support arguments, but was called with "+gi(t.length,"argument")+".")}function ni(e,t,n){if(t.length!==n)throw new Gr(Kr.INVALID_ARGUMENT,"Function "+e+"() requires "+gi(n,"argument")+", but was called with "+gi(t.length,"argument")+".")}function ri(e,t,n){if(t.length<n)throw new Gr(Kr.INVALID_ARGUMENT,"Function "+e+"() requires at least "+gi(n,"argument")+", but was called with "+gi(t.length,"argument")+".")}function ii(e,t,n,r){if(t.length<n||t.length>r)throw new Gr(Kr.INVALID_ARGUMENT,"Function "+e+"() requires between "+n+" and "+r+" arguments, but was called with "+gi(t.length,"argument")+".")}function oi(e,t,n,r){li(e,t,yi(n)+" argument",r)}function ai(e,t,n,r){void 0!==r&&oi(e,t,n,r)}function si(e,t,n,r){li(e,t,n+" option",r)}function ui(e,t,n,r){void 0!==r&&si(e,t,n,r)}function ci(e,t,n,r,i){void 0!==r&&function(e,t,n,r,i){for(var o=[],a=0,s=i;a<s.length;a++){var u=s[a];if(u===r)return;o.push(fi(u))}var c=fi(r);throw new Gr(Kr.INVALID_ARGUMENT,"Invalid value "+c+" provided to function "+e+'() for option "'+n+'". Acceptable values: '+o.join(", "))}(e,0,n,r,i)}function li(e,t,n,r){if(!("object"===t?hi(r):"non-empty string"===t?"string"==typeof r&&""!==r:typeof r===t)){var i=fi(r);throw new Gr(Kr.INVALID_ARGUMENT,"Function "+e+"() requires its "+n+" to be of type "+t+", but it was: "+i)}}function hi(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}function fi(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return 20<e.length&&(e=e.substring(0,20)+"..."),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"!=typeof e)return"function"==typeof e?"a function":Ur("Unknown wrong type: "+typeof e);if(e instanceof Array)return"an array";var t=function(e){if(e.constructor){var t=/function\s+([^\s(]+)\s*\(/.exec(e.constructor.toString());if(t&&1<t.length)return t[1]}return null}(e);return t?"a custom "+t+" object":"an object"}function di(e,t,n){if(void 0===n)throw new Gr(Kr.INVALID_ARGUMENT,"Function "+e+"() requires a valid "+yi(t)+" argument, but it was undefined.")}function pi(e,t,n){Zr(t,(function(t,r){if(n.indexOf(t)<0)throw new Gr(Kr.INVALID_ARGUMENT,"Unknown option '"+t+"' passed to function "+e+"(). Available options: "+n.join(", "))}))}function mi(e,t,n,r){var i=fi(r);return new Gr(Kr.INVALID_ARGUMENT,"Function "+e+"() requires its "+yi(n)+" argument to be a "+t+", but it was: "+i)}function yi(e){switch(e){case 1:return"first";case 2:return"second";case 3:return"third";default:return e+"th"}}function gi(e,t){return e+" "+t+(1===e?"":"s")}var vi=(bi.newId=function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t="",n=0;n<20;n++)t+=e.charAt(Math.floor(Math.random()*e.length));return Br(20===t.length,"Invalid auto ID: "+t),t},bi);function bi(){}function wi(e,t){return e<t?-1:t<e?1:0}function Ei(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(!e[n].isEqual(t[n]))return!1;return!0}function Si(e){return e+"\0"}function Ti(){if("undefined"==typeof Uint8Array)throw new Gr(Kr.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function Ci(){if(!jr.getPlatform().base64Available)throw new Gr(Kr.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var Ii=(ki.fromBase64String=function(e){ni("Blob.fromBase64String",arguments,1),oi("Blob.fromBase64String","string",1,e),Ci();try{return new ki(jr.getPlatform().atob(e))}catch(e){throw new Gr(Kr.INVALID_ARGUMENT,"Failed to construct Blob from Base64 string: "+e)}},ki.fromUint8Array=function(e){if(ni("Blob.fromUint8Array",arguments,1),Ti(),!(e instanceof Uint8Array))throw mi("Blob.fromUint8Array","Uint8Array",1,e);return new ki(Array.prototype.map.call(e,(function(e){return String.fromCharCode(e)})).join(""))},ki.prototype.toBase64=function(){return ni("Blob.toBase64",arguments,0),Ci(),jr.getPlatform().btoa(this._binaryString)},ki.prototype.toUint8Array=function(){ni("Blob.toUint8Array",arguments,0),Ti();for(var e=new Uint8Array(this._binaryString.length),t=0;t<this._binaryString.length;t++)e[t]=this._binaryString.charCodeAt(t);return e},ki.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},ki.prototype.isEqual=function(e){return this._binaryString===e._binaryString},ki.prototype._compareTo=function(e){return wi(this._binaryString,e._binaryString)},ki);function ki(e){Ci(),this._binaryString=e}var Ni=Yr(Ii,"Use Blob.fromUint8Array() or Blob.fromBase64String() instead."),Di=function(e,t,n,r,i){this.databaseId=e,this.persistenceKey=t,this.host=n,this.ssl=r,this.forceLongPolling=i},Ai="(default)",_i=(Object.defineProperty(xi.prototype,"isDefaultDatabase",{get:function(){return this.database===Ai},enumerable:!0,configurable:!0}),xi.prototype.isEqual=function(e){return e instanceof xi&&e.projectId===this.projectId&&e.database===this.database},xi.prototype.compareTo=function(e){return wi(this.projectId,e.projectId)||wi(this.database,e.database)},xi);function xi(e,t){this.projectId=e,this.database=t||Ai}var Oi=(Ri.prototype.setPreviousValue=function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue},Ri.prototype.next=function(){var e=++this.previousValue;return this.writeNewSequenceNumber&&this.writeNewSequenceNumber(e),e},Ri.INVALID=-1,Ri);function Ri(e,t){var n=this;this.previousValue=e,t&&(t.sequenceNumberHandler=function(e){return n.setPreviousValue(e)},this.writeNewSequenceNumber=function(e){return t.writeSequenceNumber(e)})}var Pi="__name__",Mi=(Object.defineProperty(Li.prototype,"length",{get:function(){return this.len},enumerable:!0,configurable:!0}),Li.prototype.isEqual=function(e){return 0===Li.comparator(this,e)},Li.prototype.child=function(e){var t=this.segments.slice(this.offset,this.limit());return e instanceof Li?e.forEach((function(e){t.push(e)})):t.push(e),this.construct(t)},Li.prototype.limit=function(){return this.offset+this.length},Li.prototype.popFirst=function(e){return e=void 0===e?1:e,Br(this.length>=e,"Can't call popFirst() with less segments"),this.construct(this.segments,this.offset+e,this.length-e)},Li.prototype.popLast=function(){return Br(!this.isEmpty(),"Can't call popLast() on empty path"),this.construct(this.segments,this.offset,this.length-1)},Li.prototype.firstSegment=function(){return Br(!this.isEmpty(),"Can't call firstSegment() on empty path"),this.segments[this.offset]},Li.prototype.lastSegment=function(){return this.get(this.length-1)},Li.prototype.get=function(e){return Br(e<this.length,"Index out of range"),this.segments[this.offset+e]},Li.prototype.isEmpty=function(){return 0===this.length},Li.prototype.isPrefixOf=function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0},Li.prototype.isImmediateParentOf=function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0},Li.prototype.forEach=function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])},Li.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},Li.comparator=function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),o=t.get(r);if(i<o)return-1;if(o<i)return 1}return e.length<t.length?-1:e.length>t.length?1:0},Li);function Li(e,t,n){void 0===t?t=0:t>e.length&&Ur("offset "+t+" out of range "+e.length),void 0===n?n=e.length-t:n>e.length-t&&Ur("length "+n+" out of range "+(e.length-t)),this.segments=e,this.offset=t,this.len=n}var Fi,qi=(r(Vi,Fi=Mi),Vi.prototype.construct=function(e,t,n){return new Vi(e,t,n)},Vi.prototype.canonicalString=function(){return this.toArray().join("/")},Vi.prototype.toString=function(){return this.canonicalString()},Vi.fromString=function(e){if(0<=e.indexOf("//"))throw new Gr(Kr.INVALID_ARGUMENT,"Invalid path ("+e+"). Paths must not contain // in them.");return new Vi(e.split("/").filter((function(e){return 0<e.length})))},Vi.EMPTY_PATH=new Vi([]),Vi);function Vi(){return null!==Fi&&Fi.apply(this,arguments)||this}var Ui,Bi=/^[_a-zA-Z][_a-zA-Z0-9]*$/,ji=(r(zi,Ui=Mi),zi.prototype.construct=function(e,t,n){return new zi(e,t,n)},zi.isValidIdentifier=function(e){return Bi.test(e)},zi.prototype.canonicalString=function(){return this.toArray().map((function(e){return e=e.replace("\\","\\\\").replace("`","\\`"),zi.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")},zi.prototype.toString=function(){return this.canonicalString()},zi.prototype.isKeyField=function(){return 1===this.length&&this.get(0)===Pi},zi.keyField=function(){return new zi([Pi])},zi.fromServerFormat=function(e){for(var t=[],n="",r=0,i=function(){if(0===n.length)throw new Gr(Kr.INVALID_ARGUMENT,"Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");t.push(n),n=""},o=!1;r<e.length;){var a=e[r];if("\\"===a){if(r+1===e.length)throw new Gr(Kr.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var s=e[r+1];if("\\"!==s&&"."!==s&&"`"!==s)throw new Gr(Kr.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=s,r+=2}else"`"===a?o=!o:"."!==a||o?n+=a:i(),r++}if(i(),o)throw new Gr(Kr.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new zi(t)},zi.EMPTY_PATH=new zi([]),zi);function zi(){return null!==Ui&&Ui.apply(this,arguments)||this}var Qi=(Wi.prototype.hasCollectionId=function(e){return 2<=this.path.length&&this.path.get(this.path.length-2)===e},Wi.prototype.isEqual=function(e){return null!==e&&0===qi.comparator(this.path,e.path)},Wi.prototype.toString=function(){return this.path.toString()},Wi.comparator=function(e,t){return qi.comparator(e.path,t.path)},Wi.isDocumentKey=function(e){return e.length%2==0},Wi.fromSegments=function(e){return new Wi(new qi(e.slice()))},Wi.fromPathString=function(e){return new Wi(qi.fromString(e))},Wi.EMPTY=new Wi(new qi([])),Wi);function Wi(e){this.path=e,Br(Wi.isDocumentKey(e),"Invalid DocumentKey with an odd number of segments: "+e.toArray().join("/"))}var Ki,Gi,Hi=function(){var e=this;this.promise=new Promise((function(t,n){e.resolve=t,e.reject=n}))};(Gi=Ki=Ki||{}).All="all",Gi.ListenStreamIdle="listen_stream_idle",Gi.ListenStreamConnectionBackoff="listen_stream_connection_backoff",Gi.WriteStreamIdle="write_stream_idle",Gi.WriteStreamConnectionBackoff="write_stream_connection_backoff",Gi.OnlineStateTimeout="online_state_timeout",Gi.ClientMetadataRefresh="client_metadata_refresh",Gi.LruGarbageCollection="lru_garbage_collection",Gi.RetryTransaction="retry_transaction";var Yi=($i.createAndSchedule=function(e,t,n,r,i){var o=new $i(e,t,Date.now()+n,r,i);return o.start(n),o},$i.prototype.start=function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)},$i.prototype.skipDelay=function(){return this.handleDelayElapsed()},$i.prototype.cancel=function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Gr(Kr.CANCELLED,"Operation cancelled"+(e?": "+e:""))))},$i.prototype.handleDelayElapsed=function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))},$i.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},$i);function $i(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Hi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.catch=this.deferred.promise.catch.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}var Xi=(Object.defineProperty(Ji.prototype,"isShuttingDown",{get:function(){return this._isShuttingDown},enumerable:!0,configurable:!0}),Ji.prototype.enqueueAndForget=function(e){this.enqueue(e)},Ji.prototype.enqueueAndForgetEvenAfterShutdown=function(e){this.verifyNotFailed(),this.enqueueInternal(e)},Ji.prototype.enqueueEvenAfterShutdown=function(e){return this.verifyNotFailed(),this.enqueueInternal(e)},Ji.prototype.enqueueAndInitiateShutdown=function(e){return s(this,void 0,void 0,(function(){return u(this,(function(t){switch(t.label){case 0:return this.verifyNotFailed(),this._isShuttingDown?[3,2]:(this._isShuttingDown=!0,[4,this.enqueueEvenAfterShutdown(e)]);case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},Ji.prototype.enqueue=function(e){return this.verifyNotFailed(),this._isShuttingDown?new Promise((function(e){})):this.enqueueInternal(e)},Ji.prototype.enqueueInternal=function(e){var t=this,n=this.tail.then((function(){return t.operationInProgress=!0,e().catch((function(e){t.failure=e,t.operationInProgress=!1;var n=e.stack||e.message||"";throw qr("INTERNAL UNHANDLED ERROR: ",n),n.indexOf("Firestore Test Simulated Error")<0&&setTimeout((function(){throw e}),0),e})).then((function(e){return t.operationInProgress=!1,e}))}));return this.tail=n},Ji.prototype.enqueueAfterDelay=function(e,t,n){var r=this;this.verifyNotFailed(),Br(0<=t,"Attempted to schedule an operation with a negative delay of "+t),-1<this.timerIdsToSkip.indexOf(e)&&(t=0);var i=Yi.createAndSchedule(this,e,t,n,(function(e){return r.removeDelayedOperation(e)}));return this.delayedOperations.push(i),i},Ji.prototype.verifyNotFailed=function(){this.failure&&Ur("AsyncQueue is already failed: "+(this.failure.stack||this.failure.message))},Ji.prototype.verifyOperationInProgress=function(){Br(this.operationInProgress,"verifyOpInProgress() called when no op in progress on this queue.")},Ji.prototype.drain=function(){return this.enqueueEvenAfterShutdown((function(){return Promise.resolve()}))},Ji.prototype.containsDelayedOperation=function(e){for(var t=0,n=this.delayedOperations;t<n.length;t++)if(n[t].timerId===e)return!0;return!1},Ji.prototype.runDelayedOperationsEarly=function(e){var t=this;return this.drain().then((function(){Br(e===Ki.All||t.containsDelayedOperation(e),"Attempted to drain to missing operation "+e),t.delayedOperations.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));for(var n=0,r=t.delayedOperations;n<r.length;n++){var i=r[n];if(i.skipDelay(),e!==Ki.All&&i.timerId===e)break}return t.drain()}))},Ji.prototype.skipDelaysForTimerId=function(e){this.timerIdsToSkip.push(e)},Ji.prototype.removeDelayedOperation=function(e){var t=this.delayedOperations.indexOf(e);Br(0<=t,"Delayed operation not found."),this.delayedOperations.splice(t,1)},Ji);function Ji(){this.tail=Promise.resolve(),this._isShuttingDown=!1,this.delayedOperations=[],this.failure=null,this.operationInProgress=!1,this.timerIdsToSkip=[]}var Zi="\x01",eo="\x01",to="\x10",no="\x11";function ro(e){for(var t="",n=0;n<e.length;n++)0<t.length&&(t=oo(t)),t=io(e.get(n),t);return oo(t)}function io(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var o=e.charAt(i);switch(o){case"\0":n+=Zi+to;break;case Zi:n+=Zi+no;break;default:n+=o}}return n}function oo(e){return e+Zi+eo}function ao(e){var t=e.length;if(Br(2<=t,"Invalid path "+e),2===t)return Br(e.charAt(0)===Zi&&e.charAt(1)===eo,"Non-empty path "+e+" had length 2"),qi.EMPTY_PATH;for(var n=t-2,r=[],i="",o=0;o<t;){var a=e.indexOf(Zi,o);switch((a<0||n<a)&&Ur('Invalid encoded resource path: "'+e+'"'),e.charAt(a+1)){case eo:var s=e.substring(o,a),u=void 0;0===i.length?u=s:(u=i+=s,i=""),r.push(u);break;case to:i+=e.substring(o,a),i+="\0";break;case no:i+=e.substring(o,a+1);break;default:Ur('Invalid encoded resource path: "'+e+'"')}o=a+2}return new qi(r)}var so=(uo.now=function(){return uo.fromMillis(Date.now())},uo.fromDate=function(e){return uo.fromMillis(e.getTime())},uo.fromMillis=function(e){var t=Math.floor(e/1e3);return new uo(t,1e6*(e-1e3*t))},uo.prototype.toDate=function(){return new Date(this.toMillis())},uo.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},uo.prototype._compareTo=function(e){return this.seconds===e.seconds?wi(this.nanoseconds,e.nanoseconds):wi(this.seconds,e.seconds)},uo.prototype.isEqual=function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds},uo.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},uo);function uo(e,t){if(this.seconds=e,(this.nanoseconds=t)<0)throw new Gr(Kr.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(1e9<=t)throw new Gr(Kr.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Gr(Kr.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(253402300800<=e)throw new Gr(Kr.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}var co=(lo.fromMicroseconds=function(e){var t=Math.floor(e/1e6);return new lo(new so(t,e%1e6*1e3))},lo.fromTimestamp=function(e){return new lo(e)},lo.forDeletedDoc=function(){return lo.MIN},lo.prototype.compareTo=function(e){return this.timestamp._compareTo(e.timestamp)},lo.prototype.isEqual=function(e){return this.timestamp.isEqual(e.timestamp)},lo.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},lo.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},lo.prototype.toTimestamp=function(){return this.timestamp},lo.MIN=new lo(new so(0,0)),lo);function lo(e){this.timestamp=e}var ho=(fo.prototype.insert=function(e,t){return new fo(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,yo.BLACK,null,null))},fo.prototype.remove=function(e){return new fo(this.comparator,this.root.remove(e,this.comparator).copy(null,null,yo.BLACK,null,null))},fo.prototype.get=function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:0<n&&(t=t.right)}return null},fo.prototype.indexOf=function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;n=r<0?n.left:(t+=n.left.size+1,n.right)}return-1},fo.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(fo.prototype,"size",{get:function(){return this.root.size},enumerable:!0,configurable:!0}),fo.prototype.minKey=function(){return this.root.minKey()},fo.prototype.maxKey=function(){return this.root.maxKey()},fo.prototype.inorderTraversal=function(e){return this.root.inorderTraversal(e)},fo.prototype.forEach=function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))},fo.prototype.toString=function(){var e=[];return this.inorderTraversal((function(t,n){return e.push(t+":"+n),!1})),"{"+e.join(", ")+"}"},fo.prototype.reverseTraversal=function(e){return this.root.reverseTraversal(e)},fo.prototype.getIterator=function(){return new po(this.root,null,this.comparator,!1)},fo.prototype.getIteratorFrom=function(e){return new po(this.root,e,this.comparator,!1)},fo.prototype.getReverseIterator=function(){return new po(this.root,null,this.comparator,!0)},fo.prototype.getReverseIteratorFrom=function(e){return new po(this.root,e,this.comparator,!0)},fo);function fo(e,t){this.comparator=e,this.root=t||yo.EMPTY}var po=(mo.prototype.getNext=function(){Br(0<this.nodeStack.length,"getNext() called on iterator when hasNext() is false.");var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t},mo.prototype.hasNext=function(){return 0<this.nodeStack.length},mo.prototype.peek=function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}},mo);function mo(e,t,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!e.isEmpty();)if(i=t?n(e.key,t):1,r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}var yo=(go.prototype.copy=function(e,t,n,r,i){return new go(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)},go.prototype.isEmpty=function(){return!1},go.prototype.inorderTraversal=function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)},go.prototype.reverseTraversal=function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)},go.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},go.prototype.minKey=function(){return this.min().key},go.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},go.prototype.insert=function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()},go.prototype.removeMin=function(){if(this.left.isEmpty())return go.EMPTY;var e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),(e=e.copy(null,null,null,e.left.removeMin(),null)).fixUp()},go.prototype.remove=function(e,t){var n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return go.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()},go.prototype.isRed=function(){return this.color},go.prototype.fixUp=function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e},go.prototype.moveRedLeft=function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e},go.prototype.moveRedRight=function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e},go.prototype.rotateLeft=function(){var e=this.copy(null,null,go.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},go.prototype.rotateRight=function(){var e=this.copy(null,null,go.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},go.prototype.colorFlip=function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)},go.prototype.checkMaxDepth=function(){var e=this.check();return Math.pow(2,e)<=this.size+1},go.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw Ur("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed())throw Ur("Right child of ("+this.key+","+this.value+") is red");var e=this.left.check();if(e!==this.right.check())throw Ur("Black depths differ");return e+(this.isRed()?0:1)},go.EMPTY=null,go.RED=!0,go.BLACK=!1,go);function go(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:go.RED,this.left=null!=r?r:go.EMPTY,this.right=null!=i?i:go.EMPTY,this.size=this.left.size+1+this.right.size}var vo=(Object.defineProperty(bo.prototype,"key",{get:function(){throw Ur("LLRBEmptyNode has no key.")},enumerable:!0,configurable:!0}),Object.defineProperty(bo.prototype,"value",{get:function(){throw Ur("LLRBEmptyNode has no value.")},enumerable:!0,configurable:!0}),Object.defineProperty(bo.prototype,"color",{get:function(){throw Ur("LLRBEmptyNode has no color.")},enumerable:!0,configurable:!0}),Object.defineProperty(bo.prototype,"left",{get:function(){throw Ur("LLRBEmptyNode has no left child.")},enumerable:!0,configurable:!0}),Object.defineProperty(bo.prototype,"right",{get:function(){throw Ur("LLRBEmptyNode has no right child.")},enumerable:!0,configurable:!0}),bo.prototype.copy=function(e,t,n,r,i){return this},bo.prototype.insert=function(e,t,n){return new yo(e,t)},bo.prototype.remove=function(e,t){return this},bo.prototype.isEmpty=function(){return!0},bo.prototype.inorderTraversal=function(e){return!1},bo.prototype.reverseTraversal=function(e){return!1},bo.prototype.minKey=function(){return null},bo.prototype.maxKey=function(){return null},bo.prototype.isRed=function(){return!1},bo.prototype.checkMaxDepth=function(){return!0},bo.prototype.check=function(){return 0},bo);function bo(){this.size=0}yo.EMPTY=new vo;var wo=(Eo.fromMapKeys=function(e){var t=new Eo(e.comparator);return e.forEach((function(e){t=t.add(e)})),t},Eo.prototype.has=function(e){return null!==this.data.get(e)},Eo.prototype.first=function(){return this.data.minKey()},Eo.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(Eo.prototype,"size",{get:function(){return this.data.size},enumerable:!0,configurable:!0}),Eo.prototype.indexOf=function(e){return this.data.indexOf(e)},Eo.prototype.forEach=function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))},Eo.prototype.forEachInRange=function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(0<=this.comparator(r.key,e[1]))return;t(r.key)}},Eo.prototype.forEachWhile=function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return},Eo.prototype.firstAfterOrEqual=function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null},Eo.prototype.getIterator=function(){return new So(this.data.getIterator())},Eo.prototype.getIteratorFrom=function(e){return new So(this.data.getIteratorFrom(e))},Eo.prototype.add=function(e){return this.copy(this.data.remove(e).insert(e,!0))},Eo.prototype.delete=function(e){return this.has(e)?this.copy(this.data.remove(e)):this},Eo.prototype.isEmpty=function(){return this.data.isEmpty()},Eo.prototype.unionWith=function(e){var t=this;return e.forEach((function(e){t=t.add(e)})),t},Eo.prototype.isEqual=function(e){if(!(e instanceof Eo))return!1;if(this.size!==e.size)return!1;for(var t=this.data.getIterator(),n=e.data.getIterator();t.hasNext();){var r=t.getNext().key,i=n.getNext().key;if(0!==this.comparator(r,i))return!1}return!0},Eo.prototype.toArray=function(){var e=[];return this.forEach((function(t){e.push(t)})),e},Eo.prototype.toString=function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"},Eo.prototype.copy=function(e){var t=new Eo(this.comparator);return t.data=e,t},Eo);function Eo(e){this.comparator=e,this.data=new ho(this.comparator)}var So=(To.prototype.getNext=function(){return this.iter.getNext().key},To.prototype.hasNext=function(){return this.iter.hasNext()},To);function To(e){this.iter=e}var Co=new ho(Qi.comparator);function Io(){return Co}function ko(){return Io()}var No=new ho(Qi.comparator);function Do(){return No}var Ao=new ho(Qi.comparator);function _o(){return Ao}var xo=new wo(Qi.comparator);function Oo(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=xo,r=0,i=e;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var Ro=new wo(wi);function Po(){return Ro}var Mo=(Lo.prototype.applyToRemoteDocument=function(e,t,n){t&&Br(t.key.isEqual(e),"applyToRemoteDocument: key "+e+" should match maybeDoc key\n        "+t.key);var r=n.mutationResults;Br(r.length===this.mutations.length,"Mismatch between mutations length\n      ("+this.mutations.length+") and mutation results length\n      ("+r.length+").");for(var i=0;i<this.mutations.length;i++){var o=this.mutations[i];if(o.key.isEqual(e)){var a=r[i];t=o.applyToRemoteDocument(t,a)}}return t},Lo.prototype.applyToLocalView=function(e,t){t&&Br(t.key.isEqual(e),"applyToLocalDocument: key "+e+" should match maybeDoc key\n        "+t.key);for(var n=0,r=this.baseMutations;n<r.length;n++)(s=r[n]).key.isEqual(e)&&(t=s.applyToLocalView(t,t,this.localWriteTime));for(var i=t,o=0,a=this.mutations;o<a.length;o++){var s;(s=a[o]).key.isEqual(e)&&(t=s.applyToLocalView(t,i,this.localWriteTime))}return t},Lo.prototype.applyToLocalDocumentSet=function(e){var t=this,n=e;return this.mutations.forEach((function(r){var i=t.applyToLocalView(r.key,e.get(r.key));i&&(n=n.insert(r.key,i))})),n},Lo.prototype.keys=function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),Oo())},Lo.prototype.isEqual=function(e){return this.batchId===e.batchId&&Ei(this.mutations,e.mutations)&&Ei(this.baseMutations,e.baseMutations)},Lo);function Lo(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,Br(0<(this.mutations=r).length,"Cannot create an empty mutation batch")}var Fo=(qo.from=function(e,t,n,r){Br(e.mutations.length===n.length,"Mutations sent "+e.mutations.length+" must equal results received "+n.length);for(var i=_o(),o=e.mutations,a=0;a<o.length;a++)i=i.insert(o[a].key,n[a].version);return new qo(e,t,n,r,i)},qo);function qo(e,t,n,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.streamToken=r,this.docVersions=i}var Vo=(Uo.prototype.catch=function(e){return this.next(void 0,e)},Uo.prototype.next=function(e,t){var n=this;return this.callbackAttached&&Ur("Called next() or catch() twice for PersistencePromise"),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Uo((function(r,i){n.nextCallback=function(t){n.wrapSuccess(e,t).next(r,i)},n.catchCallback=function(e){n.wrapFailure(t,e).next(r,i)}}))},Uo.prototype.toPromise=function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))},Uo.prototype.wrapUserFunction=function(e){try{var t=e();return t instanceof Uo?t:Uo.resolve(t)}catch(e){return Uo.reject(e)}},Uo.prototype.wrapSuccess=function(e,t){return e?this.wrapUserFunction((function(){return e(t)})):Uo.resolve(t)},Uo.prototype.wrapFailure=function(e,t){return e?this.wrapUserFunction((function(){return e(t)})):Uo.reject(t)},Uo.resolve=function(e){return new Uo((function(t,n){t(e)}))},Uo.reject=function(e){return new Uo((function(t,n){n(e)}))},Uo.waitFor=function(e){return new Uo((function(t,n){var r=0,i=0,o=!1;e.forEach((function(e){++r,e.next((function(){++i,o&&i===r&&t()}),(function(e){return n(e)}))})),o=!0,i===r&&t()}))},Uo.or=function(e){for(var t=Uo.resolve(!1),n=function(e){t=t.next((function(t){return t?Uo.resolve(t):e()}))},r=0,i=e;r<i.length;r++)n(i[r]);return t},Uo.forEach=function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)},Uo);function Uo(e){var t=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((function(e){t.isDone=!0,t.result=e,t.nextCallback&&t.nextCallback(e)}),(function(e){t.isDone=!0,t.error=e,t.catchCallback&&t.catchCallback(e)}))}var Bo,jo,zo=(Qo.forUser=function(e,t,n,r){return Br(""!==e.uid,"UserID must not be an empty string."),new Qo(e.isAuthenticated()?e.uid:"",t,n,r)},Qo.prototype.checkEmpty=function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Ho(e).iterate({index:mu.userMutationsIndex,range:n},(function(e,n,r){t=!1,r.done()})).next((function(){return t}))},Qo.prototype.acknowledgeBatch=function(e,t,n){return this.getMutationQueueMetadata(e).next((function(t){return t.lastStreamToken=Go(n),$o(e).put(t)}))},Qo.prototype.getLastStreamToken=function(e){return this.getMutationQueueMetadata(e).next((function(e){return e.lastStreamToken}))},Qo.prototype.setLastStreamToken=function(e,t){return this.getMutationQueueMetadata(e).next((function(n){return n.lastStreamToken=Go(t),$o(e).put(n)}))},Qo.prototype.addMutationBatch=function(e,t,n,r){var i=this,o=Yo(e),a=Ho(e);return a.add({}).next((function(s){Br("number"==typeof s,"Auto-generated key is not a number");for(var u=new Mo(s,t,n,r),c=i.serializer.toDbMutationBatch(i.userId,u),l=[],h=new wo((function(e,t){return wi(e.canonicalString(),t.canonicalString())})),f=0,d=r;f<d.length;f++){var p=d[f],m=gu.key(i.userId,p.key.path,s);h=h.add(p.key.path.popLast()),l.push(a.put(c)),l.push(o.put(m,gu.PLACEHOLDER))}return h.forEach((function(t){l.push(i.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((function(){i.documentKeysByBatchId[s]=u.keys()})),Vo.waitFor(l).next((function(){return u}))}))},Qo.prototype.lookupMutationBatch=function(e,t){var n=this;return Ho(e).get(t).next((function(e){return e?(Br(e.userId===n.userId,"Unexpected user '"+e.userId+"' for mutation batch "+t),n.serializer.fromDbMutationBatch(e)):null}))},Qo.prototype.lookupMutationKeys=function(e,t){var n=this;return this.documentKeysByBatchId[t]?Vo.resolve(this.documentKeysByBatchId[t]):this.lookupMutationBatch(e,t).next((function(e){if(e){var r=e.keys();return n.documentKeysByBatchId[t]=r}return null}))},Qo.prototype.getNextMutationBatchAfterBatchId=function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return Ho(e).iterate({index:mu.userMutationsIndex,range:i},(function(e,t,i){t.userId===n.userId&&(Br(t.batchId>=r,"Should have found mutation after "+r),o=n.serializer.fromDbMutationBatch(t)),i.done()})).next((function(){return o}))},Qo.prototype.getHighestUnacknowledgedBatchId=function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return Ho(e).iterate({index:mu.userMutationsIndex,range:t,reverse:!0},(function(e,t,r){n=t.batchId,r.done()})).next((function(){return n}))},Qo.prototype.getAllMutationBatches=function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Ho(e).loadAll(mu.userMutationsIndex,n).next((function(e){return e.map((function(e){return t.serializer.fromDbMutationBatch(e)}))}))},Qo.prototype.getAllMutationBatchesAffectingDocumentKey=function(e,t){var n=this,r=gu.prefixForPath(this.userId,t.path),i=IDBKeyRange.lowerBound(r),o=[];return Yo(e).iterate({range:i},(function(r,i,a){var s=r[0],u=r[1],c=r[2],l=ao(u);if(s===n.userId&&t.path.isEqual(l))return Ho(e).get(c).next((function(e){if(!e)throw Ur("Dangling document-mutation reference found: "+r+" which points to "+c);Br(e.userId===n.userId,"Unexpected user '"+e.userId+"' for mutation batch "+c),o.push(n.serializer.fromDbMutationBatch(e))}));a.done()})).next((function(){return o}))},Qo.prototype.getAllMutationBatchesAffectingDocumentKeys=function(e,t){var n=this,r=new wo(wi),i=[];return t.forEach((function(t){var o=gu.prefixForPath(n.userId,t.path),a=IDBKeyRange.lowerBound(o),s=Yo(e).iterate({range:a},(function(e,i,o){var a=e[0],s=e[1],u=e[2],c=ao(s);a===n.userId&&t.path.isEqual(c)?r=r.add(u):o.done()}));i.push(s)})),Vo.waitFor(i).next((function(){return n.lookupMutationBatches(e,r)}))},Qo.prototype.getAllMutationBatchesAffectingQuery=function(e,t){var n=this;Br(!t.isDocumentQuery(),"Document queries shouldn't go down this path"),Br(!t.isCollectionGroupQuery(),"CollectionGroup queries should be handled in LocalDocumentsView");var r=t.path,i=r.length+1,o=gu.prefixForPath(this.userId,r),a=IDBKeyRange.lowerBound(o),s=new wo(wi);return Yo(e).iterate({range:a},(function(e,t,o){var a=e[0],u=e[1],c=e[2],l=ao(u);a===n.userId&&r.isPrefixOf(l)?l.length===i&&(s=s.add(c)):o.done()})).next((function(){return n.lookupMutationBatches(e,s)}))},Qo.prototype.lookupMutationBatches=function(e,t){var n=this,r=[],i=[];return t.forEach((function(t){i.push(Ho(e).get(t).next((function(e){if(null===e)throw Ur("Dangling document-mutation reference found, which points to "+t);Br(e.userId===n.userId,"Unexpected user '"+e.userId+"' for mutation batch "+t),r.push(n.serializer.fromDbMutationBatch(e))})))})),Vo.waitFor(i).next((function(){return r}))},Qo.prototype.removeMutationBatch=function(e,t){var n=this;return Ko(e.simpleDbTransaction,this.userId,t).next((function(r){return e.addOnCommittedListener((function(){n.removeCachedMutationKeys(t.batchId)})),Vo.forEach(r,(function(t){return n.referenceDelegate.removeMutationReference(e,t)}))}))},Qo.prototype.removeCachedMutationKeys=function(e){delete this.documentKeysByBatchId[e]},Qo.prototype.performConsistencyCheck=function(e){var t=this;return this.checkEmpty(e).next((function(n){if(!n)return Vo.resolve();var r=IDBKeyRange.lowerBound(gu.prefixForUser(t.userId)),i=[];return Yo(e).iterate({range:r},(function(e,n,r){if(e[0]===t.userId){var o=ao(e[1]);i.push(o)}else r.done()})).next((function(){Br(0===i.length,"Document leak -- detected dangling mutation references when queue is empty. Dangling keys: "+i.map((function(e){return e.canonicalString()})))}))}))},Qo.prototype.containsKey=function(e,t){return Wo(e,this.userId,t)},Qo.prototype.getMutationQueueMetadata=function(e){var t=this;return $o(e).get(this.userId).next((function(e){return e||new du(t.userId,-1,"")}))},Qo);function Qo(e,t,n,r){this.userId=e,this.serializer=t,this.indexManager=n,this.referenceDelegate=r,this.documentKeysByBatchId={}}function Wo(e,t,n){var r=gu.prefixForPath(t,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),a=!1;return Yo(e).iterate({range:o,keysOnly:!0},(function(e,n,r){var o=e[0],s=e[1];e[2],o===t&&s===i&&(a=!0),r.done()})).next((function(){return a}))}function Ko(e,t,n){var r=e.store(mu.store),i=e.store(gu.store),o=[],a=IDBKeyRange.only(n.batchId),s=0,u=r.iterate({range:a},(function(e,t,n){return s++,n.delete()}));o.push(u.next((function(){Br(1===s,"Dangling document-mutation reference found: Missing batch "+n.batchId)})));for(var c=[],l=0,h=n.mutations;l<h.length;l++){var f=h[l],d=gu.key(t,f.key.path,n.batchId);o.push(i.delete(d)),c.push(f.key)}return Vo.waitFor(o).next((function(){return c}))}function Go(e){return e instanceof Uint8Array?(Br("YES"===Object({NODE_ENV:"production",PUBLIC_URL:"/reactjs"}).USE_MOCK_PERSISTENCE,"Persisting non-string stream tokens is only supported with mock persistence."),e.toString()):e}function Ho(e){return lc.getStore(e,mu.store)}function Yo(e){return lc.getStore(e,gu.store)}function $o(e){return lc.getStore(e,du.store)}(jo=Bo=Bo||{})[jo.QueryCache=0]="QueryCache",jo[jo.SyncEngine=1]="SyncEngine";var Xo=(Jo.prototype.next=function(){var e=this.nextId;return this.nextId+=2,e},Jo.prototype.after=function(e){return this.seek(e+2),this.next()},Jo.prototype.seek=function(e){Br((1&e)===this.generatorId,"Cannot supply target ID from different generator ID"),this.nextId=e},Jo.forQueryCache=function(){return new Jo(Bo.QueryCache,2)},Jo.forSyncEngine=function(){return new Jo(Bo.SyncEngine)},Jo);function Jo(e,t){Br((1&(this.generatorId=e))===e,"Generator ID "+e+" contains more than 1 reserved bits"),this.seek(void 0!==t?t:this.generatorId)}var Zo="SimpleDb",ea=(ta.openOrCreate=function(e,t,n){return Br(ta.isAvailable(),"IndexedDB not supported in current environment."),Fr(Zo,"Opening database:",e),new Vo((function(r,i){var o=window.indexedDB.open(e,t);o.onsuccess=function(e){var t=e.target.result;r(new ta(t))},o.onblocked=function(){i(new Gr(Kr.FAILED_PRECONDITION,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},o.onerror=function(e){var t=e.target.error;"VersionError"===t.name?i(new Gr(Kr.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):i(t)},o.onupgradeneeded=function(t){Fr(Zo,'Database "'+e+'" requires upgrade from version:',t.oldVersion);var r=t.target.result;n.createOrUpgrade(r,o.transaction,t.oldVersion,su).next((function(){Fr(Zo,"Database upgrade to version "+su+" complete")}))}})).toPromise()},ta.delete=function(e){return Fr(Zo,"Removing database:",e),ua(window.indexedDB.deleteDatabase(e)).toPromise()},ta.isAvailable=function(){if("undefined"==typeof window||null==window.indexedDB)return!1;if(void 0===window.navigator)return"YES"===Object({NODE_ENV:"production",PUBLIC_URL:"/reactjs"}).USE_MOCK_PERSISTENCE;var e=m(),t=ta.getIOSVersion(e),n=0<t&&t<10,r=ta.getAndroidVersion(e),i=0<r&&r<4.5;return!(0<e.indexOf("MSIE ")||0<e.indexOf("Trident/")||0<e.indexOf("Edge/")||n||i)},ta.getStore=function(e,t){return e.store(t)},ta.getIOSVersion=function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)},ta.getAndroidVersion=function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)},ta.prototype.setVersionChangeListener=function(e){this.db.onversionchange=function(t){return e(t)}},ta.prototype.runTransaction=function(e,t,n){return s(this,void 0,void 0,(function(){var r,i,o,a,s,c;return u(this,(function(l){switch(l.label){case 0:r=e.startsWith("readonly"),i=e.endsWith("idempotent"),o=0,a=function(){var e,a,c,l;return u(this,(function(u){switch(u.label){case 0:++o,e=ia.open(s.db,r?"readonly":"readwrite",t),u.label=1;case 1:return u.trys.push([1,3,,4]),(a=n(e).catch((function(t){return e.abort(t),Vo.reject(t)})).toPromise()).catch((function(){})),[4,e.completionPromise];case 2:return u.sent(),[2,{value:a}];case 3:return c=u.sent(),l=i&&function(e){return"undefined"!=typeof DOMException&&e instanceof DOMException||"DOMException"===e.constructor.name}(c)&&o<3,Fr("Transaction failed with error: %s. Retrying: %s.",c.message,l),l?[3,4]:[2,{value:Promise.reject(c)}];case 4:return[2]}}))},s=this,l.label=1;case 1:return[5,a()];case 2:return"object"==typeof(c=l.sent())?[2,c.value]:[3,1];case 3:return[2]}}))}))},ta.prototype.close=function(){this.db.close()},ta);function ta(e){this.db=e,12.2===ta.getIOSVersion(m())&&qr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}var na=(Object.defineProperty(ra.prototype,"isDone",{get:function(){return this.shouldStop},enumerable:!0,configurable:!0}),Object.defineProperty(ra.prototype,"skipToKey",{get:function(){return this.nextKey},enumerable:!0,configurable:!0}),Object.defineProperty(ra.prototype,"cursor",{set:function(e){this.dbCursor=e},enumerable:!0,configurable:!0}),ra.prototype.done=function(){this.shouldStop=!0},ra.prototype.skip=function(e){this.nextKey=e},ra.prototype.delete=function(){return ua(this.dbCursor.delete())},ra);function ra(e){this.dbCursor=e,this.shouldStop=!1,this.nextKey=null}var ia=(oa.open=function(e,t,n){return new oa(e.transaction(n,t))},Object.defineProperty(oa.prototype,"completionPromise",{get:function(){return this.completionDeferred.promise},enumerable:!0,configurable:!0}),oa.prototype.abort=function(e){e&&this.completionDeferred.reject(e),this.aborted||(Fr(Zo,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},oa.prototype.store=function(e){var t=this.transaction.objectStore(e);return Br(!!t,"Object store not part of transaction: "+e),new aa(t)},oa);function oa(e){var t=this;this.transaction=e,this.aborted=!1,this.completionDeferred=new Hi,this.transaction.oncomplete=function(){t.completionDeferred.resolve()},this.transaction.onabort=function(){e.error?t.completionDeferred.reject(e.error):t.completionDeferred.resolve()},this.transaction.onerror=function(e){var n=la(e.target.error);t.completionDeferred.reject(n)}}var aa=(sa.prototype.put=function(e,t){return ua(void 0!==t?(Fr(Zo,"PUT",this.store.name,e,t),this.store.put(t,e)):(Fr(Zo,"PUT",this.store.name,"<auto-key>",e),this.store.put(e)))},sa.prototype.add=function(e){return Fr(Zo,"ADD",this.store.name,e,e),ua(this.store.add(e))},sa.prototype.get=function(e){var t=this;return ua(this.store.get(e)).next((function(n){return void 0===n&&(n=null),Fr(Zo,"GET",t.store.name,e,n),n}))},sa.prototype.delete=function(e){return Fr(Zo,"DELETE",this.store.name,e),ua(this.store.delete(e))},sa.prototype.count=function(){return Fr(Zo,"COUNT",this.store.name),ua(this.store.count())},sa.prototype.loadAll=function(e,t){var n=this.cursor(this.options(e,t)),r=[];return this.iterateCursor(n,(function(e,t){r.push(t)})).next((function(){return r}))},sa.prototype.deleteAll=function(e,t){Fr(Zo,"DELETE ALL",this.store.name);var n=this.options(e,t);n.keysOnly=!1;var r=this.cursor(n);return this.iterateCursor(r,(function(e,t,n){return n.delete()}))},sa.prototype.iterate=function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.iterateCursor(r,t)},sa.prototype.iterateSerial=function(e){var t=this.cursor({});return new Vo((function(n,r){t.onerror=function(e){var t=la(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next((function(e){e?r.continue():n()})):n()}}))},sa.prototype.iterateCursor=function(e,t){var n=[];return new Vo((function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var o=new na(i),a=t(i.primaryKey,i.value,o);if(a instanceof Vo){var s=a.catch((function(e){return o.done(),Vo.reject(e)}));n.push(s)}o.isDone?r():null===o.skipToKey?i.continue():i.continue(o.skipToKey)}else r()}})).next((function(){return Vo.waitFor(n)}))},sa.prototype.options=function(e,t){var n=void 0;return void 0!==e&&("string"==typeof e?n=e:(Br(void 0===t,"3rd argument must not be defined if 2nd is a range."),t=e)),{index:n,range:t}},sa.prototype.cursor=function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.keysOnly?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)},sa);function sa(e){this.store=e}function ua(e){return new Vo((function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){var t=la(e.target.error);n(t)}}))}var ca=!1;function la(e){var t=ea.getIOSVersion(m());if(12.2<=t&&t<13){var n="An internal error was encountered in the Indexed Database server";if(0<=e.message.indexOf(n)){var r=new Gr("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return ca||(ca=!0,setTimeout((function(){throw r}),0)),r}}return e}var ha=(fa.prototype.allocateTargetId=function(e){var t=this;return this.retrieveMetadata(e).next((function(n){return n.highestTargetId=t.targetIdGenerator.after(n.highestTargetId),t.saveMetadata(e,n).next((function(){return n.highestTargetId}))}))},fa.prototype.getLastRemoteSnapshotVersion=function(e){return this.retrieveMetadata(e).next((function(e){return co.fromTimestamp(new so(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))}))},fa.prototype.getHighestSequenceNumber=function(e){return ma(e.simpleDbTransaction)},fa.prototype.setTargetsMetadata=function(e,t,n){var r=this;return this.retrieveMetadata(e).next((function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.saveMetadata(e,i)}))},fa.prototype.addQueryData=function(e,t){var n=this;return this.saveQueryData(e,t).next((function(){return n.retrieveMetadata(e).next((function(r){return r.targetCount+=1,n.updateMetadataFromQueryData(t,r),n.saveMetadata(e,r)}))}))},fa.prototype.updateQueryData=function(e,t){return this.saveQueryData(e,t)},fa.prototype.removeQueryData=function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next((function(){return da(e).delete(t.targetId)})).next((function(){return n.retrieveMetadata(e)})).next((function(t){return Br(0<t.targetCount,"Removing from an empty query cache"),t.targetCount-=1,n.saveMetadata(e,t)}))},fa.prototype.removeTargets=function(e,t,n){var r=this,i=0,o=[];return da(e).iterate((function(a,s){var u=r.serializer.fromDbTarget(s);u.sequenceNumber<=t&&null===n.get(u.targetId)&&(i++,o.push(r.removeQueryData(e,u)))})).next((function(){return Vo.waitFor(o)})).next((function(){return i}))},fa.prototype.forEachTarget=function(e,t){var n=this;return da(e).iterate((function(e,r){var i=n.serializer.fromDbTarget(r);t(i)}))},fa.prototype.retrieveMetadata=function(e){return pa(e.simpleDbTransaction)},fa.prototype.saveMetadata=function(e,t){return function(e){return lc.getStore(e,Au.store)}(e).put(Au.key,t)},fa.prototype.saveQueryData=function(e,t){return da(e).put(this.serializer.toDbTarget(t))},fa.prototype.updateMetadataFromQueryData=function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n},fa.prototype.getQueryCount=function(e){return this.retrieveMetadata(e).next((function(e){return e.targetCount}))},fa.prototype.getQueryData=function(e,t){var n=this,r=t.canonicalId(),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),o=null;return da(e).iterate({range:i,index:Iu.queryTargetsIndexName},(function(e,r,i){var a=n.serializer.fromDbTarget(r);t.isEqual(a.query)&&(o=a,i.done())})).next((function(){return o}))},fa.prototype.addMatchingKeys=function(e,t,n){var r=this,i=[],o=ya(e);return t.forEach((function(t){var a=ro(t.path);i.push(o.put(new Nu(n,a))),i.push(r.referenceDelegate.addReference(e,t))})),Vo.waitFor(i)},fa.prototype.removeMatchingKeys=function(e,t,n){var r=this,i=ya(e);return Vo.forEach(t,(function(t){var o=ro(t.path);return Vo.waitFor([i.delete([n,o]),r.referenceDelegate.removeReference(e,t)])}))},fa.prototype.removeMatchingKeysForTargetId=function(e,t){var n=ya(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)},fa.prototype.getMatchingKeysForTargetId=function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=ya(e),i=Oo();return r.iterate({range:n,keysOnly:!0},(function(e,t,n){var r=ao(e[1]),o=new Qi(r);i=i.add(o)})).next((function(){return i}))},fa.prototype.containsKey=function(e,t){var n=ro(t.path),r=IDBKeyRange.bound([n],[Si(n)],!1,!0),i=0;return ya(e).iterate({index:Nu.documentTargetsIndex,keysOnly:!0,range:r},(function(e,t,n){var r=e[0];e[1],0!==r&&(i++,n.done())})).next((function(){return 0<i}))},fa.prototype.getQueryDataForTarget=function(e,t){var n=this;return da(e).get(t).next((function(e){return e?n.serializer.fromDbTarget(e):null}))},fa);function fa(e,t){this.referenceDelegate=e,this.serializer=t,this.targetIdGenerator=Xo.forQueryCache()}function da(e){return lc.getStore(e,Iu.store)}function pa(e){return ea.getStore(e,Au.store).get(Au.key).next((function(e){return Br(null!==e,"Missing metadata row."),e}))}function ma(e){return pa(e).next((function(e){return e.highestListenSequenceNumber}))}function ya(e){return lc.getStore(e,Nu.store)}var ga=(va.fromSet=function(e){return new va(e)},va.fromArray=function(e){var t=new wo(ji.comparator);return e.forEach((function(e){return t=t.add(e)})),new va(t)},va.prototype.covers=function(e){var t=!1;return this.fields.forEach((function(n){n.isPrefixOf(e)&&(t=!0)})),t},va.prototype.isEqual=function(e){return this.fields.isEqual(e.fields)},va);function va(e){this.fields=e}var ba=(wa.prototype.isEqual=function(e){return this.field.isEqual(e.field)&&this.transform.isEqual(e.transform)},wa);function wa(e,t){this.field=e,this.transform=t}var Ea,Sa,Ta=function(e,t){this.version=e,this.transformResults=t};(Sa=Ea=Ea||{})[Sa.Set=0]="Set",Sa[Sa.Patch=1]="Patch",Sa[Sa.Transform=2]="Transform",Sa[Sa.Delete=3]="Delete";var Ca=(Ia.exists=function(e){return new Ia(void 0,e)},Ia.updateTime=function(e){return new Ia(e)},Object.defineProperty(Ia.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!0,configurable:!0}),Ia.prototype.isValidFor=function(e){return void 0!==this.updateTime?e instanceof Fs&&e.version.isEqual(this.updateTime):void 0!==this.exists?this.exists===e instanceof Fs:(Br(this.isNone,"Precondition should be empty"),!0)},Ia.prototype.isEqual=function(e){return function(e,t){return null!=e?!(!t||!e.isEqual(t)):e===t}(this.updateTime,e.updateTime)&&this.exists===e.exists},Ia.NONE=new Ia,Ia);function Ia(e,t){this.updateTime=e,this.exists=t,Br(void 0===e||void 0===t,'Precondition can specify "exists" or "updateTime" but not both')}var ka=(Na.prototype.verifyKeyMatches=function(e){null!=e&&Br(e.key.isEqual(this.key),"Can only apply a mutation to a document with the same key")},Na.getPostMutationVersion=function(e){return e instanceof Fs?e.version:co.MIN},Na);function Na(){}var Da,Aa=(r(_a,Da=ka),_a.prototype.applyToRemoteDocument=function(e,t){this.verifyKeyMatches(e),Br(null==t.transformResults,"Transform results received by SetMutation.");var n=t.version;return new Fs(this.key,n,{hasCommittedMutations:!0},this.value)},_a.prototype.applyToLocalView=function(e,t,n){if(this.verifyKeyMatches(e),!this.precondition.isValidFor(e))return e;var r=ka.getPostMutationVersion(e);return new Fs(this.key,r,{hasLocalMutations:!0},this.value)},_a.prototype.extractBaseValue=function(e){return null},_a.prototype.isEqual=function(e){return e instanceof _a&&this.key.isEqual(e.key)&&this.value.isEqual(e.value)&&this.precondition.isEqual(e.precondition)},_a);function _a(e,t,n){var r=Da.call(this)||this;return r.key=e,r.value=t,r.precondition=n,r.type=Ea.Set,r}var xa,Oa=(r(Ra,xa=ka),Ra.prototype.applyToRemoteDocument=function(e,t){if(this.verifyKeyMatches(e),Br(null==t.transformResults,"Transform results received by PatchMutation."),!this.precondition.isValidFor(e))return new zs(this.key,t.version);var n=this.patchDocument(e);return new Fs(this.key,t.version,{hasCommittedMutations:!0},n)},Ra.prototype.applyToLocalView=function(e,t,n){if(this.verifyKeyMatches(e),!this.precondition.isValidFor(e))return e;var r=ka.getPostMutationVersion(e),i=this.patchDocument(e);return new Fs(this.key,r,{hasLocalMutations:!0},i)},Ra.prototype.extractBaseValue=function(e){return null},Ra.prototype.isEqual=function(e){return e instanceof Ra&&this.key.isEqual(e.key)&&this.fieldMask.isEqual(e.fieldMask)&&this.precondition.isEqual(e.precondition)},Ra.prototype.patchDocument=function(e){var t;return t=e instanceof Fs?e.data():As.EMPTY,this.patchObject(t)},Ra.prototype.patchObject=function(e){var t=this;return this.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=t.data.field(n);e=null!==r?e.set(n,r):e.delete(n)}})),e},Ra);function Ra(e,t,n,r){var i=xa.call(this)||this;return i.key=e,i.data=t,i.fieldMask=n,i.precondition=r,i.type=Ea.Patch,i}var Pa,Ma=(r(La,Pa=ka),La.prototype.applyToRemoteDocument=function(e,t){if(this.verifyKeyMatches(e),Br(null!=t.transformResults,"Transform results missing for TransformMutation."),!this.precondition.isValidFor(e))return new zs(this.key,t.version);var n=this.requireDocument(e),r=this.serverTransformResults(e,t.transformResults),i=t.version,o=this.transformObject(n.data(),r);return new Fs(this.key,i,{hasCommittedMutations:!0},o)},La.prototype.applyToLocalView=function(e,t,n){if(this.verifyKeyMatches(e),!this.precondition.isValidFor(e))return e;var r=this.requireDocument(e),i=this.localTransformResults(n,e,t),o=this.transformObject(r.data(),i);return new Fs(this.key,r.version,{hasLocalMutations:!0},o)},La.prototype.extractBaseValue=function(e){for(var t=null,n=0,r=this.fieldTransforms;n<r.length;n++){var i=r[n],o=e instanceof Fs?e.field(i.field):void 0,a=i.transform.computeBaseValue(o||null);null!=a&&(t=null==t?As.EMPTY.set(i.field,a):t.set(i.field,a))}return t},La.prototype.isEqual=function(e){return e instanceof La&&this.key.isEqual(e.key)&&Ei(this.fieldTransforms,e.fieldTransforms)&&this.precondition.isEqual(e.precondition)},La.prototype.requireDocument=function(e){Br(e instanceof Fs,"Unknown MaybeDocument type "+e);var t=e;return Br(t.key.isEqual(this.key),"Can only transform a document with the same key"),t},La.prototype.serverTransformResults=function(e,t){var n=[];Br(this.fieldTransforms.length===t.length,"server transform result count ("+t.length+") should match field transform count ("+this.fieldTransforms.length+")");for(var r=0;r<t.length;r++){var i=this.fieldTransforms[r],o=i.transform,a=null;e instanceof Fs&&(a=e.field(i.field)),n.push(o.applyToRemoteDocument(a,t[r]))}return n},La.prototype.localTransformResults=function(e,t,n){for(var r=[],i=0,o=this.fieldTransforms;i<o.length;i++){var a=o[i],s=a.transform,u=null;t instanceof Fs&&(u=t.field(a.field)),null===u&&n instanceof Fs&&(u=n.field(a.field)),r.push(s.applyToLocalView(u,e))}return r},La.prototype.transformObject=function(e,t){Br(t.length===this.fieldTransforms.length,"TransformResults length mismatch.");for(var n=0;n<this.fieldTransforms.length;n++){var r=this.fieldTransforms[n].field;e=e.set(r,t[n])}return e},La);function La(e,t){var n=Pa.call(this)||this;return n.key=e,n.fieldTransforms=t,n.type=Ea.Transform,n.precondition=Ca.exists(!0),n}var Fa,qa,Va,Ua,Ba,ja=(r(za,Fa=ka),za.prototype.applyToRemoteDocument=function(e,t){return this.verifyKeyMatches(e),Br(null==t.transformResults,"Transform results received by DeleteMutation."),new Us(this.key,t.version,{hasCommittedMutations:!0})},za.prototype.applyToLocalView=function(e,t,n){return this.verifyKeyMatches(e),this.precondition.isValidFor(e)?(e&&Br(e.key.isEqual(this.key),"Can only apply mutation to document with same key"),new Us(this.key,co.forDeletedDoc())):e},za.prototype.extractBaseValue=function(e){return null},za.prototype.isEqual=function(e){return e instanceof za&&this.key.isEqual(e.key)&&this.precondition.isEqual(e.precondition)},za);function za(e,t){var n=Fa.call(this)||this;return n.key=e,n.precondition=t,n.type=Ea.Delete,n}(Va=qa=qa||{})[Va.NullValue=0]="NullValue",Va[Va.BooleanValue=1]="BooleanValue",Va[Va.NumberValue=2]="NumberValue",Va[Va.TimestampValue=3]="TimestampValue",Va[Va.StringValue=4]="StringValue",Va[Va.BlobValue=5]="BlobValue",Va[Va.RefValue=6]="RefValue",Va[Va.GeoPointValue=7]="GeoPointValue",Va[Va.ArrayValue=8]="ArrayValue",Va[Va.ObjectValue=9]="ObjectValue",(Ba=Ua=Ua||{})[Ba.Default=0]="Default",Ba[Ba.Estimate=1]="Estimate",Ba[Ba.Previous=2]="Previous";var Qa=(Wa.fromSnapshotOptions=function(e,t){switch(e.serverTimestamps){case"estimate":return new Wa(Ua.Estimate,t);case"previous":return new Wa(Ua.Previous,t);case"none":case void 0:return new Wa(Ua.Default,t);default:return Ur("fromSnapshotOptions() called with invalid options.")}},Wa);function Wa(e,t){this.serverTimestampBehavior=e,this.timestampsInSnapshots=t}var Ka=(Ga.prototype.toString=function(){var e=this.value();return null===e?"null":e.toString()},Ga.prototype.defaultCompareTo=function(e){return Br(this.typeOrder!==e.typeOrder,"Default compareTo should not be used for values of same type."),wi(this.typeOrder,e.typeOrder)},Ga);function Ga(){}var Ha,Ya=(r($a,Ha=Ka),$a.prototype.value=function(e){return null},$a.prototype.isEqual=function(e){return e instanceof $a},$a.prototype.compareTo=function(e){return e instanceof $a?0:this.defaultCompareTo(e)},$a.INSTANCE=new $a,$a);function $a(){var e=Ha.call(this)||this;return e.typeOrder=qa.NullValue,e.internalValue=null,e}var Xa,Ja=(r(Za,Xa=Ka),Za.prototype.value=function(e){return this.internalValue},Za.prototype.isEqual=function(e){return e instanceof Za&&this.internalValue===e.internalValue},Za.prototype.compareTo=function(e){return e instanceof Za?wi(this,e):this.defaultCompareTo(e)},Za.of=function(e){return e?Za.TRUE:Za.FALSE},Za.TRUE=new Za(!0),Za.FALSE=new Za(!1),Za);function Za(e){var t=Xa.call(this)||this;return t.internalValue=e,t.typeOrder=qa.BooleanValue,t}var es,ts=(r(ns,es=Ka),ns.prototype.value=function(e){return this.internalValue},ns.prototype.compareTo=function(e){return e instanceof ns?function(e,t){return e<t?-1:t<e?1:e===t?0:isNaN(e)?isNaN(t)?0:-1:1}(this.internalValue,e.internalValue):this.defaultCompareTo(e)},ns);function ns(e){var t=es.call(this)||this;return t.internalValue=e,t.typeOrder=qa.NumberValue,t}function rs(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}var is,os=(r(as,is=ts),as.prototype.isEqual=function(e){return e instanceof as&&rs(this.internalValue,e.internalValue)},as);function as(){return null!==is&&is.apply(this,arguments)||this}var ss,us=(r(cs,ss=ts),cs.prototype.isEqual=function(e){return e instanceof cs&&rs(this.internalValue,e.internalValue)},cs.NAN=new cs(NaN),cs.POSITIVE_INFINITY=new cs(1/0),cs.NEGATIVE_INFINITY=new cs(-1/0),cs);function cs(){return null!==ss&&ss.apply(this,arguments)||this}var ls,hs=(r(fs,ls=Ka),fs.prototype.value=function(e){return this.internalValue},fs.prototype.isEqual=function(e){return e instanceof fs&&this.internalValue===e.internalValue},fs.prototype.compareTo=function(e){return e instanceof fs?wi(this.internalValue,e.internalValue):this.defaultCompareTo(e)},fs);function fs(e){var t=ls.call(this)||this;return t.internalValue=e,t.typeOrder=qa.StringValue,t}var ds,ps=(r(ms,ds=Ka),ms.prototype.value=function(e){return!e||e.timestampsInSnapshots?this.internalValue:this.internalValue.toDate()},ms.prototype.isEqual=function(e){return e instanceof ms&&this.internalValue.isEqual(e.internalValue)},ms.prototype.compareTo=function(e){return e instanceof ms?this.internalValue._compareTo(e.internalValue):e instanceof gs?-1:this.defaultCompareTo(e)},ms);function ms(e){var t=ds.call(this)||this;return t.internalValue=e,t.typeOrder=qa.TimestampValue,t}var ys,gs=(r(vs,ys=Ka),vs.prototype.value=function(e){return e&&e.serverTimestampBehavior===Ua.Estimate?new ps(this.localWriteTime).value(e):e&&e.serverTimestampBehavior===Ua.Previous&&this.previousValue?this.previousValue.value(e):null},vs.prototype.isEqual=function(e){return e instanceof vs&&this.localWriteTime.isEqual(e.localWriteTime)},vs.prototype.compareTo=function(e){return e instanceof vs?this.localWriteTime._compareTo(e.localWriteTime):e instanceof ps?1:this.defaultCompareTo(e)},vs.prototype.toString=function(){return"<ServerTimestamp localTime="+this.localWriteTime.toString()+">"},vs);function vs(e,t){var n=ys.call(this)||this;return n.localWriteTime=e,n.previousValue=t,n.typeOrder=qa.TimestampValue,n}var bs,ws=(r(Es,bs=Ka),Es.prototype.value=function(e){return this.internalValue},Es.prototype.isEqual=function(e){return e instanceof Es&&this.internalValue.isEqual(e.internalValue)},Es.prototype.compareTo=function(e){return e instanceof Es?this.internalValue._compareTo(e.internalValue):this.defaultCompareTo(e)},Es);function Es(e){var t=bs.call(this)||this;return t.internalValue=e,t.typeOrder=qa.BlobValue,t}var Ss,Ts=(r(Cs,Ss=Ka),Cs.prototype.value=function(e){return this.key},Cs.prototype.isEqual=function(e){return e instanceof Cs&&this.key.isEqual(e.key)&&this.databaseId.isEqual(e.databaseId)},Cs.prototype.compareTo=function(e){if(e instanceof Cs){var t=this.databaseId.compareTo(e.databaseId);return 0!==t?t:Qi.comparator(this.key,e.key)}return this.defaultCompareTo(e)},Cs);function Cs(e,t){var n=Ss.call(this)||this;return n.databaseId=e,n.key=t,n.typeOrder=qa.RefValue,n}var Is,ks=(r(Ns,Is=Ka),Ns.prototype.value=function(e){return this.internalValue},Ns.prototype.isEqual=function(e){return e instanceof Ns&&this.internalValue.isEqual(e.internalValue)},Ns.prototype.compareTo=function(e){return e instanceof Ns?this.internalValue._compareTo(e.internalValue):this.defaultCompareTo(e)},Ns);function Ns(e){var t=Is.call(this)||this;return t.internalValue=e,t.typeOrder=qa.GeoPointValue,t}var Ds,As=(r(_s,Ds=Ka),_s.prototype.value=function(e){var t={};return this.internalValue.inorderTraversal((function(n,r){t[n]=r.value(e)})),t},_s.prototype.forEach=function(e){this.internalValue.inorderTraversal(e)},_s.prototype.isEqual=function(e){if(e instanceof _s){for(var t=this.internalValue.getIterator(),n=e.internalValue.getIterator();t.hasNext()&&n.hasNext();){var r=t.getNext(),i=n.getNext();if(r.key!==i.key||!r.value.isEqual(i.value))return!1}return!t.hasNext()&&!n.hasNext()}return!1},_s.prototype.compareTo=function(e){if(e instanceof _s){for(var t=this.internalValue.getIterator(),n=e.internalValue.getIterator();t.hasNext()&&n.hasNext();){var r=t.getNext(),i=n.getNext(),o=wi(r.key,i.key)||r.value.compareTo(i.value);if(o)return o}return wi(t.hasNext(),n.hasNext())}return this.defaultCompareTo(e)},_s.prototype.set=function(e,t){if(Br(!e.isEmpty(),"Cannot set field for empty path on ObjectValue"),1===e.length)return this.setChild(e.firstSegment(),t);var n=this.child(e.firstSegment());n instanceof _s||(n=_s.EMPTY);var r=n.set(e.popFirst(),t);return this.setChild(e.firstSegment(),r)},_s.prototype.delete=function(e){if(Br(!e.isEmpty(),"Cannot delete field for empty path on ObjectValue"),1===e.length)return new _s(this.internalValue.remove(e.firstSegment()));var t=this.child(e.firstSegment());if(t instanceof _s){var n=t.delete(e.popFirst());return new _s(this.internalValue.insert(e.firstSegment(),n))}return this},_s.prototype.contains=function(e){return null!==this.field(e)},_s.prototype.field=function(e){Br(!e.isEmpty(),"Can't get field of empty path");var t=this;return e.forEach((function(e){t=t instanceof _s?t.internalValue.get(e):null})),t},_s.prototype.fieldMask=function(){var e=new wo(ji.comparator);return this.internalValue.forEach((function(t,n){var r=new ji([t]);if(n instanceof _s){var i=n.fieldMask().fields;i.isEmpty()?e=e.add(r):i.forEach((function(t){e=e.add(r.child(t))}))}else e=e.add(r)})),ga.fromSet(e)},_s.prototype.toString=function(){return this.internalValue.toString()},_s.prototype.child=function(e){return this.internalValue.get(e)||void 0},_s.prototype.setChild=function(e,t){return new _s(this.internalValue.insert(e,t))},_s.EMPTY=new _s(new ho(wi)),_s);function _s(e){var t=Ds.call(this)||this;return t.internalValue=e,t.typeOrder=qa.ObjectValue,t}var xs,Os=(r(Rs,xs=Ka),Rs.prototype.value=function(e){return this.internalValue.map((function(t){return t.value(e)}))},Rs.prototype.contains=function(e){for(var t=0,n=this.internalValue;t<n.length;t++)if(n[t].isEqual(e))return!0;return!1},Rs.prototype.forEach=function(e){this.internalValue.forEach(e)},Rs.prototype.isEqual=function(e){if(e instanceof Rs){if(this.internalValue.length!==e.internalValue.length)return!1;for(var t=0;t<this.internalValue.length;t++)if(!this.internalValue[t].isEqual(e.internalValue[t]))return!1;return!0}return!1},Rs.prototype.compareTo=function(e){if(e instanceof Rs){for(var t=Math.min(this.internalValue.length,e.internalValue.length),n=0;n<t;n++){var r=this.internalValue[n].compareTo(e.internalValue[n]);if(r)return r}return wi(this.internalValue.length,e.internalValue.length)}return this.defaultCompareTo(e)},Rs.prototype.toString=function(){return"["+this.internalValue.map((function(e){return e.toString()})).join(",")+"]"},Rs);function Rs(e){var t=xs.call(this)||this;return t.internalValue=e,t.typeOrder=qa.ArrayValue,t}var Ps=(Ms.compareByKey=function(e,t){return Qi.comparator(e.key,t.key)},Ms);function Ms(e,t){this.key=e,this.version=t}var Ls,Fs=(r(qs,Ls=Ps),qs.prototype.field=function(e){if(this.objectValue)return this.objectValue.field(e);this.fieldValueCache||(this.fieldValueCache=new Map);var t=e.canonicalString(),n=this.fieldValueCache.get(t);if(void 0===n){var r=this.getProtoField(e);n=void 0===r?null:this.converter(r),this.fieldValueCache.set(t,n)}return n},qs.prototype.data=function(){var e=this;if(!this.objectValue){var t=As.EMPTY;Zr(this.proto.fields||{},(function(n,r){t=t.set(new ji([n]),e.converter(r))})),this.objectValue=t,this.fieldValueCache=void 0}return this.objectValue},qs.prototype.value=function(){return this.data().value()},qs.prototype.isEqual=function(e){return e instanceof qs&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.hasLocalMutations===e.hasLocalMutations&&this.hasCommittedMutations===e.hasCommittedMutations&&this.data().isEqual(e.data())},qs.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.data().toString()+", {hasLocalMutations: "+this.hasLocalMutations+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(qs.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!0,configurable:!0}),qs.prototype.getProtoField=function(e){Br(void 0!==this.proto,"Can only call getProtoField() when proto is defined");for(var t=this.proto.fields?this.proto.fields[e.firstSegment()]:void 0,n=1;n<e.length;++n){if(!t||!t.mapValue||!t.mapValue.fields)return;t=t.mapValue.fields[e.get(n)]}return t},qs.compareByField=function(e,t,n){var r=t.field(e),i=n.field(e);return null!==r&&null!==i?r.compareTo(i):Ur("Trying to compare documents on fields that don't exist")},qs);function qs(e,t,n,r,i,o){var a=Ls.call(this,e,t)||this;return a.objectValue=r,a.proto=i,a.converter=o,Br(void 0!==a.objectValue||void 0!==a.proto&&void 0!==a.converter,"If objectValue is not defined, proto and converter need to be set."),a.hasLocalMutations=!!n.hasLocalMutations,a.hasCommittedMutations=!!n.hasCommittedMutations,a}var Vs,Us=(r(Bs,Vs=Ps),Bs.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(Bs.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!0,configurable:!0}),Bs.prototype.isEqual=function(e){return e instanceof Bs&&e.hasCommittedMutations===this.hasCommittedMutations&&e.version.isEqual(this.version)&&e.key.isEqual(this.key)},Bs);function Bs(e,t,n){var r=Vs.call(this,e,t)||this;return r.hasCommittedMutations=!(!n||!n.hasCommittedMutations),r}var js,zs=(r(Qs,js=Ps),Qs.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(Qs.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!0,configurable:!0}),Qs.prototype.isEqual=function(e){return e instanceof Qs&&e.version.isEqual(this.version)&&e.key.isEqual(this.key)},Qs);function Qs(){return null!==js&&js.apply(this,arguments)||this}var Ws=(Ks.prototype.get=function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],a=o[0],s=o[1];if(a.isEqual(e))return s}},Ks.prototype.has=function(e){return void 0!==this.get(e)},Ks.prototype.set=function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(r[i][0].isEqual(e))return void(r[i]=[e,t]);r.push([e,t])}else this.inner[n]=[[e,t]]},Ks.prototype.delete=function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(n[r][0].isEqual(e))return 1===n.length?delete this.inner[t]:n.splice(r,1),!0;return!1},Ks.prototype.forEach=function(e){Zr(this.inner,(function(t,n){for(var r=0,i=n;r<i.length;r++){var o=i[r],a=o[0],s=o[1];e(a,s)}}))},Ks.prototype.isEmpty=function(){return ei(this.inner)},Ks);function Ks(e){this.mapKeyFn=e,this.inner={}}var Gs=(Object.defineProperty(Hs.prototype,"readTime",{get:function(){return Br(void 0!==this._readTime,"Read time is not set. All removeEntry() calls must include a readTime if `trackRemovals` is used."),this._readTime},set:function(e){Br(void 0===this._readTime||this._readTime.isEqual(e),"All changes in a RemoteDocumentChangeBuffer must have the same read time"),this._readTime=e},enumerable:!0,configurable:!0}),Hs.prototype.addEntry=function(e,t){this.assertNotApplied(),this.readTime=t,this.changes.set(e.key,e)},Hs.prototype.removeEntry=function(e,t){this.assertNotApplied(),t&&(this.readTime=t),this.changes.set(e,null)},Hs.prototype.getEntry=function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?Vo.resolve(n):this.getFromCache(e,t)},Hs.prototype.getEntries=function(e,t){return this.getAllFromCache(e,t)},Hs.prototype.apply=function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)},Hs.prototype.assertNotApplied=function(){Br(!this.changesApplied,"Changes have already been applied.")},Hs);function Hs(){this.changes=new Ws((function(e){return e.toString()})),this.changesApplied=!1}var Ys,$s=(Xs.prototype.addEntry=function(e,t,n){return eu(e).put(tu(t),n)},Xs.prototype.removeEntry=function(e,t){var n=eu(e),r=tu(t);return n.delete(r)},Xs.prototype.updateMetadata=function(e,t){var n=this;return this.getMetadata(e).next((function(r){return r.byteSize+=t,n.setMetadata(e,r)}))},Xs.prototype.getEntry=function(e,t){var n=this;return eu(e).get(tu(t)).next((function(e){return n.maybeDecodeDocument(e)}))},Xs.prototype.getSizedEntry=function(e,t){var n=this;return eu(e).get(tu(t)).next((function(e){var t=n.maybeDecodeDocument(e);return t?{maybeDocument:t,size:nu(e)}:null}))},Xs.prototype.getEntries=function(e,t){var n=this,r=ko();return this.forEachDbEntry(e,t,(function(e,t){var i=n.maybeDecodeDocument(t);r=r.insert(e,i)})).next((function(){return r}))},Xs.prototype.getSizedEntries=function(e,t){var n=this,r=ko(),i=new ho(Qi.comparator);return this.forEachDbEntry(e,t,(function(e,t){var o=n.maybeDecodeDocument(t);i=o?(r=r.insert(e,o),i.insert(e,nu(t))):(r=r.insert(e,null),i.insert(e,0))})).next((function(){return{maybeDocuments:r,sizeMap:i}}))},Xs.prototype.forEachDbEntry=function(e,t,n){if(t.isEmpty())return Vo.resolve();var r=IDBKeyRange.bound(t.first().path.toArray(),t.last().path.toArray()),i=t.getIterator(),o=i.getNext();return eu(e).iterate({range:r},(function(e,t,r){for(var a=Qi.fromSegments(e);o&&Qi.comparator(o,a)<0;)n(o,null),o=i.getNext();o&&o.isEqual(a)&&(n(o,t),o=i.hasNext()?i.getNext():null),o?r.skip(o.path.toArray()):r.done()})).next((function(){for(;o;)n(o,null),o=i.hasNext()?i.getNext():null}))},Xs.prototype.getDocumentsMatchingQuery=function(e,t,n){var r=this;Br(!t.isCollectionGroupQuery(),"CollectionGroup queries should be handled in LocalDocumentsView");var i=Do(),o=t.path.length+1,a={};if(n.isEqual(co.MIN)){var s=t.path.toArray();a.range=IDBKeyRange.lowerBound(s)}else{var u=t.path.toArray(),c=this.serializer.toDbTimestampKey(n);a.range=IDBKeyRange.lowerBound([u,c],!0),a.index=Eu.collectionReadTimeIndex}return eu(e).iterate(a,(function(e,n,a){if(e.length===o){var s=r.serializer.fromDbRemoteDocument(n);t.path.isPrefixOf(s.key.path)?s instanceof Fs&&t.matches(s)&&(i=i.insert(s.key,s)):a.done()}})).next((function(){return i}))},Xs.prototype.getNewDocumentChanges=function(e,t){var n=this,r=Io(),i=this.serializer.toDbTimestampKey(t),o=eu(e),a=IDBKeyRange.lowerBound(i,!0);return o.iterate({index:Eu.readTimeIndex,range:a},(function(e,t){var o=n.serializer.fromDbRemoteDocument(t);r=r.insert(o.key,o),i=t.readTime})).next((function(){return{changedDocs:r,readTime:n.serializer.fromDbTimestampKey(i)}}))},Xs.prototype.getLastDocumentChange=function(e){var t,n=this,r=eu(e),i=co.MIN;return r.iterate({index:Eu.readTimeIndex,reverse:!0},(function(e,r,o){t=n.serializer.fromDbRemoteDocument(r),r.readTime&&(i=n.serializer.fromDbTimestampKey(r.readTime)),o.done()})).next((function(){return{changedDoc:t,readTime:i}}))},Xs.prototype.newChangeBuffer=function(e){return new Xs.RemoteDocumentChangeBuffer(this,!!e&&e.trackRemovals)},Xs.prototype.getSize=function(e){return this.getMetadata(e).next((function(e){return e.byteSize}))},Xs.prototype.getMetadata=function(e){return Zs(e).get(Tu.key).next((function(e){return Br(!!e,"Missing document cache metadata"),e}))},Xs.prototype.setMetadata=function(e,t){return Zs(e).put(Tu.key,t)},Xs.prototype.maybeDecodeDocument=function(e){if(e){var t=this.serializer.fromDbRemoteDocument(e);return t instanceof Us&&t.version.isEqual(co.forDeletedDoc())?null:t}return null},Xs.RemoteDocumentChangeBuffer=(r(Js,Ys=Gs),Js.prototype.applyChanges=function(e){var t=this,n=[],r=0,i=new wo((function(e,t){return wi(e.canonicalString(),t.canonicalString())}));return this.changes.forEach((function(o,a){var s=t.documentSizes.get(o);if(Br(void 0!==s,"Cannot modify a document that wasn't read (for "+o+")"),a){Br(!t.readTime.isEqual(co.MIN),"Cannot add a document with a read time of zero");var u=t.documentCache.serializer.toDbRemoteDocument(a,t.readTime);i=i.add(o.path.popLast());var c=nu(u);r+=c-s,n.push(t.documentCache.addEntry(e,o,u))}else if(r-=s,t.trackRemovals){var l=t.documentCache.serializer.toDbRemoteDocument(new Us(o,co.forDeletedDoc()),t.readTime);n.push(t.documentCache.addEntry(e,o,l))}else n.push(t.documentCache.removeEntry(e,o))})),i.forEach((function(r){n.push(t.documentCache.indexManager.addToCollectionParentIndex(e,r))})),n.push(this.documentCache.updateMetadata(e,r)),Vo.waitFor(n)},Js.prototype.getFromCache=function(e,t){var n=this;return this.documentCache.getSizedEntry(e,t).next((function(e){return null===e?(n.documentSizes.set(t,0),null):(n.documentSizes.set(t,e.size),e.maybeDocument)}))},Js.prototype.getAllFromCache=function(e,t){var n=this;return this.documentCache.getSizedEntries(e,t).next((function(e){var t=e.maybeDocuments;return e.sizeMap.forEach((function(e,t){n.documentSizes.set(e,t)})),t}))},Js),Xs);function Xs(e,t){this.serializer=e,this.indexManager=t}function Js(e,t){var n=Ys.call(this)||this;return n.documentCache=e,n.trackRemovals=t,n.documentSizes=new Ws((function(e){return e.toString()})),n}function Zs(e){return lc.getStore(e,Tu.store)}function eu(e){return lc.getStore(e,Eu.store)}function tu(e){return e.path.toArray()}function nu(e){var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw Ur("Unknown remote document type");t=e.noDocument}return JSON.stringify(t).length}var ru=(iu.prototype.addToCollectionParentIndex=function(e,t){return this.collectionParentIndex.add(t),Vo.resolve()},iu.prototype.getCollectionParents=function(e,t){return Vo.resolve(this.collectionParentIndex.getEntries(t))},iu);function iu(){this.collectionParentIndex=new ou}var ou=(au.prototype.add=function(e){Br(e.length%2==1,"Expected a collection path.");var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new wo(qi.comparator),i=!r.has(n);return this.index[t]=r.add(n),i},au.prototype.has=function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)},au.prototype.getEntries=function(e){return(this.index[e]||new wo(qi.comparator)).toArray()},au);function au(){this.index={}}var su=9,uu=(cu.prototype.createOrUpgrade=function(e,t,n,r){var i=this;Br(n<r&&0<=n&&r<=su,"Unexpected schema upgrade from v"+n+" to v{toVersion}.");var o=new ia(t);n<1&&1<=r&&(function(e){e.createObjectStore(hu.store)}(e),function(e){e.createObjectStore(du.store,{keyPath:du.keyPath}),e.createObjectStore(mu.store,{keyPath:mu.keyPath,autoIncrement:!0}).createIndex(mu.userMutationsIndex,mu.userMutationsKeyPath,{unique:!0}),e.createObjectStore(gu.store)}(e),Ru(e),function(e){e.createObjectStore(Eu.store)}(e));var a=Vo.resolve();return n<3&&3<=r&&(0!==n&&(function(e){e.deleteObjectStore(Nu.store),e.deleteObjectStore(Iu.store),e.deleteObjectStore(Au.store)}(e),Ru(e)),a=a.next((function(){return function(e){var t=e.store(Au.store),n=new Au(0,0,co.MIN.toTimestamp(),0);return t.put(Au.key,n)}(o)}))),n<4&&4<=r&&(0!==n&&(a=a.next((function(){return function(e,t){return t.store(mu.store).loadAll().next((function(n){e.deleteObjectStore(mu.store),e.createObjectStore(mu.store,{keyPath:mu.keyPath,autoIncrement:!0}).createIndex(mu.userMutationsIndex,mu.userMutationsKeyPath,{unique:!0});var r=t.store(mu.store),i=n.map((function(e){return r.put(e)}));return Vo.waitFor(i)}))}(e,o)}))),a=a.next((function(){!function(e){e.createObjectStore(Pu.store,{keyPath:Pu.keyPath})}(e)}))),n<5&&5<=r&&(a=a.next((function(){return i.removeAcknowledgedMutations(o)}))),n<6&&6<=r&&(a=a.next((function(){return function(e){e.createObjectStore(Tu.store)}(e),i.addDocumentGlobal(o)}))),n<7&&7<=r&&(a=a.next((function(){return i.ensureSequenceNumbers(o)}))),n<8&&8<=r&&(a=a.next((function(){return i.createCollectionParentIndex(e,o)}))),n<9&&9<=r&&(a=a.next((function(){!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e),function(e){var t=e.objectStore(Eu.store);t.createIndex(Eu.readTimeIndex,Eu.readTimeIndexPath,{unique:!1}),t.createIndex(Eu.collectionReadTimeIndex,Eu.collectionReadTimeIndexPath,{unique:!1})}(t)}))),a},cu.prototype.addDocumentGlobal=function(e){var t=0;return e.store(Eu.store).iterate((function(e,n){t+=nu(n)})).next((function(){var n=new Tu(t);return e.store(Tu.store).put(Tu.key,n)}))},cu.prototype.removeAcknowledgedMutations=function(e){var t=this,n=e.store(du.store),r=e.store(mu.store);return n.loadAll().next((function(n){return Vo.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.loadAll(mu.userMutationsIndex,i).next((function(r){return Vo.forEach(r,(function(r){Br(r.userId===n.userId,"Cannot process batch "+r.batchId+" from unexpected user");var i=t.serializer.fromDbMutationBatch(r);return Ko(e,n.userId,i).next((function(){}))}))}))}))}))},cu.prototype.ensureSequenceNumbers=function(e){var t=e.store(Nu.store),n=e.store(Eu.store);return ma(e).next((function(e){var r=[];return n.iterate((function(n,i){var o=new qi(n),a=function(e){return[0,ro(e)]}(o);r.push(t.get(a).next((function(n){return n?Vo.resolve():function(n){return t.put(new Nu(0,ro(n),e))}(o)})))})).next((function(){return Vo.waitFor(r)}))}))},cu.prototype.createCollectionParentIndex=function(e,t){function n(e){if(i.add(e)){var t=e.lastSegment(),n=e.popLast();return r.put({collectionId:t,parent:ro(n)})}}e.createObjectStore(xu.store,{keyPath:xu.keyPath});var r=t.store(xu.store),i=new ou;return t.store(Eu.store).iterate({keysOnly:!0},(function(e,t){return n(new qi(e).popLast())})).next((function(){return t.store(gu.store).iterate({keysOnly:!0},(function(e,t){e[0];var r=e[1];return n((e[2],ao(r)).popLast())}))}))},cu);function cu(e){this.serializer=e}var lu=function(e,t){this.seconds=e,this.nanoseconds=t},hu=(fu.store="owner",fu.key="owner",fu);function fu(e,t,n){this.ownerId=e,this.allowTabSynchronization=t,this.leaseTimestampMs=n}var du=(pu.store="mutationQueues",pu.keyPath="userId",pu);function pu(e,t,n){this.userId=e,this.lastAcknowledgedBatchId=t,this.lastStreamToken=n}var mu=(yu.store="mutations",yu.keyPath="batchId",yu.userMutationsIndex="userMutationsIndex",yu.userMutationsKeyPath=["userId","batchId"],yu);function yu(e,t,n,r,i){this.userId=e,this.batchId=t,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i}var gu=(vu.prefixForUser=function(e){return[e]},vu.prefixForPath=function(e,t){return[e,ro(t)]},vu.key=function(e,t,n){return[e,ro(t),n]},vu.store="documentMutations",vu.PLACEHOLDER=new vu,vu);function vu(){}var bu=function(e,t){this.path=e,this.readTime=t},wu=function(e,t){this.path=e,this.version=t},Eu=(Su.store="remoteDocuments",Su.readTimeIndex="readTimeIndex",Su.readTimeIndexPath="readTime",Su.collectionReadTimeIndex="collectionReadTimeIndex",Su.collectionReadTimeIndexPath=["parentPath","readTime"],Su);function Su(e,t,n,r,i,o){this.unknownDocument=e,this.noDocument=t,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o}var Tu=(Cu.store="remoteDocumentGlobal",Cu.key="remoteDocumentGlobalKey",Cu);function Cu(e){this.byteSize=e}var Iu=(ku.store="targets",ku.keyPath="targetId",ku.queryTargetsIndexName="queryTargetsIndex",ku.queryTargetsKeyPath=["canonicalId","targetId"],ku);function ku(e,t,n,r,i,o,a){this.targetId=e,this.canonicalId=t,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=a}var Nu=(Du.store="targetDocuments",Du.keyPath=["targetId","path"],Du.documentTargetsIndex="documentTargetsIndex",Du.documentTargetsKeyPath=["path","targetId"],Du);function Du(e,t,n){this.targetId=e,this.path=t,Br(0===e==(void 0!==(this.sequenceNumber=n)),"A target-document row must either have targetId == 0 and a defined sequence number, or a non-zero targetId and no sequence number")}var Au=(_u.key="targetGlobalKey",_u.store="targetGlobal",_u);function _u(e,t,n,r){this.highestTargetId=e,this.highestListenSequenceNumber=t,this.lastRemoteSnapshotVersion=n,this.targetCount=r}var xu=(Ou.store="collectionParents",Ou.keyPath=["collectionId","parent"],Ou);function Ou(e,t){this.collectionId=e,this.parent=t}function Ru(e){e.createObjectStore(Nu.store,{keyPath:Nu.keyPath}).createIndex(Nu.documentTargetsIndex,Nu.documentTargetsKeyPath,{unique:!0}),e.createObjectStore(Iu.store,{keyPath:Iu.keyPath}).createIndex(Iu.queryTargetsIndexName,Iu.queryTargetsKeyPath,{unique:!0}),e.createObjectStore(Au.store)}var Pu=(Mu.store="clientMetadata",Mu.keyPath="clientId",Mu);function Mu(e,t,n,r){this.clientId=e,this.updateTimeMs=t,this.networkEnabled=n,this.inForeground=r}var Lu,Fu,qu=c(c(c([du.store,mu.store,gu.store,Eu.store,Iu.store,hu.store,Au.store,Nu.store],[Pu.store]),[Tu.store]),[xu.store]),Vu=(Uu.prototype.addToCollectionParentIndex=function(e,t){var n=this;if(Br(t.length%2==1,"Expected a collection path."),this.collectionParentsCache.has(t))return Vo.resolve();var r=t.lastSegment(),i=t.popLast();return e.addOnCommittedListener((function(){n.collectionParentsCache.add(t)})),Bu(e).put({collectionId:r,parent:ro(i)})},Uu.prototype.getCollectionParents=function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[Si(t),""],!1,!0);return Bu(e).loadAll(r).next((function(e){for(var r=0,i=e;r<i.length;r++){var o=i[r];if(o.collectionId!==t)break;n.push(ao(o.parent))}return n}))},Uu);function Uu(){this.collectionParentsCache=new ou}function Bu(e){return lc.getStore(e,xu.store)}(Fu=Lu=Lu||{})[Fu.Listen=0]="Listen",Fu[Fu.ExistenceFilterMismatch=1]="ExistenceFilterMismatch",Fu[Fu.LimboResolution=2]="LimboResolution";var ju=(zu.prototype.withSequenceNumber=function(e){return new zu(this.query,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},zu.prototype.withResumeToken=function(e,t){return new zu(this.query,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)},zu.prototype.withLastLimboFreeSnapshotVersion=function(e){return new zu(this.query,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)},zu.prototype.isEqual=function(e){return this.targetId===e.targetId&&this.purpose===e.purpose&&this.sequenceNumber===e.sequenceNumber&&this.snapshotVersion.isEqual(e.snapshotVersion)&&this.lastLimboFreeSnapshotVersion.isEqual(e.lastLimboFreeSnapshotVersion)&&this.resumeToken===e.resumeToken&&this.query.isEqual(e.query)},zu);function zu(e,t,n,r,i,o,a){void 0===i&&(i=co.MIN),void 0===o&&(o=co.MIN),void 0===a&&(a=Qr()),this.query=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a}var Qu=(Wu.prototype.fromDbRemoteDocument=function(e){if(e.document)return this.remoteSerializer.fromDocument(e.document,!!e.hasCommittedMutations);if(e.noDocument){var t=Qi.fromSegments(e.noDocument.path),n=this.fromDbTimestamp(e.noDocument.readTime);return new Us(t,n,{hasCommittedMutations:!!e.hasCommittedMutations})}return e.unknownDocument?(t=Qi.fromSegments(e.unknownDocument.path),n=this.fromDbTimestamp(e.unknownDocument.version),new zs(t,n)):Ur("Unexpected DbRemoteDocument")},Wu.prototype.toDbRemoteDocument=function(e,t){var n=this.toDbTimestampKey(t),r=e.key.path.popLast().toArray();if(e instanceof Fs){var i=e.proto?e.proto:this.remoteSerializer.toDocument(e),o=e.hasCommittedMutations;return new Eu(null,null,i,o,n,r)}if(e instanceof Us){var a=e.key.path.toArray(),s=this.toDbTimestamp(e.version);return o=e.hasCommittedMutations,new Eu(null,new bu(a,s),null,o,n,r)}if(e instanceof zs){a=e.key.path.toArray();var u=this.toDbTimestamp(e.version);return new Eu(new wu(a,u),null,null,!0,n,r)}return Ur("Unexpected MaybeDocument")},Wu.prototype.toDbTimestampKey=function(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]},Wu.prototype.fromDbTimestampKey=function(e){var t=new so(e[0],e[1]);return co.fromTimestamp(t)},Wu.prototype.toDbTimestamp=function(e){var t=e.toTimestamp();return new lu(t.seconds,t.nanoseconds)},Wu.prototype.fromDbTimestamp=function(e){var t=new so(e.seconds,e.nanoseconds);return co.fromTimestamp(t)},Wu.prototype.toDbMutationBatch=function(e,t){var n=this,r=t.baseMutations.map((function(e){return n.remoteSerializer.toMutation(e)})),i=t.mutations.map((function(e){return n.remoteSerializer.toMutation(e)}));return new mu(e,t.batchId,t.localWriteTime.toMillis(),r,i)},Wu.prototype.fromDbMutationBatch=function(e){var t=this,n=(e.baseMutations||[]).map((function(e){return t.remoteSerializer.fromMutation(e)})),r=e.mutations.map((function(e){return t.remoteSerializer.fromMutation(e)})),i=so.fromMillis(e.localWriteTimeMs);return new Mo(e.batchId,i,n,r)},Wu.prototype.toDbResourcePaths=function(e){var t=[];return e.forEach((function(e){t.push(ro(e.path))})),t},Wu.prototype.fromDbResourcePaths=function(e){for(var t=Oo(),n=0,r=e;n<r.length;n++){var i=r[n];t=t.add(new Qi(ao(i)))}return t},Wu.prototype.fromDbTarget=function(e){var t,n=this.fromDbTimestamp(e.readTime),r=void 0!==e.lastLimboFreeSnapshotVersion?this.fromDbTimestamp(e.lastLimboFreeSnapshotVersion):co.MIN,i=e.resumeToken;return t=function(e){return void 0!==e.documents}(e.query)?this.remoteSerializer.fromDocumentsTarget(e.query):this.remoteSerializer.fromQueryTarget(e.query),new ju(t,e.targetId,Lu.Listen,e.lastListenSequenceNumber,n,r,i)},Wu.prototype.toDbTarget=function(e){Br(Lu.Listen===e.purpose,"Only queries with purpose "+Lu.Listen+" may be stored, got "+e.purpose);var t,n,r=this.toDbTimestamp(e.snapshotVersion),i=this.toDbTimestamp(e.lastLimboFreeSnapshotVersion);return t=e.query.isDocumentQuery()?this.remoteSerializer.toDocumentsTarget(e.query):this.remoteSerializer.toQueryTarget(e.query),n=e.resumeToken instanceof Uint8Array?(Br("YES"===Object({NODE_ENV:"production",PUBLIC_URL:"/reactjs"}).USE_MOCK_PERSISTENCE,"Persisting non-string stream tokens is only supported with mock persistence ."),e.resumeToken.toString()):e.resumeToken,new Iu(e.targetId,e.query.canonicalId(),r,n,e.sequenceNumber,i,t)},Wu);function Wu(e){this.remoteSerializer=e}function Ku(e,t){var n=e[0],r=e[1],i=t[0],o=t[1],a=wi(n,i);return 0===a?wi(r,o):a}var Gu=(Hu.prototype.nextIndex=function(){return++this.previousIndex},Hu.prototype.addElement=function(e){var t=[e,this.nextIndex()];if(this.buffer.size<this.maxElements)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();Ku(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}},Object.defineProperty(Hu.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!0,configurable:!0}),Hu);function Hu(e){this.maxElements=e,this.buffer=new wo(Ku),this.previousIndex=0}var Yu={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},$u=(Xu.withCacheSize=function(e){return new Xu(e,Xu.DEFAULT_COLLECTION_PERCENTILE,Xu.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},Xu.COLLECTION_DISABLED=-1,Xu.MINIMUM_CACHE_SIZE_BYTES=1048576,Xu.DEFAULT=new Xu(Xu.DEFAULT_CACHE_SIZE_BYTES=41943040,Xu.DEFAULT_COLLECTION_PERCENTILE=10,Xu.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3),Xu.DISABLED=new Xu(Xu.COLLECTION_DISABLED,0,0),Xu);function Xu(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}var Ju=(Zu.prototype.start=function(){Br(null===this.gcTask,"Cannot start an already started LruScheduler"),this.garbageCollector.params.cacheSizeCollectionThreshold!==$u.COLLECTION_DISABLED&&this.scheduleGC()},Zu.prototype.stop=function(){this.gcTask&&(this.gcTask.cancel(),this.gcTask=null)},Object.defineProperty(Zu.prototype,"started",{get:function(){return null!==this.gcTask},enumerable:!0,configurable:!0}),Zu.prototype.scheduleGC=function(){var e=this;Br(null===this.gcTask,"Cannot schedule GC while a task is pending");var t=this.hasRun?3e5:6e4;Fr("LruGarbageCollector","Garbage collection scheduled in "+t+"ms"),this.gcTask=this.asyncQueue.enqueueAfterDelay(Ki.LruGarbageCollection,t,(function(){return e.gcTask=null,e.hasRun=!0,e.localStore.collectGarbage(e.garbageCollector).then((function(){return e.scheduleGC()})).catch(fc)}))},Zu);function Zu(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.hasRun=!1,this.gcTask=null}var ec=(tc.prototype.calculateTargetCount=function(e,t){return this.delegate.getSequenceNumberCount(e).next((function(e){return Math.floor(t/100*e)}))},tc.prototype.nthSequenceNumber=function(e,t){var n=this;if(0===t)return Vo.resolve(Oi.INVALID);var r=new Gu(t);return this.delegate.forEachTarget(e,(function(e){return r.addElement(e.sequenceNumber)})).next((function(){return n.delegate.forEachOrphanedDocumentSequenceNumber(e,(function(e){return r.addElement(e)}))})).next((function(){return r.maxValue}))},tc.prototype.removeTargets=function(e,t,n){return this.delegate.removeTargets(e,t,n)},tc.prototype.removeOrphanedDocuments=function(e,t){return this.delegate.removeOrphanedDocuments(e,t)},tc.prototype.collect=function(e,t){var n=this;return this.params.cacheSizeCollectionThreshold===$u.COLLECTION_DISABLED?(Fr("LruGarbageCollector","Garbage collection skipped; disabled"),Vo.resolve(Yu)):this.getCacheSize(e).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(Fr("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.cacheSizeCollectionThreshold),Yu):n.runGarbageCollection(e,t)}))},tc.prototype.getCacheSize=function(e){return this.delegate.getCacheSize(e)},tc.prototype.runGarbageCollection=function(e,t){var n,r,i,o,a,s,u,c=this,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((function(t){return r=t>c.params.maximumSequenceNumbersToCollect?(Fr("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+c.params.maximumSequenceNumbersToCollect+" from "+t),c.params.maximumSequenceNumbersToCollect):t,o=Date.now(),c.nthSequenceNumber(e,r)})).next((function(r){return n=r,a=Date.now(),c.removeTargets(e,n,t)})).next((function(t){return i=t,s=Date.now(),c.removeOrphanedDocuments(e,n)})).next((function(e){return u=Date.now(),Mr()<=Ir.DEBUG&&Fr("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-l)+"ms\n\tDetermined least recently used "+r+" in "+(a-o)+"ms\n\tRemoved "+i+" targets in "+(s-a)+"ms\n\tRemoved "+e+" documents in "+(u-s)+"ms\nTotal Duration: "+(u-l)+"ms"),Vo.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})}))},tc);function tc(e,t){this.delegate=e,this.params=t}var nc=(rc.prototype.addOnCommittedListener=function(e){this.onCommittedListeners.push(e)},rc.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach((function(e){return e()}))},rc);function rc(){this.onCommittedListeners=[]}var ic,oc="IndexedDbPersistence",ac="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",sc="Another tab has exclusive access to the persistence layer. To allow shared access, make sure to invoke `enablePersistence()` with `synchronizeTabs:true` in all tabs.",uc=(r(cc,ic=nc),cc);function cc(e,t){var n=ic.call(this)||this;return n.simpleDbTransaction=e,n.currentSequenceNumber=t,n}var lc=(hc.getStore=function(e,t){if(e instanceof uc)return ea.getStore(e.simpleDbTransaction,t);throw Ur("IndexedDbPersistence must use instances of IndexedDbTransaction")},hc.createIndexedDbPersistence=function(e){return s(this,void 0,void 0,(function(){var t;return u(this,(function(n){switch(n.label){case 0:if(!hc.isAvailable())throw new Gr(Kr.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");return[4,(t=new hc(e.allowTabSynchronization,e.persistenceKey,e.clientId,e.platform,e.lruParams,e.queue,e.serializer,e.sequenceNumberSyncer)).start()];case 1:return n.sent(),[2,t]}}))}))},hc.prototype.start=function(){var e=this;return Br(!this.started,"IndexedDbPersistence double-started!"),Br(null!==this.window,"Expected 'window' to be defined"),ea.openOrCreate(this.dbName,su,new uu(this.serializer)).then((function(t){return e.simpleDb=t,e.updateClientMetadataAndTryBecomePrimary()})).then((function(){return e.attachVisibilityHandler(),e.attachWindowUnloadHook(),e.scheduleClientMetadataAndPrimaryLeaseRefreshes(),e.simpleDb.runTransaction("readonly-idempotent",[Au.store],(function(e){return ma(e)}))})).then((function(t){e.listenSequence=new Oi(t,e.sequenceNumberSyncer)})).then((function(){e._started=!0})).catch((function(t){return e.simpleDb&&e.simpleDb.close(),Promise.reject(t)}))},hc.prototype.setPrimaryStateListener=function(e){var t=this;return this.primaryStateListener=function(n){return s(t,void 0,void 0,(function(){return u(this,(function(t){return this.started?[2,e(n)]:[2]}))}))},e(this.isPrimary)},hc.prototype.setDatabaseDeletedListener=function(e){var t=this;this.simpleDb.setVersionChangeListener((function(n){return s(t,void 0,void 0,(function(){return u(this,(function(t){switch(t.label){case 0:return null!==n.newVersion?[3,2]:[4,e()];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}))},hc.prototype.setNetworkEnabled=function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.queue.enqueueAndForget((function(){return s(t,void 0,void 0,(function(){return u(this,(function(e){switch(e.label){case 0:return this.started?[4,this.updateClientMetadataAndTryBecomePrimary()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))})))},hc.prototype.updateClientMetadataAndTryBecomePrimary=function(){var e=this;return this.simpleDb.runTransaction("readwrite",qu,(function(t){return pc(t).put(new Pu(e.clientId,Date.now(),e.networkEnabled,e.inForeground)).next((function(){if(e.isPrimary)return e.verifyPrimaryLease(t).next((function(t){t||(e.isPrimary=!1,e.queue.enqueueAndForget((function(){return e.primaryStateListener(!1)})))}))})).next((function(){return e.canActAsPrimary(t)})).next((function(n){var r=e.isPrimary;return e.isPrimary=n,r!==e.isPrimary&&e.queue.enqueueAndForget((function(){return e.primaryStateListener(e.isPrimary)})),r&&!e.isPrimary?e.releasePrimaryLeaseIfHeld(t):e.isPrimary?e.acquireOrExtendPrimaryLease(t):void 0}))}))},hc.prototype.verifyPrimaryLease=function(e){var t=this;return dc(e).get(hu.key).next((function(e){return Vo.resolve(t.isLocalClient(e))}))},hc.prototype.removeClientMetadata=function(e){return pc(e).delete(this.clientId)},hc.prototype.maybeGarbageCollectMultiClientState=function(){return s(this,void 0,void 0,(function(){var e,t,n=this;return u(this,(function(r){switch(r.label){case 0:return!this.isPrimary||this.isWithinAge(this.lastGarbageCollectionTime,18e5)?[3,2]:(this.lastGarbageCollectionTime=Date.now(),t=[],[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(r){var i=hc.getStore(r,Pu.store);return i.loadAll().next((function(r){return e=n.filterActiveClients(r,18e5),t=r.filter((function(t){return-1===e.indexOf(t)})),Vo.forEach(t,(function(e){return i.delete(e.clientId)}))}))}))]);case 1:r.sent(),t.forEach((function(e){n.window.localStorage.removeItem(n.zombiedClientLocalStorageKey(e.clientId))})),r.label=2;case 2:return[2]}}))}))},hc.prototype.scheduleClientMetadataAndPrimaryLeaseRefreshes=function(){var e=this;this.clientMetadataRefresher=this.queue.enqueueAfterDelay(Ki.ClientMetadataRefresh,4e3,(function(){return e.updateClientMetadataAndTryBecomePrimary().then((function(){return e.maybeGarbageCollectMultiClientState()})).then((function(){return e.scheduleClientMetadataAndPrimaryLeaseRefreshes()}))}))},hc.prototype.isLocalClient=function(e){return!!e&&e.ownerId===this.clientId},hc.prototype.canActAsPrimary=function(e){var t=this;return dc(e).get(hu.key).next((function(n){if(null!==n&&t.isWithinAge(n.leaseTimestampMs,5e3)&&!t.isClientZombied(n.ownerId)){if(t.isLocalClient(n)&&t.networkEnabled)return!0;if(!t.isLocalClient(n)){if(!n.allowTabSynchronization)throw new Gr(Kr.FAILED_PRECONDITION,sc);return!1}}return!(!t.networkEnabled||!t.inForeground)||pc(e).loadAll().next((function(e){return void 0===t.filterActiveClients(e,5e3).find((function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground,i=t.networkEnabled===e.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(e){return t.isPrimary!==e&&Fr(oc,"Client "+(e?"is":"is not")+" eligible for a primary lease."),e}))},hc.prototype.shutdown=function(){return s(this,void 0,void 0,(function(){var e=this;return u(this,(function(t){switch(t.label){case 0:return this._started=!1,this.markClientZombied(),this.clientMetadataRefresher&&(this.clientMetadataRefresher.cancel(),this.clientMetadataRefresher=null),this.detachVisibilityHandler(),this.detachWindowUnloadHook(),[4,this.simpleDb.runTransaction("readwrite-idempotent",[hu.store,Pu.store],(function(t){return e.releasePrimaryLeaseIfHeld(t).next((function(){return e.removeClientMetadata(t)}))}))];case 1:return t.sent(),this.simpleDb.close(),this.removeClientZombiedEntry(),[2]}}))}))},hc.prototype.filterActiveClients=function(e,t){var n=this;return e.filter((function(e){return n.isWithinAge(e.updateTimeMs,t)&&!n.isClientZombied(e.clientId)}))},hc.prototype.getActiveClients=function(){var e=this;return this.simpleDb.runTransaction("readonly-idempotent",[Pu.store],(function(t){return pc(t).loadAll().next((function(t){return e.filterActiveClients(t,18e5).map((function(e){return e.clientId}))}))}))},hc.clearPersistence=function(e){return s(this,void 0,void 0,(function(){var t;return u(this,(function(n){switch(n.label){case 0:return hc.isAvailable()?(t=e+hc.MAIN_DATABASE,[4,ea.delete(t)]):[2,Promise.resolve()];case 1:return n.sent(),[2]}}))}))},Object.defineProperty(hc.prototype,"started",{get:function(){return this._started},enumerable:!0,configurable:!0}),hc.prototype.getMutationQueue=function(e){return Br(this.started,"Cannot initialize MutationQueue before persistence is started."),zo.forUser(e,this.serializer,this.indexManager,this.referenceDelegate)},hc.prototype.getQueryCache=function(){return Br(this.started,"Cannot initialize QueryCache before persistence is started."),this.queryCache},hc.prototype.getRemoteDocumentCache=function(){return Br(this.started,"Cannot initialize RemoteDocumentCache before persistence is started."),this.remoteDocumentCache},hc.prototype.getIndexManager=function(){return Br(this.started,"Cannot initialize IndexManager before persistence is started."),this.indexManager},hc.prototype.runTransaction=function(e,t,n){var r=this;Fr(oc,"Starting transaction:",e);var i,o=t.endsWith("idempotent"),a=t.startsWith("readonly")?o?"readonly-idempotent":"readonly":o?"readwrite-idempotent":"readwrite";return this.simpleDb.runTransaction(a,qu,(function(o){return i=new uc(o,r.listenSequence.next()),"readwrite-primary"===t||"readwrite-primary-idempotent"===t?r.verifyPrimaryLease(o).next((function(t){if(!t)throw qr("Failed to obtain primary lease for action '"+e+"'."),r.isPrimary=!1,r.queue.enqueueAndForget((function(){return r.primaryStateListener(!1)})),new Gr(Kr.FAILED_PRECONDITION,ac);return n(i)})).next((function(e){return r.acquireOrExtendPrimaryLease(o).next((function(){return e}))})):r.verifyAllowTabSynchronization(o).next((function(){return n(i)}))})).then((function(e){return i.raiseOnCommittedEvent(),e}))},hc.prototype.verifyAllowTabSynchronization=function(e){var t=this;return dc(e).get(hu.key).next((function(e){if(null!==e&&t.isWithinAge(e.leaseTimestampMs,5e3)&&!t.isClientZombied(e.ownerId)&&!t.isLocalClient(e)&&!e.allowTabSynchronization)throw new Gr(Kr.FAILED_PRECONDITION,sc)}))},hc.prototype.acquireOrExtendPrimaryLease=function(e){var t=new hu(this.clientId,this.allowTabSynchronization,Date.now());return dc(e).put(hu.key,t)},hc.isAvailable=function(){return ea.isAvailable()},hc.buildStoragePrefix=function(e){var t=e.databaseId.projectId;return e.databaseId.isDefaultDatabase||(t+="."+e.databaseId.database),"firestore/"+e.persistenceKey+"/"+t+"/"},hc.prototype.releasePrimaryLeaseIfHeld=function(e){var t=this,n=dc(e);return n.get(hu.key).next((function(e){return t.isLocalClient(e)?(Fr(oc,"Releasing primary lease."),n.delete(hu.key)):Vo.resolve()}))},hc.prototype.isWithinAge=function(e,t){var n=Date.now();return!(e<n-t||n<e&&(qr("Detected an update time that is in the future: "+e+" > "+n),1))},hc.prototype.attachVisibilityHandler=function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.documentVisibilityHandler=function(){e.queue.enqueueAndForget((function(){return e.inForeground="visible"===e.document.visibilityState,e.updateClientMetadataAndTryBecomePrimary()}))},this.document.addEventListener("visibilitychange",this.documentVisibilityHandler),this.inForeground="visible"===this.document.visibilityState)},hc.prototype.detachVisibilityHandler=function(){this.documentVisibilityHandler&&(Br(null!==this.document&&"function"==typeof this.document.addEventListener,"Expected 'document.addEventListener' to be a function"),this.document.removeEventListener("visibilitychange",this.documentVisibilityHandler),this.documentVisibilityHandler=null)},hc.prototype.attachWindowUnloadHook=function(){var e=this;"function"==typeof this.window.addEventListener&&(this.windowUnloadHandler=function(){e.markClientZombied(),e.queue.enqueueAndForget((function(){return e.shutdown()}))},this.window.addEventListener("unload",this.windowUnloadHandler))},hc.prototype.detachWindowUnloadHook=function(){this.windowUnloadHandler&&(Br("function"==typeof this.window.removeEventListener,"Expected 'window.removeEventListener' to be a function"),this.window.removeEventListener("unload",this.windowUnloadHandler),this.windowUnloadHandler=null)},hc.prototype.isClientZombied=function(e){try{var t=null!==this.webStorage.getItem(this.zombiedClientLocalStorageKey(e));return Fr(oc,"Client '"+e+"' "+(t?"is":"is not")+" zombied in LocalStorage"),t}catch(e){return qr(oc,"Failed to get zombied client id.",e),!1}},hc.prototype.markClientZombied=function(){try{this.webStorage.setItem(this.zombiedClientLocalStorageKey(this.clientId),String(Date.now()))}catch(r){qr("Failed to set zombie client id.",r)}},hc.prototype.removeClientZombiedEntry=function(){try{this.webStorage.removeItem(this.zombiedClientLocalStorageKey(this.clientId))}catch(r){}},hc.prototype.zombiedClientLocalStorageKey=function(e){return"firestore_zombie_"+this.persistenceKey+"_"+e},hc.MAIN_DATABASE="main",hc);function hc(e,t,n,r,i,o,a,s){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=n,this.queue=o,this.sequenceNumberSyncer=s,this._started=!1,this.isPrimary=!1,this.networkEnabled=!0,this.windowUnloadHandler=null,this.inForeground=!1,this.documentVisibilityHandler=null,this.clientMetadataRefresher=null,this.lastGarbageCollectionTime=Number.NEGATIVE_INFINITY,this.primaryStateListener=function(e){return Promise.resolve()},this.referenceDelegate=new mc(this,i),this.dbName=t+hc.MAIN_DATABASE,this.serializer=new Qu(a),this.document=r.document,this.queryCache=new ha(this.referenceDelegate,this.serializer),this.indexManager=new Vu,this.remoteDocumentCache=new $s(this.serializer,this.indexManager),!r.window||!r.window.localStorage)throw new Gr(Kr.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");this.window=r.window,this.webStorage=this.window.localStorage}function fc(e){return s(this,void 0,void 0,(function(){return u(this,(function(t){if(!function(e){return e.code===Kr.FAILED_PRECONDITION&&e.message===ac}(e))throw e;return Fr(oc,"Unexpectedly lost primary lease"),[2]}))}))}function dc(e){return e.store(hu.store)}function pc(e){return e.store(Pu.store)}var mc=(yc.prototype.getSequenceNumberCount=function(e){var t=this.orphanedDocmentCount(e);return this.db.getQueryCache().getQueryCount(e).next((function(e){return t.next((function(t){return e+t}))}))},yc.prototype.orphanedDocmentCount=function(e){var t=0;return this.forEachOrphanedDocumentSequenceNumber(e,(function(e){t++})).next((function(){return t}))},yc.prototype.forEachTarget=function(e,t){return this.db.getQueryCache().forEachTarget(e,t)},yc.prototype.forEachOrphanedDocumentSequenceNumber=function(e,t){return this.forEachOrphanedDocument(e,(function(e,n){return t(n)}))},yc.prototype.setInMemoryPins=function(e){this.inMemoryPins=e},yc.prototype.addReference=function(e,t){return gc(e,t)},yc.prototype.removeReference=function(e,t){return gc(e,t)},yc.prototype.removeTargets=function(e,t,n){return this.db.getQueryCache().removeTargets(e,t,n)},yc.prototype.removeMutationReference=function(e,t){return gc(e,t)},yc.prototype.isPinned=function(e,t){return this.inMemoryPins.containsKey(t)?Vo.resolve(!0):function(e,t){var n=!1;return $o(e).iterateSerial((function(r){return Wo(e,r,t).next((function(e){return e&&(n=!0),Vo.resolve(!e)}))})).next((function(){return n}))}(e,t)},yc.prototype.removeOrphanedDocuments=function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.forEachOrphanedDocument(e,(function(a,s){if(s<=t){var u=n.isPinned(e,a).next((function(t){if(!t)return o++,r.getEntry(e,a).next((function(){return r.removeEntry(a),ya(e).delete(function(e){return[0,ro(e.path)]}(a))}))}));i.push(u)}})).next((function(){return Vo.waitFor(i)})).next((function(){return r.apply(e)})).next((function(){return o}))},yc.prototype.removeTarget=function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getQueryCache().updateQueryData(e,n)},yc.prototype.updateLimboDocument=function(e,t){return gc(e,t)},yc.prototype.forEachOrphanedDocument=function(e,t){var n,r=ya(e),i=Oi.INVALID;return r.iterate({index:Nu.documentTargetsIndex},(function(e,r){var o=e[0],a=(e[1],r.path),s=r.sequenceNumber;0===o?(i!==Oi.INVALID&&t(new Qi(ao(n)),i),i=s,n=a):i=Oi.INVALID})).next((function(){i!==Oi.INVALID&&t(new Qi(ao(n)),i)}))},yc.prototype.getCacheSize=function(e){return this.db.getRemoteDocumentCache().getSize(e)},yc);function yc(e,t){this.db=e,this.inMemoryPins=null,this.garbageCollector=new ec(this,t)}function gc(e,t){return ya(e).put(function(e,t){return new Nu(0,ro(e.path),t)}(t,e.currentSequenceNumber))}var vc=(bc.prototype.getDocument=function(e,t){var n=this;return this.mutationQueue.getAllMutationBatchesAffectingDocumentKey(e,t).next((function(r){return n.getDocumentInternal(e,t,r)}))},bc.prototype.getDocumentInternal=function(e,t,n){return this.remoteDocumentCache.getEntry(e,t).next((function(e){for(var r=0,i=n;r<i.length;r++)e=i[r].applyToLocalView(t,e);return e}))},bc.prototype.applyLocalMutationsToDocuments=function(e,t,n){var r=ko();return t.forEach((function(e,t){for(var i=0,o=n;i<o.length;i++)t=o[i].applyToLocalView(e,t);r=r.insert(e,t)})),r},bc.prototype.getDocuments=function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.getLocalViewOfDocuments(e,t)}))},bc.prototype.getLocalViewOfDocuments=function(e,t){var n=this;return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(r){var i=n.applyLocalMutationsToDocuments(e,t,r),o=Io();return i.forEach((function(e,t){t=t||new Us(e,co.forDeletedDoc()),o=o.insert(e,t)})),o}))},bc.prototype.getDocumentsMatchingQuery=function(e,t,n){return t.isDocumentQuery()?this.getDocumentsMatchingDocumentQuery(e,t.path):t.isCollectionGroupQuery()?this.getDocumentsMatchingCollectionGroupQuery(e,t,n):this.getDocumentsMatchingCollectionQuery(e,t,n)},bc.prototype.getDocumentsMatchingDocumentQuery=function(e,t){return this.getDocument(e,new Qi(t)).next((function(e){var t=Do();return e instanceof Fs&&(t=t.insert(e.key,e)),t}))},bc.prototype.getDocumentsMatchingCollectionGroupQuery=function(e,t,n){var r=this;Br(t.path.isEmpty(),"Currently we only support collection group queries at the root.");var i=t.collectionGroup,o=Do();return this.indexManager.getCollectionParents(e,i).next((function(a){return Vo.forEach(a,(function(a){var s=t.asCollectionQueryAtPath(a.child(i));return r.getDocumentsMatchingCollectionQuery(e,s,n).next((function(e){e.forEach((function(e,t){o=o.insert(e,t)}))}))})).next((function(){return o}))}))},bc.prototype.getDocumentsMatchingCollectionQuery=function(e,t,n){var r,i,o=this;return this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n).next((function(n){return r=n,o.mutationQueue.getAllMutationBatchesAffectingQuery(e,t)})).next((function(t){return i=t,o.addMissingBaseDocuments(e,i,r).next((function(e){r=e;for(var t=0,n=i;t<n.length;t++)for(var o=n[t],a=0,s=o.mutations;a<s.length;a++){var u=s[a],c=u.key,l=r.get(c),h=u.applyToLocalView(l,l,o.localWriteTime);r=h instanceof Fs?r.insert(c,h):r.remove(c)}}))})).next((function(){return r.forEach((function(e,n){t.matches(n)||(r=r.remove(e))})),r}))},bc.prototype.addMissingBaseDocuments=function(e,t,n){for(var r=Oo(),i=0,o=t;i<o.length;i++)for(var a=0,s=o[i].mutations;a<s.length;a++){var u=s[a];u instanceof Oa&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.remoteDocumentCache.getEntries(e,r).next((function(e){return e.forEach((function(e,t){null!==t&&t instanceof Fs&&(c=c.insert(e,t))})),c}))},bc);function bc(e,t,n){this.remoteDocumentCache=e,this.mutationQueue=t,this.indexManager=n}var wc=(Ec.prototype.isEmpty=function(){return this.refsByKey.isEmpty()},Ec.prototype.addReference=function(e,t){var n=new Sc(e,t);this.refsByKey=this.refsByKey.add(n),this.refsByTarget=this.refsByTarget.add(n)},Ec.prototype.addReferences=function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))},Ec.prototype.removeReference=function(e,t){this.removeRef(new Sc(e,t))},Ec.prototype.removeReferences=function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))},Ec.prototype.removeReferencesForId=function(e){var t=this,n=Qi.EMPTY,r=new Sc(n,e),i=new Sc(n,e+1),o=[];return this.refsByTarget.forEachInRange([r,i],(function(e){t.removeRef(e),o.push(e.key)})),o},Ec.prototype.removeAllReferences=function(){var e=this;this.refsByKey.forEach((function(t){return e.removeRef(t)}))},Ec.prototype.removeRef=function(e){this.refsByKey=this.refsByKey.delete(e),this.refsByTarget=this.refsByTarget.delete(e)},Ec.prototype.referencesForId=function(e){var t=Qi.EMPTY,n=new Sc(t,e),r=new Sc(t,e+1),i=Oo();return this.refsByTarget.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i},Ec.prototype.containsKey=function(e){var t=new Sc(e,0),n=this.refsByKey.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)},Ec);function Ec(){this.refsByKey=new wo(Sc.compareByKey),this.refsByTarget=new wo(Sc.compareByTargetId)}var Sc=(Tc.compareByKey=function(e,t){return Qi.comparator(e.key,t.key)||wi(e.targetOrBatchId,t.targetOrBatchId)},Tc.compareByTargetId=function(e,t){return wi(e.targetOrBatchId,t.targetOrBatchId)||Qi.comparator(e.key,t.key)},Tc);function Tc(e,t){this.key=e,this.targetOrBatchId=t}var Cc="LocalStore",Ic=(kc.prototype.start=function(){return this.synchronizeLastDocumentChangeReadTime()},kc.prototype.handleUserChange=function(e){return s(this,void 0,void 0,(function(){var t,n,r,i=this;return u(this,(function(o){switch(o.label){case 0:return t=this.mutationQueue,n=this.localDocuments,[4,this.persistence.runTransaction("Handle user change","readonly-idempotent",(function(r){var o;return i.mutationQueue.getAllMutationBatches(r).next((function(a){return o=a,t=i.persistence.getMutationQueue(e),n=new vc(i.remoteDocuments,t,i.persistence.getIndexManager()),t.getAllMutationBatches(r)})).next((function(e){for(var t=[],i=[],a=Oo(),s=0,u=o;s<u.length;s++){var c=u[s];t.push(c.batchId);for(var l=0,h=c.mutations;l<h.length;l++){var f=h[l];a=a.add(f.key)}}for(var d=0,p=e;d<p.length;d++){c=p[d],i.push(c.batchId);for(var m=0,y=c.mutations;m<y.length;m++)f=y[m],a=a.add(f.key)}return n.getDocuments(r,a).next((function(e){return{affectedDocuments:e,removedBatchIds:t,addedBatchIds:i}}))}))}))];case 1:return r=o.sent(),this.mutationQueue=t,this.localDocuments=n,this.queryEngine.setLocalDocumentsView(this.localDocuments),[2,r]}}))}))},kc.prototype.localWrite=function(e){var t,n=this,r=so.now(),i=e.reduce((function(e,t){return e.add(t.key)}),Oo());return this.persistence.runTransaction("Locally write mutations","readwrite-idempotent",(function(o){return n.localDocuments.getDocuments(o,i).next((function(i){t=i;for(var a=[],s=0,u=e;s<u.length;s++){var c=u[s],l=c.extractBaseValue(t.get(c.key));null!=l&&a.push(new Oa(c.key,l,l.fieldMask(),Ca.exists(!0)))}return n.mutationQueue.addMutationBatch(o,r,a,e)}))})).then((function(e){var n=e.applyToLocalDocumentSet(t);return{batchId:e.batchId,changes:n}}))},kc.prototype.lookupMutationDocuments=function(e){var t=this;return this.persistence.runTransaction("Lookup mutation documents","readonly-idempotent",(function(n){return t.mutationQueue.lookupMutationKeys(n,e).next((function(e){return e?t.localDocuments.getDocuments(n,e):Vo.resolve(null)}))}))},kc.prototype.acknowledgeBatch=function(e){var t=this;return this.persistence.runTransaction("Acknowledge batch","readwrite-primary-idempotent",(function(n){var r=e.batch.keys(),i=t.remoteDocuments.newChangeBuffer({trackRemovals:!0});return t.mutationQueue.acknowledgeBatch(n,e.batch,e.streamToken).next((function(){return t.applyWriteToRemoteDocuments(n,e,i)})).next((function(){return i.apply(n)})).next((function(){return t.mutationQueue.performConsistencyCheck(n)})).next((function(){return t.localDocuments.getDocuments(n,r)}))}))},kc.prototype.rejectBatch=function(e){var t=this;return this.persistence.runTransaction("Reject batch","readwrite-primary-idempotent",(function(n){var r;return t.mutationQueue.lookupMutationBatch(n,e).next((function(e){return Br(null!==e,"Attempt to reject nonexistent batch!"),r=e.keys(),t.mutationQueue.removeMutationBatch(n,e)})).next((function(){return t.mutationQueue.performConsistencyCheck(n)})).next((function(){return t.localDocuments.getDocuments(n,r)}))}))},kc.prototype.getHighestUnacknowledgedBatchId=function(){var e=this;return this.persistence.runTransaction("Get highest unacknowledged batch id","readonly-idempotent",(function(t){return e.mutationQueue.getHighestUnacknowledgedBatchId(t)}))},kc.prototype.getLastStreamToken=function(){var e=this;return this.persistence.runTransaction("Get last stream token","readonly-idempotent",(function(t){return e.mutationQueue.getLastStreamToken(t)}))},kc.prototype.setLastStreamToken=function(e){var t=this;return this.persistence.runTransaction("Set last stream token","readwrite-primary-idempotent",(function(n){return t.mutationQueue.setLastStreamToken(n,e)}))},kc.prototype.getLastRemoteSnapshotVersion=function(){var e=this;return this.persistence.runTransaction("Get last remote snapshot version","readonly-idempotent",(function(t){return e.queryCache.getLastRemoteSnapshotVersion(t)}))},kc.prototype.applyRemoteEvent=function(e){var t=this,n=e.snapshotVersion,r=this.queryDataByTarget;return this.persistence.runTransaction("Apply remote event","readwrite-primary-idempotent",(function(i){var o=t.remoteDocuments.newChangeBuffer({trackRemovals:!0});r=t.queryDataByTarget;var a=[];Jr(e.targetChanges,(function(e,o){var s=r.get(e);if(s){a.push(t.queryCache.removeMatchingKeys(i,o.removedDocuments,e).next((function(){return t.queryCache.addMatchingKeys(i,o.addedDocuments,e)})));var u=o.resumeToken;if(0<u.length){var c=s.withResumeToken(u,n).withSequenceNumber(i.currentSequenceNumber);r=r.insert(e,c),kc.shouldPersistQueryData(s,c,o)&&a.push(t.queryCache.updateQueryData(i,c))}}}));var s=Io(),u=Oo();if(e.documentUpdates.forEach((function(e,t){u=u.add(e)})),a.push(o.getEntries(i,u).next((function(r){e.documentUpdates.forEach((function(u,c){var l=r.get(u);c instanceof Us&&c.version.isEqual(co.MIN)?(o.removeEntry(u,n),s=s.insert(u,c)):null==l||0<c.version.compareTo(l.version)||0===c.version.compareTo(l.version)&&l.hasPendingWrites?(co.MIN.isEqual(n)&&qr(Cc,"Cannot add a document when the remote version is zero"),o.addEntry(c,n),s=s.insert(u,c)):Fr(Cc,"Ignoring outdated watch update for ",u,". Current version:",l.version," Watch version:",c.version),e.resolvedLimboDocuments.has(u)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(i,u))}))}))),!n.isEqual(co.MIN)){var c=t.queryCache.getLastRemoteSnapshotVersion(i).next((function(e){return Br(0<=n.compareTo(e),"Watch stream reverted to previous snapshot?? "+n+" < "+e),t.queryCache.setTargetsMetadata(i,i.currentSequenceNumber,n)}));a.push(c)}return Vo.waitFor(a).next((function(){return o.apply(i)})).next((function(){return t.localDocuments.getLocalViewOfDocuments(i,s)}))})).then((function(e){return t.queryDataByTarget=r,e}))},kc.shouldPersistQueryData=function(e,t,n){return Br(0<t.resumeToken.length,"Attempted to persist query data with no resume token"),0===e.resumeToken.length||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=this.RESUME_TOKEN_MAX_AGE_MICROS||0<n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size},kc.prototype.notifyLocalViewChanges=function(e){for(var t=this,n=0,r=e;n<r.length;n++){var i=r[n],o=i.targetId;if(this.localViewReferences.addReferences(i.addedKeys,o),this.localViewReferences.removeReferences(i.removedKeys,o),!i.fromCache){var a=this.queryDataByTarget.get(o);Br(null!==a,"Can't set limbo-free snapshot version for unknown target: "+o);var s=a.snapshotVersion,u=a.withLastLimboFreeSnapshotVersion(s);this.queryDataByTarget=this.queryDataByTarget.insert(o,u)}}return this.persistence.runTransaction("notifyLocalViewChanges","readwrite-idempotent",(function(n){return Vo.forEach(e,(function(e){return Vo.forEach(e.removedKeys,(function(e){return t.persistence.referenceDelegate.removeReference(n,e)}))}))}))},kc.prototype.nextMutationBatch=function(e){var t=this;return this.persistence.runTransaction("Get next mutation batch","readonly-idempotent",(function(n){return void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(n,e)}))},kc.prototype.readDocument=function(e){var t=this;return this.persistence.runTransaction("read document","readonly-idempotent",(function(n){return t.localDocuments.getDocument(n,e)}))},kc.prototype.allocateQuery=function(e){var t=this;return this.persistence.runTransaction("Allocate query","readwrite-idempotent",(function(n){var r;return t.queryCache.getQueryData(n,e).next((function(i){return i?(r=i,Vo.resolve(r)):t.queryCache.allocateTargetId(n).next((function(i){return r=new ju(e,i,Lu.Listen,n.currentSequenceNumber),t.queryCache.addQueryData(n,r).next((function(){return r}))}))}))})).then((function(n){return Br(null===t.queryDataByTarget.get(n.targetId),"Tried to allocate an already allocated query: "+e),t.queryDataByTarget=t.queryDataByTarget.insert(n.targetId,n),t.targetIdByQuery.set(e,n.targetId),n}))},kc.prototype.getQueryData=function(e,t){var n=this.targetIdByQuery.get(t);return void 0!==n?Vo.resolve(this.queryDataByTarget.get(n)):this.queryCache.getQueryData(e,t)},kc.prototype.releaseQuery=function(e,t){var n,r=this,i=t?"readwrite-idempotent":"readwrite-primary-idempotent";return this.persistence.runTransaction("Release query",i,(function(i){var o=r.targetIdByQuery.get(e);Br(void 0!==o,"Tried to release nonexistent query: "+e),n=o;var a=r.queryDataByTarget.get(n),s=r.localViewReferences.removeReferencesForId(n);return t?Vo.resolve():Vo.forEach(s,(function(e){return r.persistence.referenceDelegate.removeReference(i,e)})).next((function(){r.persistence.referenceDelegate.removeTarget(i,a)}))})).then((function(){r.queryDataByTarget=r.queryDataByTarget.remove(n),r.targetIdByQuery.delete(e)}))},kc.prototype.executeQuery=function(e,t){var n=this,r=co.MIN,i=Oo();return this.persistence.runTransaction("Execute query","readonly-idempotent",(function(o){return n.getQueryData(o,e).next((function(e){if(e)return r=e.lastLimboFreeSnapshotVersion,n.queryCache.getMatchingKeysForTargetId(o,e.targetId).next((function(e){i=e}))})).next((function(){return n.queryEngine.getDocumentsMatchingQuery(o,e,t?r:co.MIN,t?i:Oo())})).next((function(e){return{documents:e,remoteKeys:i}}))}))},kc.prototype.remoteDocumentKeys=function(e){var t=this;return this.persistence.runTransaction("Remote document keys","readonly-idempotent",(function(n){return t.queryCache.getMatchingKeysForTargetId(n,e)}))},kc.prototype.getActiveClients=function(){return this.persistence.getActiveClients()},kc.prototype.removeCachedMutationBatchMetadata=function(e){this.mutationQueue.removeCachedMutationKeys(e)},kc.prototype.setNetworkEnabled=function(e){this.persistence.setNetworkEnabled(e)},kc.prototype.applyWriteToRemoteDocuments=function(e,t,n){var r=this,i=t.batch,o=i.keys(),a=Vo.resolve();return o.forEach((function(r){a=a.next((function(){return n.getEntry(e,r)})).next((function(e){var o=e,a=t.docVersions.get(r);Br(null!==a,"ackVersions should contain every doc in the write."),(!o||o.version.compareTo(a)<0)&&((o=i.applyToRemoteDocument(r,o,t))?n.addEntry(o,t.commitVersion):Br(!e,"Mutation batch "+i+" applied to document "+e+" resulted in null"))}))})),a.next((function(){return r.mutationQueue.removeMutationBatch(e,i)}))},kc.prototype.collectGarbage=function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary-idempotent",(function(n){return e.collect(n,t.queryDataByTarget)}))},kc.prototype.getQueryForTarget=function(e){var t=this,n=this.queryDataByTarget.get(e);return n?Promise.resolve(n.query):this.persistence.runTransaction("Get query data","readonly-idempotent",(function(n){return t.queryCache.getQueryDataForTarget(n,e).next((function(e){return e?e.query:null}))}))},kc.prototype.getNewDocumentChanges=function(){var e=this;return this.persistence.runTransaction("Get new document changes","readonly-idempotent",(function(t){return e.remoteDocuments.getNewDocumentChanges(t,e.lastDocumentChangeReadTime)})).then((function(t){var n=t.changedDocs,r=t.readTime;return e.lastDocumentChangeReadTime=r,n}))},kc.prototype.synchronizeLastDocumentChangeReadTime=function(){return s(this,void 0,void 0,(function(){var e,t=this;return u(this,(function(n){return this.remoteDocuments instanceof $s?(e=this.remoteDocuments,[2,this.persistence.runTransaction("Synchronize last document change read time","readonly-idempotent",(function(t){return e.getLastDocumentChange(t)})).then((function(e){var n=e.readTime;t.lastDocumentChangeReadTime=n}))]):[2]}))}))},kc.RESUME_TOKEN_MAX_AGE_MICROS=3e8,kc);function kc(e,t,n){this.persistence=e,this.queryEngine=t,this.localViewReferences=new wc,this.queryDataByTarget=new ho(wi),this.targetIdByQuery=new Ws((function(e){return e.canonicalId()})),this.lastDocumentChangeReadTime=co.MIN,Br(e.started,"LocalStore was passed an unstarted persistence implementation"),this.persistence.referenceDelegate.setInMemoryPins(this.localViewReferences),this.mutationQueue=e.getMutationQueue(n),this.remoteDocuments=e.getRemoteDocumentCache(),this.queryCache=e.getQueryCache(),this.localDocuments=new vc(this.remoteDocuments,this.mutationQueue,this.persistence.getIndexManager()),this.queryEngine.setLocalDocumentsView(this.localDocuments)}var Nc=(Dc.prototype.checkEmpty=function(e){return Vo.resolve(0===this.mutationQueue.length)},Dc.prototype.acknowledgeBatch=function(e,t,n){var r=t.batchId,i=this.indexOfExistingBatchId(r,"acknowledged");Br(0===i,"Can only acknowledge the first batch in the mutation queue");var o=this.mutationQueue[i];return Br(r===o.batchId,"Queue ordering failure: expected batch "+r+", got batch "+o.batchId),this.lastStreamToken=n,Vo.resolve()},Dc.prototype.getLastStreamToken=function(e){return Vo.resolve(this.lastStreamToken)},Dc.prototype.setLastStreamToken=function(e,t){return this.lastStreamToken=t,Vo.resolve()},Dc.prototype.addMutationBatch=function(e,t,n,r){Br(0!==r.length,"Mutation batches should not be empty");var i=this.nextBatchId;this.nextBatchId++,0<this.mutationQueue.length&&Br(this.mutationQueue[this.mutationQueue.length-1].batchId<i,"Mutation batchIDs must be monotonically increasing order");var o=new Mo(i,t,n,r);this.mutationQueue.push(o);for(var a=0,s=r;a<s.length;a++){var u=s[a];this.batchesByDocumentKey=this.batchesByDocumentKey.add(new Sc(u.key,i)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast())}return Vo.resolve(o)},Dc.prototype.lookupMutationBatch=function(e,t){return Vo.resolve(this.findMutationBatch(t))},Dc.prototype.lookupMutationKeys=function(e,t){var n=this.findMutationBatch(t);return Br(null!=n,"Failed to find local mutation batch."),Vo.resolve(n.keys())},Dc.prototype.getNextMutationBatchAfterBatchId=function(e,t){var n=t+1,r=this.indexOfBatchId(n),i=r<0?0:r;return Vo.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)},Dc.prototype.getHighestUnacknowledgedBatchId=function(){return Vo.resolve(0===this.mutationQueue.length?-1:this.nextBatchId-1)},Dc.prototype.getAllMutationBatches=function(e){return Vo.resolve(this.mutationQueue.slice())},Dc.prototype.getAllMutationBatchesAffectingDocumentKey=function(e,t){var n=this,r=new Sc(t,0),i=new Sc(t,Number.POSITIVE_INFINITY),o=[];return this.batchesByDocumentKey.forEachInRange([r,i],(function(e){Br(t.isEqual(e.key),"Should only iterate over a single key's batches");var r=n.findMutationBatch(e.targetOrBatchId);Br(null!==r,"Batches in the index must exist in the main table"),o.push(r)})),Vo.resolve(o)},Dc.prototype.getAllMutationBatchesAffectingDocumentKeys=function(e,t){var n=this,r=new wo(wi);return t.forEach((function(e){var t=new Sc(e,0),i=new Sc(e,Number.POSITIVE_INFINITY);n.batchesByDocumentKey.forEachInRange([t,i],(function(t){Br(e.isEqual(t.key),"For each key, should only iterate over a single key's batches"),r=r.add(t.targetOrBatchId)}))})),Vo.resolve(this.findMutationBatches(r))},Dc.prototype.getAllMutationBatchesAffectingQuery=function(e,t){Br(!t.isCollectionGroupQuery(),"CollectionGroup queries should be handled in LocalDocumentsView");var n=t.path,r=n.length+1,i=n;Qi.isDocumentKey(i)||(i=i.child(""));var o=new Sc(new Qi(i),0),a=new wo(wi);return this.batchesByDocumentKey.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(a=a.add(e.targetOrBatchId)),!0)}),o),Vo.resolve(this.findMutationBatches(a))},Dc.prototype.findMutationBatches=function(e){var t=this,n=[];return e.forEach((function(e){var r=t.findMutationBatch(e);null!==r&&n.push(r)})),n},Dc.prototype.removeMutationBatch=function(e,t){var n=this;Br(0===this.indexOfExistingBatchId(t.batchId,"removed"),"Can only remove the first entry of the mutation queue"),this.mutationQueue.shift();var r=this.batchesByDocumentKey;return Vo.forEach(t.mutations,(function(i){var o=new Sc(i.key,t.batchId);return r=r.delete(o),n.referenceDelegate.removeMutationReference(e,i.key)})).next((function(){n.batchesByDocumentKey=r}))},Dc.prototype.removeCachedMutationKeys=function(e){},Dc.prototype.containsKey=function(e,t){var n=new Sc(t,0),r=this.batchesByDocumentKey.firstAfterOrEqual(n);return Vo.resolve(t.isEqual(r&&r.key))},Dc.prototype.performConsistencyCheck=function(e){return 0===this.mutationQueue.length&&Br(this.batchesByDocumentKey.isEmpty(),"Document leak -- detected dangling mutation references when queue is empty."),Vo.resolve()},Dc.prototype.indexOfExistingBatchId=function(e,t){var n=this.indexOfBatchId(e);return Br(0<=n&&n<this.mutationQueue.length,"Batches must exist to be "+t),n},Dc.prototype.indexOfBatchId=function(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId},Dc.prototype.findMutationBatch=function(e){var t=this.indexOfBatchId(e);if(t<0||t>=this.mutationQueue.length)return null;var n=this.mutationQueue[t];return Br(n.batchId===e,"If found batch must match"),n},Dc);function Dc(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.nextBatchId=1,this.lastStreamToken=Qr(),this.batchesByDocumentKey=new wo(Sc.compareByKey)}var Ac=(_c.prototype.getTargetCount=function(e){return Vo.resolve(this.targetCount)},_c.prototype.forEachTarget=function(e,t){return this.queries.forEach((function(e,n){return t(n)})),Vo.resolve()},_c.prototype.getLastRemoteSnapshotVersion=function(e){return Vo.resolve(this.lastRemoteSnapshotVersion)},_c.prototype.getHighestSequenceNumber=function(e){return Vo.resolve(this.highestSequenceNumber)},_c.prototype.allocateTargetId=function(e){var t=this.targetIdGenerator.after(this.highestTargetId);return this.highestTargetId=t,Vo.resolve(t)},_c.prototype.setTargetsMetadata=function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.highestSequenceNumber&&(this.highestSequenceNumber=t),Vo.resolve()},_c.prototype.saveQueryData=function(e){this.queries.set(e.query,e);var t=e.targetId;t>this.highestTargetId&&(this.highestTargetId=t),e.sequenceNumber>this.highestSequenceNumber&&(this.highestSequenceNumber=e.sequenceNumber)},_c.prototype.addQueryData=function(e,t){return Br(!this.queries.has(t.query),"Adding a query that already exists"),this.saveQueryData(t),this.targetCount+=1,Vo.resolve()},_c.prototype.updateQueryData=function(e,t){return Br(this.queries.has(t.query),"Updating a non-existent query"),this.saveQueryData(t),Vo.resolve()},_c.prototype.removeQueryData=function(e,t){return Br(0<this.targetCount,"Removing a target from an empty cache"),Br(this.queries.has(t.query),"Removing a non-existent target from the cache"),this.queries.delete(t.query),this.references.removeReferencesForId(t.targetId),this.targetCount-=1,Vo.resolve()},_c.prototype.removeTargets=function(e,t,n){var r=this,i=0,o=[];return this.queries.forEach((function(a,s){s.sequenceNumber<=t&&null===n.get(s.targetId)&&(r.queries.delete(a),o.push(r.removeMatchingKeysForTargetId(e,s.targetId)),i++)})),Vo.waitFor(o).next((function(){return i}))},_c.prototype.getQueryCount=function(e){return Vo.resolve(this.targetCount)},_c.prototype.getQueryData=function(e,t){var n=this.queries.get(t)||null;return Vo.resolve(n)},_c.prototype.getQueryDataForTarget=function(e,t){return Ur("Not yet implemented.")},_c.prototype.addMatchingKeys=function(e,t,n){this.references.addReferences(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.addReference(e,t))})),Vo.waitFor(i)},_c.prototype.removeMatchingKeys=function(e,t,n){this.references.removeReferences(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.removeReference(e,t))})),Vo.waitFor(i)},_c.prototype.removeMatchingKeysForTargetId=function(e,t){return this.references.removeReferencesForId(t),Vo.resolve()},_c.prototype.getMatchingKeysForTargetId=function(e,t){var n=this.references.referencesForId(t);return Vo.resolve(n)},_c.prototype.containsKey=function(e,t){return Vo.resolve(this.references.containsKey(t))},_c);function _c(e){this.persistence=e,this.queries=new Ws((function(e){return e.canonicalId()})),this.lastRemoteSnapshotVersion=co.MIN,this.highestTargetId=0,this.highestSequenceNumber=0,this.references=new wc,this.targetCount=0,this.targetIdGenerator=Xo.forQueryCache()}var xc,Oc=(Rc.prototype.addEntry=function(e,t,n){Br(!n.isEqual(co.MIN),"Cannot add a document with a read time of zero");var r=t.key,i=this.docs.get(r),o=i?i.size:0,a=this.sizer(t);return this.docs=this.docs.insert(r,{maybeDocument:t,size:a,readTime:n}),this.size+=a-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())},Rc.prototype.removeEntry=function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)},Rc.prototype.getEntry=function(e,t){var n=this.docs.get(t);return Vo.resolve(n?n.maybeDocument:null)},Rc.prototype.getEntries=function(e,t){var n=this,r=ko();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.maybeDocument:null)})),Vo.resolve(r)},Rc.prototype.getDocumentsMatchingQuery=function(e,t,n){Br(!t.isCollectionGroupQuery(),"CollectionGroup queries should be handled in LocalDocumentsView");for(var r=Do(),i=new Qi(t.path.child("")),o=this.docs.getIteratorFrom(i);o.hasNext();){var a=o.getNext(),s=a.key,u=a.value,c=u.maybeDocument,l=u.readTime;if(!t.path.isPrefixOf(s.path))break;l.compareTo(n)<=0||c instanceof Fs&&t.matches(c)&&(r=r.insert(c.key,c))}return Vo.resolve(r)},Rc.prototype.forEachDocumentKey=function(e,t){return Vo.forEach(this.docs,(function(e){return t(e)}))},Rc.prototype.getNewDocumentChanges=function(e,t){throw new Error("getNewDocumentChanges() is not supported with MemoryPersistence")},Rc.prototype.newChangeBuffer=function(e){return new Rc.RemoteDocumentChangeBuffer(this)},Rc.prototype.getSize=function(e){return Vo.resolve(this.size)},Rc.RemoteDocumentChangeBuffer=(r(Pc,xc=Gs),Pc.prototype.applyChanges=function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i?n.push(t.documentCache.addEntry(e,i,t.readTime)):t.documentCache.removeEntry(r)})),Vo.waitFor(n)},Pc.prototype.getFromCache=function(e,t){return this.documentCache.getEntry(e,t)},Pc.prototype.getAllFromCache=function(e,t){return this.documentCache.getEntries(e,t)},Pc),Rc);function Rc(e,t){this.indexManager=e,this.sizer=t,this.docs=new ho(Qi.comparator),this.size=0}function Pc(e){var t=xc.call(this)||this;return t.documentCache=e,t}var Mc=(Lc.createLruPersistence=function(e,t,n){return new Lc(e,(function(e){return new jc(e,new Qu(t),n)}))},Lc.createEagerPersistence=function(e){return new Lc(e,(function(e){return new Uc(e)}))},Lc.prototype.shutdown=function(){return this._started=!1,Promise.resolve()},Object.defineProperty(Lc.prototype,"started",{get:function(){return this._started},enumerable:!0,configurable:!0}),Lc.prototype.getActiveClients=function(){return s(this,void 0,void 0,(function(){return u(this,(function(e){return[2,[this.clientId]]}))}))},Lc.prototype.setPrimaryStateListener=function(e){return e(!0)},Lc.prototype.setDatabaseDeletedListener=function(){},Lc.prototype.setNetworkEnabled=function(e){},Lc.prototype.getIndexManager=function(){return this.indexManager},Lc.prototype.getMutationQueue=function(e){var t=this.mutationQueues[e.toKey()];return t||(t=new Nc(this.indexManager,this.referenceDelegate),this.mutationQueues[e.toKey()]=t),t},Lc.prototype.getQueryCache=function(){return this.queryCache},Lc.prototype.getRemoteDocumentCache=function(){return this.remoteDocumentCache},Lc.prototype.runTransaction=function(e,t,n){var r=this;Fr("MemoryPersistence","Starting transaction:",e);var i=new qc(this.listenSequence.next());return this.referenceDelegate.onTransactionStarted(),n(i).next((function(e){return r.referenceDelegate.onTransactionCommitted(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))},Lc.prototype.mutationQueuesContainKey=function(e,t){return Vo.or(function(e){var t=[];return Zr(e,(function(e,n){return t.push(n)})),t}(this.mutationQueues).map((function(n){return function(){return n.containsKey(e,t)}})))},Lc);function Lc(e,t){var n=this;this.clientId=e,this.mutationQueues={},this.listenSequence=new Oi(0),this._started=!1,this._started=!0,this.referenceDelegate=t(this),this.queryCache=new Ac(this),this.indexManager=new ru,this.remoteDocumentCache=new Oc(this.indexManager,(function(e){return n.referenceDelegate.documentSize(e)}))}var Fc,qc=(r(Vc,Fc=nc),Vc);function Vc(e){var t=Fc.call(this)||this;return t.currentSequenceNumber=e,t}var Uc=(Object.defineProperty(Bc.prototype,"orphanedDocuments",{get:function(){if(this._orphanedDocuments)return this._orphanedDocuments;throw Ur("orphanedDocuments is only valid during a transaction.")},enumerable:!0,configurable:!0}),Bc.prototype.setInMemoryPins=function(e){this.inMemoryPins=e},Bc.prototype.addReference=function(e,t){return this.orphanedDocuments.delete(t),Vo.resolve()},Bc.prototype.removeReference=function(e,t){return this.orphanedDocuments.add(t),Vo.resolve()},Bc.prototype.removeMutationReference=function(e,t){return this.orphanedDocuments.add(t),Vo.resolve()},Bc.prototype.removeTarget=function(e,t){var n=this,r=this.persistence.getQueryCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.orphanedDocuments.add(e)}))})).next((function(){return r.removeQueryData(e,t)}))},Bc.prototype.onTransactionStarted=function(){this._orphanedDocuments=new Set},Bc.prototype.onTransactionCommitted=function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Vo.forEach(this.orphanedDocuments,(function(r){return t.isReferenced(e,r).next((function(e){e||n.removeEntry(r)}))})).next((function(){return t._orphanedDocuments=null,n.apply(e)}))},Bc.prototype.updateLimboDocument=function(e,t){var n=this;return this.isReferenced(e,t).next((function(e){e?n.orphanedDocuments.delete(t):n.orphanedDocuments.add(t)}))},Bc.prototype.documentSize=function(e){return 0},Bc.prototype.isReferenced=function(e,t){var n=this;return Vo.or([function(){return n.persistence.getQueryCache().containsKey(e,t)},function(){return n.persistence.mutationQueuesContainKey(e,t)},function(){return Vo.resolve(n.inMemoryPins.containsKey(t))}])},Bc);function Bc(e){this.persistence=e,this.inMemoryPins=null,this._orphanedDocuments=null}var jc=(zc.prototype.onTransactionStarted=function(){},zc.prototype.onTransactionCommitted=function(e){return Vo.resolve()},zc.prototype.forEachTarget=function(e,t){return this.persistence.getQueryCache().forEachTarget(e,t)},zc.prototype.getSequenceNumberCount=function(e){var t=this.orphanedDocumentCount(e);return this.persistence.getQueryCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))},zc.prototype.orphanedDocumentCount=function(e){var t=0;return this.forEachOrphanedDocumentSequenceNumber(e,(function(e){t++})).next((function(){return t}))},zc.prototype.forEachOrphanedDocumentSequenceNumber=function(e,t){var n=this;return Vo.forEach(this.orphanedSequenceNumbers,(function(r,i){return n.isPinned(e,r,i).next((function(e){return e?Vo.resolve():t(i)}))}))},zc.prototype.setInMemoryPins=function(e){this.inMemoryPins=e},zc.prototype.removeTargets=function(e,t,n){return this.persistence.getQueryCache().removeTargets(e,t,n)},zc.prototype.removeOrphanedDocuments=function(e,t){var n=this,r=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.forEachDocumentKey(e,(function(i){return n.isPinned(e,i,t).next((function(e){e||(r++,o.removeEntry(i))}))})).next((function(){return o.apply(e)})).next((function(){return r}))},zc.prototype.removeMutationReference=function(e,t){return this.orphanedSequenceNumbers.set(t,e.currentSequenceNumber),Vo.resolve()},zc.prototype.removeTarget=function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getQueryCache().updateQueryData(e,n)},zc.prototype.addReference=function(e,t){return this.orphanedSequenceNumbers.set(t,e.currentSequenceNumber),Vo.resolve()},zc.prototype.removeReference=function(e,t){return this.orphanedSequenceNumbers.set(t,e.currentSequenceNumber),Vo.resolve()},zc.prototype.updateLimboDocument=function(e,t){return this.orphanedSequenceNumbers.set(t,e.currentSequenceNumber),Vo.resolve()},zc.prototype.documentSize=function(e){var t,n=this.serializer.toDbRemoteDocument(e,e.version);if(n.document)t=n.document;else if(n.unknownDocument)t=n.unknownDocument;else{if(!n.noDocument)throw Ur("Unknown remote document type");t=n.noDocument}return JSON.stringify(t).length},zc.prototype.isPinned=function(e,t,n){var r=this;return Vo.or([function(){return r.persistence.mutationQueuesContainKey(e,t)},function(){return Vo.resolve(r.inMemoryPins.containsKey(t))},function(){return r.persistence.getQueryCache().containsKey(e,t)},function(){var e=r.orphanedSequenceNumbers.get(t);return Vo.resolve(void 0!==e&&n<e)}])},zc.prototype.getCacheSize=function(e){return this.persistence.getRemoteDocumentCache().getSize(e)},zc);function zc(e,t,n){this.persistence=e,this.serializer=t,this.inMemoryPins=null,this.orphanedSequenceNumbers=new Ws((function(e){return ro(e.path)})),this.garbageCollector=new ec(this,n)}var Qc=(Wc.prototype.setLocalDocumentsView=function(e){this.localDocumentsView=e},Wc.prototype.getDocumentsMatchingQuery=function(e,t,n,r){return Br(void 0!==this.localDocumentsView,"setLocalDocumentsView() not called"),this.localDocumentsView.getDocumentsMatchingQuery(e,t,co.MIN)},Wc);function Wc(){}var Kc=Number,Gc=Kc.MIN_SAFE_INTEGER||-(Math.pow(2,53)-1),Hc=Kc.MAX_SAFE_INTEGER||Math.pow(2,53)-1,Yc=Kc.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e};function $c(e){return null==e}function Xc(e){return Yc(e)&&e<=Hc&&Gc<=e}var Jc=(Zc.prototype.reset=function(){this.currentBaseMs=0},Zc.prototype.resetToMax=function(){this.currentBaseMs=this.maxDelayMs},Zc.prototype.backoffAndRun=function(e){var t=this;this.cancel();var n=Math.floor(this.currentBaseMs+this.jitterDelayMs()),r=Math.max(0,Date.now()-this.lastAttemptTime),i=Math.max(0,n-r);0<this.currentBaseMs&&Fr("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.currentBaseMs+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.timerPromise=this.queue.enqueueAfterDelay(this.timerId,i,(function(){return t.lastAttemptTime=Date.now(),e()})),this.currentBaseMs*=this.backoffFactor,this.currentBaseMs<this.initialDelayMs&&(this.currentBaseMs=this.initialDelayMs),this.currentBaseMs>this.maxDelayMs&&(this.currentBaseMs=this.maxDelayMs)},Zc.prototype.cancel=function(){null!==this.timerPromise&&(this.timerPromise.cancel(),this.timerPromise=null)},Zc.prototype.jitterDelayMs=function(){return(Math.random()-.5)*this.currentBaseMs},Zc);function Zc(e,t,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.queue=e,this.timerId=t,this.initialDelayMs=n,this.backoffFactor=r,this.maxDelayMs=i,this.currentBaseMs=0,this.timerPromise=null,this.lastAttemptTime=Date.now(),this.reset()}var el,tl,nl="PersistentStream";(tl=el=el||{})[tl.Initial=0]="Initial",tl[tl.Starting=1]="Starting",tl[tl.Open=2]="Open",tl[tl.Error=3]="Error",tl[tl.Backoff=4]="Backoff";var rl=(il.prototype.isStarted=function(){return this.state===el.Starting||this.state===el.Open||this.state===el.Backoff},il.prototype.isOpen=function(){return this.state===el.Open},il.prototype.start=function(){this.state!==el.Error?(Br(this.state===el.Initial,"Already started"),this.auth()):this.performBackoff()},il.prototype.stop=function(){return s(this,void 0,void 0,(function(){return u(this,(function(e){switch(e.label){case 0:return this.isStarted()?[4,this.close(el.Initial)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))},il.prototype.inhibitBackoff=function(){Br(!this.isStarted(),"Can only inhibit backoff in a stopped state"),this.state=el.Initial,this.backoff.reset()},il.prototype.markIdle=function(){var e=this;this.isOpen()&&null===this.idleTimer&&(this.idleTimer=this.queue.enqueueAfterDelay(this.idleTimerId,6e4,(function(){return e.handleIdleCloseTimer()})))},il.prototype.sendRequest=function(e){this.cancelIdleCheck(),this.stream.send(e)},il.prototype.handleIdleCloseTimer=function(){return s(this,void 0,void 0,(function(){return u(this,(function(e){return this.isOpen()?[2,this.close(el.Initial)]:[2]}))}))},il.prototype.cancelIdleCheck=function(){this.idleTimer&&(this.idleTimer.cancel(),this.idleTimer=null)},il.prototype.close=function(e,t){return s(this,void 0,void 0,(function(){return u(this,(function(n){switch(n.label){case 0:return Br(this.isStarted(),"Only started streams should be closed."),Br(e===el.Error||$c(t),"Can't provide an error when not in an error state."),this.cancelIdleCheck(),this.backoff.cancel(),this.closeCount++,e!==el.Error?this.backoff.reset():t&&t.code===Kr.RESOURCE_EXHAUSTED?(qr(t.toString()),qr("Using maximum backoff delay to prevent overloading the backend."),this.backoff.resetToMax()):t&&t.code===Kr.UNAUTHENTICATED&&this.credentialsProvider.invalidateToken(),null!==this.stream&&(this.tearDown(),this.stream.close(),this.stream=null),this.state=e,[4,this.listener.onClose(t)];case 1:return n.sent(),[2]}}))}))},il.prototype.tearDown=function(){},il.prototype.auth=function(){var e=this;Br(this.state===el.Initial,"Must be in initial state to auth"),this.state=el.Starting;var t=this.getCloseGuardedDispatcher(this.closeCount),n=this.closeCount;this.credentialsProvider.getToken().then((function(t){e.closeCount===n&&e.startStream(t)}),(function(n){t((function(){var t=new Gr(Kr.UNKNOWN,"Fetching auth token failed: "+n.message);return e.handleStreamClose(t)}))}))},il.prototype.startStream=function(e){var t=this;Br(this.state===el.Starting,"Trying to start stream in a non-starting state");var n=this.getCloseGuardedDispatcher(this.closeCount);this.stream=this.startRpc(e),this.stream.onOpen((function(){n((function(){return Br(t.state===el.Starting,"Expected stream to be in state Starting, but was "+t.state),t.state=el.Open,t.listener.onOpen()}))})),this.stream.onClose((function(e){n((function(){return t.handleStreamClose(e)}))})),this.stream.onMessage((function(e){n((function(){return t.onMessage(e)}))}))},il.prototype.performBackoff=function(){var e=this;Br(this.state===el.Error,"Should only perform backoff when in Error state"),this.state=el.Backoff,this.backoff.backoffAndRun((function(){return s(e,void 0,void 0,(function(){return u(this,(function(e){return Br(this.state===el.Backoff,"Backoff elapsed but state is now: "+this.state),this.state=el.Initial,this.start(),Br(this.isStarted(),"PersistentStream should have started"),[2]}))}))}))},il.prototype.handleStreamClose=function(e){return Br(this.isStarted(),"Can't handle server close on non-started stream"),Fr(nl,"close with error: "+e),this.stream=null,this.close(el.Error,e)},il.prototype.getCloseGuardedDispatcher=function(e){var t=this;return function(n){t.queue.enqueueAndForget((function(){return t.closeCount===e?n():(Fr(nl,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}},il);function il(e,t,n,r,i,o){this.queue=e,this.idleTimerId=n,this.connection=r,this.credentialsProvider=i,this.listener=o,this.state=el.Initial,this.closeCount=0,this.idleTimer=null,this.stream=null,this.backoff=new Jc(e,t)}var ol,al=(r(sl,ol=rl),sl.prototype.startRpc=function(e){return this.connection.openStream("Listen",e)},sl.prototype.onMessage=function(e){this.backoff.reset();var t=this.serializer.fromWatchChange(e),n=this.serializer.versionFromListenResponse(e);return this.listener.onWatchChange(t,n)},sl.prototype.watch=function(e){var t={};t.database=this.serializer.encodedDatabaseId,t.addTarget=this.serializer.toTarget(e);var n=this.serializer.toListenRequestLabels(e);n&&(t.labels=n),this.sendRequest(t)},sl.prototype.unwatch=function(e){var t={};t.database=this.serializer.encodedDatabaseId,t.removeTarget=e,this.sendRequest(t)},sl);function sl(e,t,n,r,i){var o=ol.call(this,e,Ki.ListenStreamConnectionBackoff,Ki.ListenStreamIdle,t,n,i)||this;return o.serializer=r,o}var ul,cl=(r(ll,ul=rl),Object.defineProperty(ll.prototype,"handshakeComplete",{get:function(){return this.handshakeComplete_},enumerable:!0,configurable:!0}),ll.prototype.start=function(){this.handshakeComplete_=!1,ul.prototype.start.call(this)},ll.prototype.tearDown=function(){this.handshakeComplete_&&this.writeMutations([])},ll.prototype.startRpc=function(e){return this.connection.openStream("Write",e)},ll.prototype.onMessage=function(e){if(Br(!!e.streamToken,"Got a write response without a stream token"),this.lastStreamToken=e.streamToken,this.handshakeComplete_){this.backoff.reset();var t=this.serializer.fromWriteResults(e.writeResults,e.commitTime),n=this.serializer.fromVersion(e.commitTime);return this.listener.onMutationResult(n,t)}return Br(!e.writeResults||0===e.writeResults.length,"Got mutation results for handshake"),this.handshakeComplete_=!0,this.listener.onHandshakeComplete()},ll.prototype.writeHandshake=function(){Br(this.isOpen(),"Writing handshake requires an opened stream"),Br(!this.handshakeComplete_,"Handshake already completed");var e={};e.database=this.serializer.encodedDatabaseId,this.sendRequest(e)},ll.prototype.writeMutations=function(e){var t=this;Br(this.isOpen(),"Writing mutations requires an opened stream"),Br(this.handshakeComplete_,"Handshake must be complete before writing mutations"),Br(0<this.lastStreamToken.length,"Trying to write mutation without a token");var n={streamToken:this.lastStreamToken,writes:e.map((function(e){return t.serializer.toMutation(e)}))};this.sendRequest(n)},ll);function ll(e,t,n,r,i){var o=ul.call(this,e,Ki.WriteStreamConnectionBackoff,Ki.WriteStreamIdle,t,n,i)||this;return o.serializer=r,o.handshakeComplete_=!1,o.lastStreamToken=Qr(),o}var hl=(fl.prototype.newPersistentWriteStream=function(e){return new cl(this.queue,this.connection,this.credentials,this.serializer,e)},fl.prototype.newPersistentWatchStream=function(e){return new al(this.queue,this.connection,this.credentials,this.serializer,e)},fl.prototype.commit=function(e){var t=this,n={database:this.serializer.encodedDatabaseId,writes:e.map((function(e){return t.serializer.toMutation(e)}))};return this.invokeRPC("Commit",n).then((function(e){return t.serializer.fromWriteResults(e.writeResults,e.commitTime)}))},fl.prototype.lookup=function(e){var t=this,n={database:this.serializer.encodedDatabaseId,documents:e.map((function(e){return t.serializer.toName(e)}))};return this.invokeStreamingRPC("BatchGetDocuments",n).then((function(n){var r=Io();n.forEach((function(e){var n=t.serializer.fromMaybeDocument(e);r=r.insert(n.key,n)}));var i=[];return e.forEach((function(e){var t=r.get(e);Br(!!t,"Missing entity in write response for "+e),i.push(t)})),i}))},fl.prototype.invokeRPC=function(e,t){var n=this;return this.credentials.getToken().then((function(r){return n.connection.invokeRPC(e,t,r)})).catch((function(e){throw e.code===Kr.UNAUTHENTICATED&&n.credentials.invalidateToken(),e}))},fl.prototype.invokeStreamingRPC=function(e,t){var n=this;return this.credentials.getToken().then((function(r){return n.connection.invokeStreamingRPC(e,t,r)})).catch((function(e){throw e.code===Kr.UNAUTHENTICATED&&n.credentials.invalidateToken(),e}))},fl);function fl(e,t,n,r){this.queue=e,this.connection=t,this.credentials=n,this.serializer=r}var dl,pl,ml,yl,gl=(vl.prototype.lookup=function(e){return s(this,void 0,void 0,(function(){var t,n=this;return u(this,(function(r){switch(r.label){case 0:if(this.ensureCommitNotCalled(),0<this.mutations.length)throw new Gr(Kr.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,this.datastore.lookup(e)];case 1:return(t=r.sent()).forEach((function(e){e instanceof Us||e instanceof Fs?n.recordVersion(e):Ur("Document in a transaction was a "+e.constructor.name)})),[2,t]}}))}))},vl.prototype.set=function(e,t){this.write(t.toMutations(e,this.precondition(e))),this.writtenDocs.add(e)},vl.prototype.update=function(e,t){try{this.write(t.toMutations(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e)},vl.prototype.delete=function(e){this.write([new ja(e,this.precondition(e))]),this.writtenDocs.add(e)},vl.prototype.commit=function(){return s(this,void 0,void 0,(function(){var e;return u(this,(function(t){switch(t.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;if(e=this.readVersions,this.mutations.forEach((function(t){e=e.remove(t.key)})),!e.isEmpty())throw new Gr(Kr.INVALID_ARGUMENT,"Every document read in a transaction must also be written.");return[4,this.datastore.commit(this.mutations)];case 1:return t.sent(),this.committed=!0,[2]}}))}))},vl.prototype.recordVersion=function(e){var t;if(e instanceof Fs)t=e.version;else{if(!(e instanceof Us))throw Ur("Document in a transaction was a "+e.constructor.name);t=co.forDeletedDoc()}var n=this.readVersions.get(e.key);if(null!==n){if(!t.isEqual(n))throw new Gr(Kr.ABORTED,"Document version changed between two reads.")}else this.readVersions=this.readVersions.insert(e.key,t)},vl.prototype.precondition=function(e){var t=this.readVersions.get(e);return!this.writtenDocs.has(e)&&t?Ca.updateTime(t):Ca.NONE},vl.prototype.preconditionForUpdate=function(e){var t=this.readVersions.get(e);if(this.writtenDocs.has(e)||!t)return Ca.exists(!0);if(t.isEqual(co.forDeletedDoc()))throw new Gr(Kr.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ca.updateTime(t)},vl.prototype.write=function(e){this.ensureCommitNotCalled(),this.mutations=this.mutations.concat(e)},vl.prototype.ensureCommitNotCalled=function(){Br(!this.committed,"A transaction object cannot be used after its update callback has been invoked.")},vl);function vl(e){this.datastore=e,this.readVersions=_o(),this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}(pl=dl=dl||{})[pl.Unknown=0]="Unknown",pl[pl.Online=1]="Online",pl[pl.Offline=2]="Offline",(yl=ml=ml||{})[yl.RemoteStore=0]="RemoteStore",yl[yl.SharedClientState=1]="SharedClientState";var bl,wl,El=(Sl.prototype.handleWatchStreamStart=function(){var e=this;0===this.watchStreamFailures&&(this.setAndBroadcast(dl.Unknown),Br(null===this.onlineStateTimer,"onlineStateTimer shouldn't be started yet"),this.onlineStateTimer=this.asyncQueue.enqueueAfterDelay(Ki.OnlineStateTimeout,1e4,(function(){return e.onlineStateTimer=null,Br(e.state===dl.Unknown,"Timer should be canceled if we transitioned to a different state."),e.logClientOfflineWarningIfNecessary("Backend didn't respond within 10 seconds."),e.setAndBroadcast(dl.Offline),Promise.resolve()})))},Sl.prototype.handleWatchStreamFailure=function(e){this.state===dl.Online?(this.setAndBroadcast(dl.Unknown),Br(0===this.watchStreamFailures,"watchStreamFailures must be 0"),Br(null===this.onlineStateTimer,"onlineStateTimer must be null")):(this.watchStreamFailures++,1<=this.watchStreamFailures&&(this.clearOnlineStateTimer(),this.logClientOfflineWarningIfNecessary("Connection failed 1 times. Most recent error: "+e.toString()),this.setAndBroadcast(dl.Offline)))},Sl.prototype.set=function(e){this.clearOnlineStateTimer(),this.watchStreamFailures=0,e===dl.Online&&(this.shouldWarnClientIsOffline=!1),this.setAndBroadcast(e)},Sl.prototype.setAndBroadcast=function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))},Sl.prototype.logClientOfflineWarningIfNecessary=function(e){var t="Could not reach Cloud Firestore backend. "+e+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.shouldWarnClientIsOffline?(qr(t),this.shouldWarnClientIsOffline=!1):Fr("OnlineStateTracker",t)},Sl.prototype.clearOnlineStateTimer=function(){null!==this.onlineStateTimer&&(this.onlineStateTimer.cancel(),this.onlineStateTimer=null)},Sl);function Sl(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state=dl.Unknown,this.watchStreamFailures=0,this.onlineStateTimer=null,this.shouldWarnClientIsOffline=!0}function Tl(e){switch(e){case Kr.OK:return Ur("Treated status OK as error");case Kr.CANCELLED:case Kr.UNKNOWN:case Kr.DEADLINE_EXCEEDED:case Kr.RESOURCE_EXHAUSTED:case Kr.INTERNAL:case Kr.UNAVAILABLE:case Kr.UNAUTHENTICATED:return!1;case Kr.INVALID_ARGUMENT:case Kr.NOT_FOUND:case Kr.ALREADY_EXISTS:case Kr.PERMISSION_DENIED:case Kr.FAILED_PRECONDITION:case Kr.ABORTED:case Kr.OUT_OF_RANGE:case Kr.UNIMPLEMENTED:case Kr.DATA_LOSS:return!0;default:return Ur("Unknown status code: "+e)}}function Cl(e){if(void 0===e)return qr("GRPC error has no .code"),Kr.UNKNOWN;switch(e){case bl.OK:return Kr.OK;case bl.CANCELLED:return Kr.CANCELLED;case bl.UNKNOWN:return Kr.UNKNOWN;case bl.DEADLINE_EXCEEDED:return Kr.DEADLINE_EXCEEDED;case bl.RESOURCE_EXHAUSTED:return Kr.RESOURCE_EXHAUSTED;case bl.INTERNAL:return Kr.INTERNAL;case bl.UNAVAILABLE:return Kr.UNAVAILABLE;case bl.UNAUTHENTICATED:return Kr.UNAUTHENTICATED;case bl.INVALID_ARGUMENT:return Kr.INVALID_ARGUMENT;case bl.NOT_FOUND:return Kr.NOT_FOUND;case bl.ALREADY_EXISTS:return Kr.ALREADY_EXISTS;case bl.PERMISSION_DENIED:return Kr.PERMISSION_DENIED;case bl.FAILED_PRECONDITION:return Kr.FAILED_PRECONDITION;case bl.ABORTED:return Kr.ABORTED;case bl.OUT_OF_RANGE:return Kr.OUT_OF_RANGE;case bl.UNIMPLEMENTED:return Kr.UNIMPLEMENTED;case bl.DATA_LOSS:return Kr.DATA_LOSS;default:return Ur("Unknown status code: "+e)}}(wl=bl=bl||{})[wl.OK=0]="OK",wl[wl.CANCELLED=1]="CANCELLED",wl[wl.UNKNOWN=2]="UNKNOWN",wl[wl.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",wl[wl.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",wl[wl.NOT_FOUND=5]="NOT_FOUND",wl[wl.ALREADY_EXISTS=6]="ALREADY_EXISTS",wl[wl.PERMISSION_DENIED=7]="PERMISSION_DENIED",wl[wl.UNAUTHENTICATED=16]="UNAUTHENTICATED",wl[wl.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",wl[wl.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",wl[wl.ABORTED=10]="ABORTED",wl[wl.OUT_OF_RANGE=11]="OUT_OF_RANGE",wl[wl.UNIMPLEMENTED=12]="UNIMPLEMENTED",wl[wl.INTERNAL=13]="INTERNAL",wl[wl.UNAVAILABLE=14]="UNAVAILABLE",wl[wl.DATA_LOSS=15]="DATA_LOSS";var Il,kl,Nl,Dl,Al=(_l.emptySet=function(e){return new _l(e.comparator)},_l.prototype.has=function(e){return null!=this.keyedMap.get(e)},_l.prototype.get=function(e){return this.keyedMap.get(e)},_l.prototype.first=function(){return this.sortedSet.minKey()},_l.prototype.last=function(){return this.sortedSet.maxKey()},_l.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},_l.prototype.indexOf=function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1},Object.defineProperty(_l.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!0,configurable:!0}),_l.prototype.forEach=function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))},_l.prototype.add=function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))},_l.prototype.delete=function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this},_l.prototype.isEqual=function(e){if(!(e instanceof _l))return!1;if(this.size!==e.size)return!1;for(var t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();t.hasNext();){var r=t.getNext().key,i=n.getNext().key;if(!r.isEqual(i))return!1}return!0},_l.prototype.toString=function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"},_l.prototype.copy=function(e,t){var n=new _l;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n},_l);function _l(e){this.comparator=e?function(t,n){return e(t,n)||Qi.comparator(t.key,n.key)}:function(e,t){return Qi.comparator(e.key,t.key)},this.keyedMap=Do(),this.sortedSet=new ho(this.comparator)}(kl=Il=Il||{})[kl.Added=0]="Added",kl[kl.Removed=1]="Removed",kl[kl.Modified=2]="Modified",kl[kl.Metadata=3]="Metadata",(Dl=Nl=Nl||{})[Dl.Local=0]="Local",Dl[Dl.Synced=1]="Synced";var xl=(Ol.prototype.track=function(e){var t=e.doc.key,n=this.changeMap.get(t);n?e.type!==Il.Added&&n.type===Il.Metadata?this.changeMap=this.changeMap.insert(t,e):e.type===Il.Metadata&&n.type!==Il.Removed?this.changeMap=this.changeMap.insert(t,{type:n.type,doc:e.doc}):e.type===Il.Modified&&n.type===Il.Modified?this.changeMap=this.changeMap.insert(t,{type:Il.Modified,doc:e.doc}):e.type===Il.Modified&&n.type===Il.Added?this.changeMap=this.changeMap.insert(t,{type:Il.Added,doc:e.doc}):e.type===Il.Removed&&n.type===Il.Added?this.changeMap=this.changeMap.remove(t):e.type===Il.Removed&&n.type===Il.Modified?this.changeMap=this.changeMap.insert(t,{type:Il.Removed,doc:n.doc}):e.type===Il.Added&&n.type===Il.Removed?this.changeMap=this.changeMap.insert(t,{type:Il.Modified,doc:e.doc}):Ur("unsupported combination of changes: "+JSON.stringify(e)+" after "+JSON.stringify(n)):this.changeMap=this.changeMap.insert(t,e)},Ol.prototype.getChanges=function(){var e=[];return this.changeMap.inorderTraversal((function(t,n){e.push(n)})),e},Ol);function Ol(){this.changeMap=new ho(Qi.comparator)}var Rl=(Pl.fromInitialDocuments=function(e,t,n,r){var i=[];return t.forEach((function(e){i.push({type:Il.Added,doc:e})})),new Pl(e,t,Al.emptySet(t),i,n,r,!0,!1)},Object.defineProperty(Pl.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!0,configurable:!0}),Pl.prototype.isEqual=function(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&this.query.isEqual(e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0},Pl);function Pl(e,t,n,r,i,o,a,s){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=s}var Ml=(Ll.createSynthesizedRemoteEventForCurrentChange=function(e,t){var n,r=((n={})[e]=Fl.createSynthesizedTargetChangeForCurrentChange(e,t),n);return new Ll(co.MIN,r,Po(),Io(),Oo())},Ll);function Ll(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}var Fl=(ql.createSynthesizedTargetChangeForCurrentChange=function(e,t){return new ql(Qr(),t,Oo(),Oo(),Oo())},ql);function ql(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}var Vl,Ul,Bl=function(e,t,n,r){this.updatedTargetIds=e,this.removedTargetIds=t,this.key=n,this.newDoc=r},jl=function(e,t){this.targetId=e,this.existenceFilter=t};(Ul=Vl=Vl||{})[Ul.NoChange=0]="NoChange",Ul[Ul.Added=1]="Added",Ul[Ul.Removed=2]="Removed",Ul[Ul.Current=3]="Current",Ul[Ul.Reset=4]="Reset";var zl=function(e,t,n,r){void 0===n&&(n=Qr()),void 0===r&&(r=null),this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r},Ql=(Object.defineProperty(Wl.prototype,"current",{get:function(){return this._current},enumerable:!0,configurable:!0}),Object.defineProperty(Wl.prototype,"resumeToken",{get:function(){return this._resumeToken},enumerable:!0,configurable:!0}),Object.defineProperty(Wl.prototype,"isPending",{get:function(){return 0!==this.pendingResponses},enumerable:!0,configurable:!0}),Object.defineProperty(Wl.prototype,"hasPendingChanges",{get:function(){return this._hasPendingChanges},enumerable:!0,configurable:!0}),Wl.prototype.updateResumeToken=function(e){0<e.length&&(this._hasPendingChanges=!0,this._resumeToken=e)},Wl.prototype.toTargetChange=function(){var e=Oo(),t=Oo(),n=Oo();return this.documentChanges.forEach((function(r,i){switch(i){case Il.Added:e=e.add(r);break;case Il.Modified:t=t.add(r);break;case Il.Removed:n=n.add(r);break;default:Ur("Encountered invalid change type: "+i)}})),new Fl(this._resumeToken,this._current,e,t,n)},Wl.prototype.clearPendingChanges=function(){this._hasPendingChanges=!1,this.documentChanges=Yl()},Wl.prototype.addDocumentChange=function(e,t){this._hasPendingChanges=!0,this.documentChanges=this.documentChanges.insert(e,t)},Wl.prototype.removeDocumentChange=function(e){this._hasPendingChanges=!0,this.documentChanges=this.documentChanges.remove(e)},Wl.prototype.recordPendingTargetRequest=function(){this.pendingResponses+=1},Wl.prototype.recordTargetResponse=function(){this.pendingResponses-=1},Wl.prototype.markCurrent=function(){this._hasPendingChanges=!0,this._current=!0},Wl);function Wl(){this.pendingResponses=0,this.documentChanges=Yl(),this._resumeToken=Qr(),this._current=!1,this._hasPendingChanges=!0}var Kl=(Gl.prototype.handleDocumentChange=function(e){for(var t=0,n=e.updatedTargetIds;t<n.length;t++){var r=n[t];e.newDoc instanceof Fs?this.addDocumentToTarget(r,e.newDoc):e.newDoc instanceof Us&&this.removeDocumentFromTarget(r,e.key,e.newDoc)}for(var i=0,o=e.removedTargetIds;i<o.length;i++)r=o[i],this.removeDocumentFromTarget(r,e.key,e.newDoc)},Gl.prototype.handleTargetChange=function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.ensureTargetState(n);switch(e.state){case Vl.NoChange:t.isActiveTarget(n)&&r.updateResumeToken(e.resumeToken);break;case Vl.Added:r.recordTargetResponse(),r.isPending||r.clearPendingChanges(),r.updateResumeToken(e.resumeToken);break;case Vl.Removed:r.recordTargetResponse(),r.isPending||t.removeTarget(n),Br(!e.cause,"WatchChangeAggregator does not handle errored targets");break;case Vl.Current:t.isActiveTarget(n)&&(r.markCurrent(),r.updateResumeToken(e.resumeToken));break;case Vl.Reset:t.isActiveTarget(n)&&(t.resetTarget(n),r.updateResumeToken(e.resumeToken));break;default:Ur("Unknown target watch change state: "+e.state)}}))},Gl.prototype.forEachTarget=function(e,t){0<e.targetIds.length?e.targetIds.forEach(t):Jr(this.targetStates,t)},Gl.prototype.handleExistenceFilter=function(e){var t=e.targetId,n=e.existenceFilter.count,r=this.queryDataForActiveTarget(t);if(r){var i=r.query;if(i.isDocumentQuery())if(0===n){var o=new Qi(i.path);this.removeDocumentFromTarget(t,o,new Us(o,co.forDeletedDoc()))}else Br(1===n,"Single document existence filter with count: "+n);else this.getCurrentDocumentCountForTarget(t)!==n&&(this.resetTarget(t),this.pendingTargetResets=this.pendingTargetResets.add(t))}},Gl.prototype.createRemoteEvent=function(e){var t=this,n={};Jr(this.targetStates,(function(r,i){var o=t.queryDataForActiveTarget(r);if(o){if(i.current&&o.query.isDocumentQuery()){var a=new Qi(o.query.path);null!==t.pendingDocumentUpdates.get(a)||t.targetContainsDocument(r,a)||t.removeDocumentFromTarget(r,a,new Us(a,e))}i.hasPendingChanges&&(n[r]=i.toTargetChange(),i.clearPendingChanges())}}));var r=Oo();this.pendingDocumentTargetMapping.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.queryDataForActiveTarget(e);return!n||n.purpose===Lu.LimboResolution||(i=!1)})),i&&(r=r.add(e))}));var i=new Ml(e,n,this.pendingTargetResets,this.pendingDocumentUpdates,r);return this.pendingDocumentUpdates=Io(),this.pendingDocumentTargetMapping=Hl(),this.pendingTargetResets=new wo(wi),i},Gl.prototype.addDocumentToTarget=function(e,t){if(this.isActiveTarget(e)){var n=this.targetContainsDocument(e,t.key)?Il.Modified:Il.Added;this.ensureTargetState(e).addDocumentChange(t.key,n),this.pendingDocumentUpdates=this.pendingDocumentUpdates.insert(t.key,t),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(t.key,this.ensureDocumentTargetMapping(t.key).add(e))}},Gl.prototype.removeDocumentFromTarget=function(e,t,n){if(this.isActiveTarget(e)){var r=this.ensureTargetState(e);this.targetContainsDocument(e,t)?r.addDocumentChange(t,Il.Removed):r.removeDocumentChange(t),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(t,this.ensureDocumentTargetMapping(t).delete(e)),n&&(this.pendingDocumentUpdates=this.pendingDocumentUpdates.insert(t,n))}},Gl.prototype.removeTarget=function(e){delete this.targetStates[e]},Gl.prototype.getCurrentDocumentCountForTarget=function(e){var t=this.ensureTargetState(e).toTargetChange();return this.metadataProvider.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size},Gl.prototype.recordPendingTargetRequest=function(e){this.ensureTargetState(e).recordPendingTargetRequest()},Gl.prototype.ensureTargetState=function(e){return this.targetStates[e]||(this.targetStates[e]=new Ql),this.targetStates[e]},Gl.prototype.ensureDocumentTargetMapping=function(e){var t=this.pendingDocumentTargetMapping.get(e);return t||(t=new wo(wi),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(e,t)),t},Gl.prototype.isActiveTarget=function(e){var t=null!==this.queryDataForActiveTarget(e);return t||Fr("WatchChangeAggregator","Detected inactive target",e),t},Gl.prototype.queryDataForActiveTarget=function(e){var t=this.targetStates[e];return t&&t.isPending?null:this.metadataProvider.getQueryDataForTarget(e)},Gl.prototype.resetTarget=function(e){var t=this;Br(!this.targetStates[e].isPending,"Should only reset active targets"),this.targetStates[e]=new Ql,this.metadataProvider.getRemoteKeysForTarget(e).forEach((function(n){t.removeDocumentFromTarget(e,n,null)}))},Gl.prototype.targetContainsDocument=function(e,t){return this.metadataProvider.getRemoteKeysForTarget(e).has(t)},Gl);function Gl(e){this.metadataProvider=e,this.targetStates={},this.pendingDocumentUpdates=Io(),this.pendingDocumentTargetMapping=Hl(),this.pendingTargetResets=new wo(wi)}function Hl(){return new ho(Qi.comparator)}function Yl(){return new ho(Qi.comparator)}var $l="RemoteStore",Xl=(Jl.prototype.start=function(){return this.enableNetwork()},Jl.prototype.enableNetwork=function(){return s(this,void 0,void 0,(function(){var e;return u(this,(function(t){switch(t.label){case 0:return this.networkEnabled=!0,this.canUseNetwork()?(e=this.writeStream,[4,this.localStore.getLastStreamToken()]):[3,3];case 1:return e.lastStreamToken=t.sent(),this.shouldStartWatchStream()?this.startWatchStream():this.onlineStateTracker.set(dl.Unknown),[4,this.fillWritePipeline()];case 2:t.sent(),t.label=3;case 3:return[2]}}))}))},Jl.prototype.disableNetwork=function(){return s(this,void 0,void 0,(function(){return u(this,(function(e){switch(e.label){case 0:return this.networkEnabled=!1,[4,this.disableNetworkInternal()];case 1:return e.sent(),this.onlineStateTracker.set(dl.Offline),[2]}}))}))},Jl.prototype.disableNetworkInternal=function(){return s(this,void 0,void 0,(function(){return u(this,(function(e){switch(e.label){case 0:return[4,this.writeStream.stop()];case 1:return e.sent(),[4,this.watchStream.stop()];case 2:return e.sent(),0<this.writePipeline.length&&(Fr($l,"Stopping write stream with "+this.writePipeline.length+" pending writes"),this.writePipeline=[]),this.cleanUpWatchStreamState(),[2]}}))}))},Jl.prototype.shutdown=function(){return s(this,void 0,void 0,(function(){return u(this,(function(e){switch(e.label){case 0:return Fr($l,"RemoteStore shutting down."),this.networkEnabled=!1,[4,this.disableNetworkInternal()];case 1:return e.sent(),this.connectivityMonitor.shutdown(),this.onlineStateTracker.set(dl.Unknown),[2]}}))}))},Jl.prototype.listen=function(e){Br(!$r(this.listenTargets,e.targetId),"listen called with duplicate targetId!"),this.listenTargets[e.targetId]=e,this.shouldStartWatchStream()?this.startWatchStream():this.watchStream.isOpen()&&this.sendWatchRequest(e)},Jl.prototype.unlisten=function(e){Br($r(this.listenTargets,e),"unlisten called without assigned target ID!"),delete this.listenTargets[e],this.watchStream.isOpen()&&this.sendUnwatchRequest(e),ei(this.listenTargets)&&(this.watchStream.isOpen()?this.watchStream.markIdle():this.canUseNetwork()&&this.onlineStateTracker.set(dl.Unknown))},Jl.prototype.getQueryDataForTarget=function(e){return this.listenTargets[e]||null},Jl.prototype.getRemoteKeysForTarget=function(e){return this.syncEngine.getRemoteKeysForTarget(e)},Jl.prototype.sendWatchRequest=function(e){this.watchChangeAggregator.recordPendingTargetRequest(e.targetId),this.watchStream.watch(e)},Jl.prototype.sendUnwatchRequest=function(e){this.watchChangeAggregator.recordPendingTargetRequest(e),this.watchStream.unwatch(e)},Jl.prototype.startWatchStream=function(){Br(this.shouldStartWatchStream(),"startWatchStream() called when shouldStartWatchStream() is false."),this.watchChangeAggregator=new Kl(this),this.watchStream.start(),this.onlineStateTracker.handleWatchStreamStart()},Jl.prototype.shouldStartWatchStream=function(){return this.canUseNetwork()&&!this.watchStream.isStarted()&&!ei(this.listenTargets)},Jl.prototype.canUseNetwork=function(){return this.isPrimary&&this.networkEnabled},Jl.prototype.cleanUpWatchStreamState=function(){this.watchChangeAggregator=null},Jl.prototype.onWatchStreamOpen=function(){return s(this,void 0,void 0,(function(){var e=this;return u(this,(function(t){return Jr(this.listenTargets,(function(t,n){e.sendWatchRequest(n)})),[2]}))}))},Jl.prototype.onWatchStreamClose=function(e){return s(this,void 0,void 0,(function(){return u(this,(function(t){return void 0===e&&Br(!this.shouldStartWatchStream(),"Watch stream was stopped gracefully while still needed."),this.cleanUpWatchStreamState(),this.shouldStartWatchStream()?(this.onlineStateTracker.handleWatchStreamFailure(e),this.startWatchStream()):this.onlineStateTracker.set(dl.Unknown),[2]}))}))},Jl.prototype.onWatchStreamChange=function(e,t){return s(this,void 0,void 0,(function(){var n;return u(this,(function(r){switch(r.label){case 0:return this.onlineStateTracker.set(dl.Online),e instanceof zl&&e.state===Vl.Removed&&e.cause?[2,this.handleTargetError(e)]:(e instanceof Bl?this.watchChangeAggregator.handleDocumentChange(e):e instanceof jl?this.watchChangeAggregator.handleExistenceFilter(e):(Br(e instanceof zl,"Expected watchChange to be an instance of WatchTargetChange"),this.watchChangeAggregator.handleTargetChange(e)),t.isEqual(co.MIN)?[3,3]:[4,this.localStore.getLastRemoteSnapshotVersion()]);case 1:return n=r.sent(),0<=t.compareTo(n)?[4,this.raiseWatchSnapshot(t)]:[3,3];case 2:r.sent(),r.label=3;case 3:return[2]}}))}))},Jl.prototype.raiseWatchSnapshot=function(e){var t=this;Br(!e.isEqual(co.MIN),"Can't raise event for unknown SnapshotVersion");var n=this.watchChangeAggregator.createRemoteEvent(e);return Jr(n.targetChanges,(function(n,r){if(0<r.resumeToken.length){var i=t.listenTargets[n];i&&(t.listenTargets[n]=i.withResumeToken(r.resumeToken,e))}})),n.targetMismatches.forEach((function(e){var n=t.listenTargets[e];if(n){t.listenTargets[e]=n.withResumeToken(Qr(),n.snapshotVersion),t.sendUnwatchRequest(e);var r=new ju(n.query,e,Lu.ExistenceFilterMismatch,n.sequenceNumber);t.sendWatchRequest(r)}})),this.syncEngine.applyRemoteEvent(n)},Jl.prototype.handleTargetError=function(e){var t=this;Br(!!e.cause,"Handling target error without a cause");var n=e.cause,r=Promise.resolve();return e.targetIds.forEach((function(e){r=r.then((function(){return s(t,void 0,void 0,(function(){return u(this,(function(t){return $r(this.listenTargets,e)?(delete this.listenTargets[e],this.watchChangeAggregator.removeTarget(e),[2,this.syncEngine.rejectListen(e,n)]):[2]}))}))}))})),r},Jl.prototype.fillWritePipeline=function(){return s(this,void 0,void 0,(function(){var e,t;return u(this,(function(n){switch(n.label){case 0:return this.canAddToWritePipeline()?(e=0<this.writePipeline.length?this.writePipeline[this.writePipeline.length-1].batchId:-1,[4,this.localStore.nextMutationBatch(e)]):[3,4];case 1:return null!==(t=n.sent())?[3,2]:(0===this.writePipeline.length&&this.writeStream.markIdle(),[3,4]);case 2:return this.addToWritePipeline(t),[4,this.fillWritePipeline()];case 3:n.sent(),n.label=4;case 4:return this.shouldStartWriteStream()&&this.startWriteStream(),[2]}}))}))},Jl.prototype.canAddToWritePipeline=function(){return this.canUseNetwork()&&this.writePipeline.length<10},Jl.prototype.outstandingWrites=function(){return this.writePipeline.length},Jl.prototype.addToWritePipeline=function(e){Br(this.canAddToWritePipeline(),"addToWritePipeline called when pipeline is full"),this.writePipeline.push(e),this.writeStream.isOpen()&&this.writeStream.handshakeComplete&&this.writeStream.writeMutations(e.mutations)},Jl.prototype.shouldStartWriteStream=function(){return this.canUseNetwork()&&!this.writeStream.isStarted()&&0<this.writePipeline.length},Jl.prototype.startWriteStream=function(){Br(this.shouldStartWriteStream(),"startWriteStream() called when shouldStartWriteStream() is false."),this.writeStream.start()},Jl.prototype.onWriteStreamOpen=function(){return s(this,void 0,void 0,(function(){return u(this,(function(e){return this.writeStream.writeHandshake(),[2]}))}))},Jl.prototype.onWriteHandshakeComplete=function(){var e=this;return this.localStore.setLastStreamToken(this.writeStream.lastStreamToken).then((function(){for(var t=0,n=e.writePipeline;t<n.length;t++){var r=n[t];e.writeStream.writeMutations(r.mutations)}})).catch(fc)},Jl.prototype.onMutationResult=function(e,t){var n=this;Br(0<this.writePipeline.length,"Got result for empty write pipeline");var r=this.writePipeline.shift(),i=Fo.from(r,e,t,this.writeStream.lastStreamToken);return this.syncEngine.applySuccessfulWrite(i).then((function(){return n.fillWritePipeline()}))},Jl.prototype.onWriteStreamClose=function(e){return s(this,void 0,void 0,(function(){var t=this;return u(this,(function(n){return void 0===e&&Br(!this.shouldStartWriteStream(),"Write stream was stopped gracefully while still needed."),e&&0<this.writePipeline.length?[2,(this.writeStream.handshakeComplete?this.handleWriteError(e):this.handleHandshakeError(e)).then((function(){t.shouldStartWriteStream()&&t.startWriteStream()}))]:[2]}))}))},Jl.prototype.handleHandshakeError=function(e){return s(this,void 0,void 0,(function(){return u(this,(function(t){return Tl(e.code)?(Fr($l,"RemoteStore error before completed handshake; resetting stream token: ",this.writeStream.lastStreamToken),this.writeStream.lastStreamToken=Qr(),[2,this.localStore.setLastStreamToken(Qr()).catch(fc)]):[2]}))}))},Jl.prototype.handleWriteError=function(e){return s(this,void 0,void 0,(function(){var t,n=this;return u(this,(function(r){return function(e){return Tl(e)&&e!==Kr.ABORTED}(e.code)?(t=this.writePipeline.shift(),this.writeStream.inhibitBackoff(),[2,this.syncEngine.rejectFailedWrite(t.batchId,e).then((function(){return n.fillWritePipeline()}))]):[2]}))}))},Jl.prototype.createTransaction=function(){return new gl(this.datastore)},Jl.prototype.restartNetwork=function(){return s(this,void 0,void 0,(function(){return u(this,(function(e){switch(e.label){case 0:return this.networkEnabled=!1,[4,this.disableNetworkInternal()];case 1:return e.sent(),this.onlineStateTracker.set(dl.Unknown),[4,this.enableNetwork()];case 2:return e.sent(),[2]}}))}))},Jl.prototype.handleCredentialChange=function(){return s(this,void 0,void 0,(function(){return u(this,(function(e){switch(e.label){case 0:return this.canUseNetwork()?(Fr($l,"RemoteStore restarting streams for new credential"),[4,this.restartNetwork()]):[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))},Jl.prototype.applyPrimaryState=function(e){return s(this,void 0,void 0,(function(){return u(this,(function(t){switch(t.label){case 0:return(this.isPrimary=e)&&this.networkEnabled?[4,this.enableNetwork()]:[3,2];case 1:return t.sent(),[3,4];case 2:return e?[3,4]:[4,this.disableNetworkInternal()];case 3:t.sent(),this.onlineStateTracker.set(dl.Unknown),t.label=4;case 4:return[2]}}))}))},Jl);function Jl(e,t,n,r,i){var o=this;this.localStore=e,this.datastore=t,this.writePipeline=[],this.listenTargets={},this.watchChangeAggregator=null,this.networkEnabled=!1,this.isPrimary=!1,this.connectivityMonitor=i,this.connectivityMonitor.addCallback((function(e){n.enqueueAndForget((function(){return s(o,void 0,void 0,(function(){return u(this,(function(e){switch(e.label){case 0:return this.canUseNetwork()?(Fr($l,"Restarting streams for network reachability change."),[4,this.restartNetwork()]):[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}))})),this.onlineStateTracker=new El(n,r),this.watchStream=this.datastore.newPersistentWatchStream({onOpen:this.onWatchStreamOpen.bind(this),onClose:this.onWatchStreamClose.bind(this),onWatchChange:this.onWatchStreamChange.bind(this)}),this.writeStream=this.datastore.newPersistentWriteStream({onOpen:this.onWriteStreamOpen.bind(this),onClose:this.onWriteStreamClose.bind(this),onHandshakeComplete:this.onWriteHandshakeComplete.bind(this),onMutationResult:this.onMutationResult.bind(this)})}var Zl=(Object.defineProperty(eh.prototype,"latitude",{get:function(){return this._lat},enumerable:!0,configurable:!0}),Object.defineProperty(eh.prototype,"longitude",{get:function(){return this._long},enumerable:!0,configurable:!0}),eh.prototype.isEqual=function(e){return this._lat===e._lat&&this._long===e._long},eh.prototype._compareTo=function(e){return wi(this._lat,e._lat)||wi(this._long,e._long)},eh);function eh(e,t){if(ni("GeoPoint",arguments,2),oi("GeoPoint","number",1,e),oi("GeoPoint","number",2,t),!isFinite(e)||e<-90||90<e)throw new Gr(Kr.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||180<t)throw new Gr(Kr.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}var th=(nh.atPath=function(e){return new nh(e)},Object.defineProperty(nh.prototype,"orderBy",{get:function(){if(null===this.memoizedOrderBy){var e=this.getInequalityFilterField(),t=this.getFirstOrderByField();if(null!==e&&null===t)e.isKeyField()?this.memoizedOrderBy=[Ah]:this.memoizedOrderBy=[new Nh(e),Ah];else{Br(null===e||null!==t&&e.isEqual(t),"First orderBy should match inequality field.");for(var n=!(this.memoizedOrderBy=[]),r=0,i=this.explicitOrderBy;r<i.length;r++){var o=i[r];this.memoizedOrderBy.push(o),o.field.isKeyField()&&(n=!0)}if(!n){var a=0<this.explicitOrderBy.length?this.explicitOrderBy[this.explicitOrderBy.length-1].dir:Th.ASCENDING;this.memoizedOrderBy.push(a===Th.ASCENDING?Ah:_h)}}}return this.memoizedOrderBy},enumerable:!0,configurable:!0}),nh.prototype.addFilter=function(e){Br(null==this.getInequalityFilterField()||!(e instanceof ah)||!e.isInequality()||e.field.isEqual(this.getInequalityFilterField()),"Query must only have one inequality field."),Br(!this.isDocumentQuery(),"No filtering allowed for document query");var t=this.filters.concat([e]);return new nh(this.path,this.collectionGroup,this.explicitOrderBy.slice(),t,this.limit,this.startAt,this.endAt)},nh.prototype.addOrderBy=function(e){Br(!this.startAt&&!this.endAt,"Bounds must be set after orderBy");var t=this.explicitOrderBy.concat([e]);return new nh(this.path,this.collectionGroup,t,this.filters.slice(),this.limit,this.startAt,this.endAt)},nh.prototype.withLimit=function(e){return new nh(this.path,this.collectionGroup,this.explicitOrderBy.slice(),this.filters.slice(),e,this.startAt,this.endAt)},nh.prototype.withStartAt=function(e){return new nh(this.path,this.collectionGroup,this.explicitOrderBy.slice(),this.filters.slice(),this.limit,e,this.endAt)},nh.prototype.withEndAt=function(e){return new nh(this.path,this.collectionGroup,this.explicitOrderBy.slice(),this.filters.slice(),this.limit,this.startAt,e)},nh.prototype.asCollectionQueryAtPath=function(e){return new nh(e,null,this.explicitOrderBy.slice(),this.filters.slice(),this.limit,this.startAt,this.endAt)},nh.prototype.matchesAllDocuments=function(){return 0===this.filters.length&&null===this.limit&&null==this.startAt&&null==this.endAt&&(0===this.explicitOrderBy.length||1===this.explicitOrderBy.length&&this.explicitOrderBy[0].field.isKeyField())},nh.prototype.canonicalId=function(){if(null===this.memoizedCanonicalId){var e=this.path.canonicalString();this.isCollectionGroupQuery()&&(e+="|cg:"+this.collectionGroup),e+="|f:";for(var t=0,n=this.filters;t<n.length;t++)e+=n[t].canonicalId(),e+=",";e+="|ob:";for(var r=0,i=this.orderBy;r<i.length;r++)e+=i[r].canonicalId(),e+=",";$c(this.limit)||(e+="|l:",e+=this.limit),this.startAt&&(e+="|lb:",e+=this.startAt.canonicalId()),this.endAt&&(e+="|ub:",e+=this.endAt.canonicalId()),this.memoizedCanonicalId=e}return this.memoizedCanonicalId},nh.prototype.toString=function(){var e="Query("+this.path.canonicalString();return this.isCollectionGroupQuery()&&(e+=" collectionGroup="+this.collectionGroup),0<this.filters.length&&(e+=", filters: ["+this.filters.join(", ")+"]"),$c(this.limit)||(e+=", limit: "+this.limit),0<this.explicitOrderBy.length&&(e+=", orderBy: ["+this.explicitOrderBy.join(", ")+"]"),this.startAt&&(e+=", startAt: "+this.startAt.canonicalId()),this.endAt&&(e+=", endAt: "+this.endAt.canonicalId()),e+")"},nh.prototype.isEqual=function(e){if(this.limit!==e.limit)return!1;if(this.orderBy.length!==e.orderBy.length)return!1;for(var t=0;t<this.orderBy.length;t++)if(!this.orderBy[t].isEqual(e.orderBy[t]))return!1;if(this.filters.length!==e.filters.length)return!1;for(t=0;t<this.filters.length;t++)if(!this.filters[t].isEqual(e.filters[t]))return!1;return this.collectionGroup===e.collectionGroup&&!!this.path.isEqual(e.path)&&!(null!==this.startAt?!this.startAt.isEqual(e.startAt):null!==e.startAt)&&(null!==this.endAt?this.endAt.isEqual(e.endAt):null===e.endAt)},nh.prototype.docComparator=function(e,t){for(var n=!1,r=0,i=this.orderBy;r<i.length;r++){var o=i[r],a=o.compare(e,t);if(0!==a)return a;n=n||o.field.isKeyField()}return Br(n,"orderBy used that doesn't compare on key field"),0},nh.prototype.matches=function(e){return this.matchesPathAndCollectionGroup(e)&&this.matchesOrderBy(e)&&this.matchesFilters(e)&&this.matchesBounds(e)},nh.prototype.hasLimit=function(){return!$c(this.limit)},nh.prototype.getFirstOrderByField=function(){return 0<this.explicitOrderBy.length?this.explicitOrderBy[0].field:null},nh.prototype.getInequalityFilterField=function(){for(var e=0,t=this.filters;e<t.length;e++){var n=t[e];if(n instanceof ah&&n.isInequality())return n.field}return null},nh.prototype.findFilterOperator=function(e){for(var t=0,n=this.filters;t<n.length;t++){var r=n[t];if(r instanceof ah&&0<=e.indexOf(r.op))return r.op}return null},nh.prototype.isDocumentQuery=function(){return Qi.isDocumentKey(this.path)&&null===this.collectionGroup&&0===this.filters.length},nh.prototype.isCollectionGroupQuery=function(){return null!==this.collectionGroup},nh.prototype.matchesPathAndCollectionGroup=function(e){var t=e.key.path;return null!==this.collectionGroup?e.key.hasCollectionId(this.collectionGroup)&&this.path.isPrefixOf(t):Qi.isDocumentKey(this.path)?this.path.isEqual(t):this.path.isImmediateParentOf(t)},nh.prototype.matchesOrderBy=function(e){for(var t=0,n=this.explicitOrderBy;t<n.length;t++){var r=n[t];if(!r.field.isKeyField()&&null===e.field(r.field))return!1}return!0},nh.prototype.matchesFilters=function(e){for(var t=0,n=this.filters;t<n.length;t++)if(!n[t].matches(e))return!1;return!0},nh.prototype.matchesBounds=function(e){return!(this.startAt&&!this.startAt.sortsBeforeDocument(this.orderBy,e)||this.endAt&&this.endAt.sortsBeforeDocument(this.orderBy,e))},nh.prototype.assertValidBound=function(e){Br(e.position.length<=this.orderBy.length,"Bound is longer than orderBy")},nh);function nh(e,t,n,r,i,o,a){void 0===t&&(t=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===a&&(a=null),this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=a,this.memoizedCanonicalId=null,this.memoizedOrderBy=null,this.startAt&&this.assertValidBound(this.startAt),this.endAt&&this.assertValidBound(this.endAt)}var rh=(ih.fromString=function(e){switch(e){case"<":return ih.LESS_THAN;case"<=":return ih.LESS_THAN_OR_EQUAL;case"==":return ih.EQUAL;case">=":return ih.GREATER_THAN_OR_EQUAL;case">":return ih.GREATER_THAN;case"array-contains":return ih.ARRAY_CONTAINS;case"in":return ih.IN;case"array-contains-any":return ih.ARRAY_CONTAINS_ANY;default:return Ur("Unknown FieldFilter operator: "+e)}},ih.prototype.toString=function(){return this.name},ih.prototype.isEqual=function(e){return this.name===e.name},ih.LESS_THAN=new ih("<"),ih.LESS_THAN_OR_EQUAL=new ih("<="),ih.EQUAL=new ih("=="),ih.GREATER_THAN=new ih(">"),ih.GREATER_THAN_OR_EQUAL=new ih(">="),ih.ARRAY_CONTAINS=new ih("array-contains"),ih.IN=new ih("in"),ih.ARRAY_CONTAINS_ANY=new ih("array-contains-any"),ih);function ih(e){this.name=e}var oh,ah=(r(sh,oh=function(){}),sh.create=function(e,t,n){if(e.isKeyField())return t===rh.IN?(Br(n instanceof Os,"Comparing on key with IN, but filter value not an ArrayValue"),Br(n.internalValue.every((function(e){return e instanceof Ts})),"Comparing on key with IN, but an array value was not a RefValue"),new fh(e,n)):(Br(n instanceof Ts,"Comparing on key, but filter value not a RefValue"),Br(t!==rh.ARRAY_CONTAINS&&t!==rh.ARRAY_CONTAINS_ANY,"'"+t.toString()+"' queries don't make sense on document keys."),new ch(e,t,n));if(n.isEqual(Ya.INSTANCE)){if(t!==rh.EQUAL)throw new Gr(Kr.INVALID_ARGUMENT,"Invalid query. Null supports only equality comparisons.");return new sh(e,t,n)}if(n.isEqual(us.NAN)){if(t!==rh.EQUAL)throw new Gr(Kr.INVALID_ARGUMENT,"Invalid query. NaN supports only equality comparisons.");return new sh(e,t,n)}return t===rh.ARRAY_CONTAINS?new mh(e,n):t===rh.IN?(Br(n instanceof Os,"IN filter has invalid value: "+n.toString()),new vh(e,n)):t===rh.ARRAY_CONTAINS_ANY?(Br(n instanceof Os,"ARRAY_CONTAINS_ANY filter has invalid value: "+n.toString()),new Eh(e,n)):new sh(e,t,n)},sh.prototype.matches=function(e){var t=e.field(this.field);return null!==t&&this.value.typeOrder===t.typeOrder&&this.matchesComparison(t.compareTo(this.value))},sh.prototype.matchesComparison=function(e){switch(this.op){case rh.LESS_THAN:return e<0;case rh.LESS_THAN_OR_EQUAL:return e<=0;case rh.EQUAL:return 0===e;case rh.GREATER_THAN:return 0<e;case rh.GREATER_THAN_OR_EQUAL:return 0<=e;default:return Ur("Unknown FieldFilter operator: "+this.op)}},sh.prototype.isInequality=function(){return 0<=[rh.LESS_THAN,rh.LESS_THAN_OR_EQUAL,rh.GREATER_THAN,rh.GREATER_THAN_OR_EQUAL].indexOf(this.op)},sh.prototype.canonicalId=function(){return this.field.canonicalString()+this.op.toString()+this.value.toString()},sh.prototype.isEqual=function(e){return e instanceof sh&&this.op.isEqual(e.op)&&this.field.isEqual(e.field)&&this.value.isEqual(e.value)},sh.prototype.toString=function(){return this.field.canonicalString()+" "+this.op+" "+this.value.value()},sh);function sh(e,t,n){var r=oh.call(this)||this;return r.field=e,r.op=t,r.value=n,r}var uh,ch=(r(lh,uh=ah),lh.prototype.matches=function(e){var t=this.value,n=Qi.comparator(e.key,t.key);return this.matchesComparison(n)},lh);function lh(){return null!==uh&&uh.apply(this,arguments)||this}var hh,fh=(r(dh,hh=ah),dh.prototype.matches=function(e){return this.value.internalValue.some((function(t){return e.key.isEqual(t.key)}))},dh);function dh(e,t){var n=hh.call(this,e,rh.IN,t)||this;return n.value=t,n}var ph,mh=(r(yh,ph=ah),yh.prototype.matches=function(e){var t=e.field(this.field);return t instanceof Os&&t.contains(this.value)},yh);function yh(e,t){return ph.call(this,e,rh.ARRAY_CONTAINS,t)||this}var gh,vh=(r(bh,gh=ah),bh.prototype.matches=function(e){var t=this.value,n=e.field(this.field);return null!==n&&t.contains(n)},bh);function bh(e,t){var n=gh.call(this,e,rh.IN,t)||this;return n.value=t,n}var wh,Eh=(r(Sh,wh=ah),Sh.prototype.matches=function(e){var t=this,n=e.field(this.field);return n instanceof Os&&n.internalValue.some((function(e){return t.value.contains(e)}))},Sh);function Sh(e,t){var n=wh.call(this,e,rh.ARRAY_CONTAINS_ANY,t)||this;return n.value=t,n}var Th=(Ch.prototype.toString=function(){return this.name},Ch.ASCENDING=new Ch("asc"),Ch.DESCENDING=new Ch("desc"),Ch);function Ch(e){this.name=e}var Ih=(kh.prototype.canonicalId=function(){for(var e=this.before?"b:":"a:",t=0,n=this.position;t<n.length;t++)e+=n[t].toString();return e},kh.prototype.sortsBeforeDocument=function(e,t){Br(this.position.length<=e.length,"Bound has more components than query's orderBy");for(var n=0,r=0;r<this.position.length;r++){var i=e[r],o=this.position[r];if(i.field.isKeyField())Br(o instanceof Ts,"Bound has a non-key value where the key path is being used."),n=Qi.comparator(o.key,t.key);else{var a=t.field(i.field);Br(null!==a,"Field should exist since document matched the orderBy already."),n=o.compareTo(a)}if(i.dir===Th.DESCENDING&&(n*=-1),0!==n)break}return this.before?n<=0:n<0},kh.prototype.isEqual=function(e){if(null===e)return!1;if(this.before!==e.before||this.position.length!==e.position.length)return!1;for(var t=0;t<this.position.length;t++){var n=this.position[t],r=e.position[t];if(!n.isEqual(r))return!1}return!0},kh);function kh(e,t){this.position=e,this.before=t}var Nh=(Dh.prototype.compare=function(e,t){var n=this.isKeyOrderBy?Fs.compareByKey(e,t):Fs.compareByField(this.field,e,t);switch(this.dir){case Th.ASCENDING:return n;case Th.DESCENDING:return-1*n;default:return Ur("Unknown direction: "+this.dir)}},Dh.prototype.canonicalId=function(){return this.field.canonicalString()+this.dir.toString()},Dh.prototype.toString=function(){return this.field.canonicalString()+" ("+this.dir+")"},Dh.prototype.isEqual=function(e){return this.dir===e.dir&&this.field.isEqual(e.field)},Dh);function Dh(e,t){this.field=e,void 0===t&&(t=Th.ASCENDING),this.dir=t,this.isKeyOrderBy=e.isKeyField()}var Ah=new Nh(ji.keyField(),Th.ASCENDING),_h=new Nh(ji.keyField(),Th.DESCENDING),xh=(Oh.prototype.applyToLocalView=function(e,t){return new gs(t,e)},Oh.prototype.applyToRemoteDocument=function(e,t){return t},Oh.prototype.computeBaseValue=function(e){return null},Oh.prototype.isEqual=function(e){return e instanceof Oh},Oh.instance=new Oh,Oh);function Oh(){}var Rh=(Ph.prototype.applyToLocalView=function(e,t){return this.apply(e)},Ph.prototype.applyToRemoteDocument=function(e,t){return this.apply(e)},Ph.prototype.apply=function(e){for(var t=Vh(e),n=function(e){t.find((function(t){return t.isEqual(e)}))||t.push(e)},r=0,i=this.elements;r<i.length;r++)n(i[r]);return new Os(t)},Ph.prototype.computeBaseValue=function(e){return null},Ph.prototype.isEqual=function(e){return e instanceof Ph&&Ei(e.elements,this.elements)},Ph);function Ph(e){this.elements=e}var Mh=(Lh.prototype.applyToLocalView=function(e,t){return this.apply(e)},Lh.prototype.applyToRemoteDocument=function(e,t){return this.apply(e)},Lh.prototype.apply=function(e){for(var t=Vh(e),n=function(e){t=t.filter((function(t){return!t.isEqual(e)}))},r=0,i=this.elements;r<i.length;r++)n(i[r]);return new Os(t)},Lh.prototype.computeBaseValue=function(e){return null},Lh.prototype.isEqual=function(e){return e instanceof Lh&&Ei(e.elements,this.elements)},Lh);function Lh(e){this.elements=e}var Fh=(qh.prototype.applyToLocalView=function(e,t){var n=this.computeBaseValue(e);if(n instanceof os&&this.operand instanceof os){var r=n.internalValue+this.operand.internalValue;return new os(r)}return r=n.internalValue+this.operand.internalValue,new us(r)},qh.prototype.applyToRemoteDocument=function(e,t){return Br(null!==t,"Didn't receive transformResult for NUMERIC_ADD transform"),t},qh.prototype.computeBaseValue=function(e){return e instanceof ts?e:new os(0)},qh.prototype.isEqual=function(e){return e instanceof qh&&this.operand.isEqual(e.operand)},qh);function qh(e){this.operand=e}function Vh(e){return e instanceof Os?e.internalValue.slice():[]}var Uh=(Bh.prototype.isEqual=function(e){return e&&e.count===this.count},Bh);function Bh(e){this.count=e}var jh,zh,Qh=((jh={})[Th.ASCENDING.name]="ASCENDING",jh[Th.DESCENDING.name]="DESCENDING",jh),Wh=((zh={})[rh.LESS_THAN.name]="LESS_THAN",zh[rh.LESS_THAN_OR_EQUAL.name]="LESS_THAN_OR_EQUAL",zh[rh.GREATER_THAN.name]="GREATER_THAN",zh[rh.GREATER_THAN_OR_EQUAL.name]="GREATER_THAN_OR_EQUAL",zh[rh.EQUAL.name]="EQUAL",zh[rh.ARRAY_CONTAINS.name]="ARRAY_CONTAINS",zh[rh.IN.name]="IN",zh[rh.ARRAY_CONTAINS_ANY.name]="ARRAY_CONTAINS_ANY",zh),Kh=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Gh(e,t){Br(!$c(e),t+" is missing")}function Hh(e){return"number"==typeof e?e:"string"==typeof e?Number(e):Ur("can't parse "+e)}var Yh=($h.prototype.emptyByteString=function(){return this.options.useProto3Json?"":new Uint8Array(0)},$h.prototype.unsafeCastProtoByteString=function(e){return e},$h.prototype.fromRpcStatus=function(e){var t=void 0===e.code?Kr.UNKNOWN:Cl(e.code);return new Gr(t,e.message||"")},$h.prototype.toInt32Value=function(e){return this.options.useProto3Json||$c(e)?e:{value:e}},$h.prototype.fromInt32Value=function(e){var t;return $c(t="object"==typeof e?e.value:e)?null:t},$h.prototype.toTimestamp=function(e){return this.options.useProto3Json?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}},$h.prototype.fromTimestamp=function(e){if("string"==typeof e)return this.fromIso8601String(e);Br(!!e,"Cannot deserialize null or undefined timestamp.");var t=Hh(e.seconds||"0"),n=e.nanos||0;return new so(t,n)},$h.prototype.fromIso8601String=function(e){var t=0,n=Kh.exec(e);if(Br(!!n,"invalid timestamp: "+e),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e),o=Math.floor(i.getTime()/1e3);return new so(o,t)},$h.prototype.toBytes=function(e){return this.options.useProto3Json?e.toBase64():this.unsafeCastProtoByteString(e.toUint8Array())},$h.prototype.fromBlob=function(e){return"string"==typeof e?(Br(this.options.useProto3Json,"Expected bytes to be passed in as Uint8Array, but got a string instead."),Ii.fromBase64String(e)):(Br(!this.options.useProto3Json,"Expected bytes to be passed in as Uint8Array, but got a string instead."),Ii.fromUint8Array(e))},$h.prototype.toVersion=function(e){return this.toTimestamp(e.toTimestamp())},$h.prototype.fromVersion=function(e){return Br(!!e,"Trying to deserialize version that isn't set"),co.fromTimestamp(this.fromTimestamp(e))},$h.prototype.toResourceName=function(e,t){return this.fullyQualifiedPrefixPath(e).child("documents").child(t).canonicalString()},$h.prototype.fromResourceName=function(e){var t=qi.fromString(e);return Br(this.isValidResourceName(t),"Tried to deserialize invalid key "+t.toString()),t},$h.prototype.toName=function(e){return this.toResourceName(this.databaseId,e.path)},$h.prototype.fromName=function(e){var t=this.fromResourceName(e);return Br(t.get(1)===this.databaseId.projectId,"Tried to deserialize key from different project: "+t.get(1)+" vs "+this.databaseId.projectId),Br(!t.get(3)&&!this.databaseId.database||t.get(3)===this.databaseId.database,"Tried to deserialize key from different database: "+t.get(3)+" vs "+this.databaseId.database),new Qi(this.extractLocalPathFromResourceName(t))},$h.prototype.toQueryPath=function(e){return this.toResourceName(this.databaseId,e)},$h.prototype.fromQueryPath=function(e){var t=this.fromResourceName(e);return 4===t.length?qi.EMPTY_PATH:this.extractLocalPathFromResourceName(t)},Object.defineProperty($h.prototype,"encodedDatabaseId",{get:function(){return new qi(["projects",this.databaseId.projectId,"databases",this.databaseId.database]).canonicalString()},enumerable:!0,configurable:!0}),$h.prototype.fullyQualifiedPrefixPath=function(e){return new qi(["projects",e.projectId,"databases",e.database])},$h.prototype.extractLocalPathFromResourceName=function(e){return Br(4<e.length&&"documents"===e.get(4),"tried to deserialize invalid key "+e.toString()),e.popFirst(5)},$h.prototype.isValidResourceName=function(e){return 4<=e.length&&"projects"===e.get(0)&&"databases"===e.get(2)},$h.prototype.toValue=function(e){if(e instanceof Ya)return{nullValue:"NULL_VALUE"};if(e instanceof Ja)return{booleanValue:e.value()};if(e instanceof os)return{integerValue:""+e.value()};if(e instanceof us){var t=e.value();if(this.options.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:e.value()}}return e instanceof hs?{stringValue:e.value()}:e instanceof As?{mapValue:this.toMapValue(e)}:e instanceof Os?{arrayValue:this.toArrayValue(e)}:e instanceof ps?{timestampValue:this.toTimestamp(e.internalValue)}:e instanceof ks?{geoPointValue:{latitude:e.value().latitude,longitude:e.value().longitude}}:e instanceof ws?{bytesValue:this.toBytes(e.value())}:e instanceof Ts?{referenceValue:this.toResourceName(e.databaseId,e.key.path)}:Ur("Unknown FieldValue "+JSON.stringify(e))},$h.prototype.fromValue=function(e){var t=this;if("nullValue"in e)return Ya.INSTANCE;if("booleanValue"in e)return Ja.of(e.booleanValue);if("integerValue"in e)return new os(Hh(e.integerValue));if("doubleValue"in e){if(this.options.useProto3Json){if("NaN"===e.doubleValue)return us.NAN;if("Infinity"===e.doubleValue)return us.POSITIVE_INFINITY;if("-Infinity"===e.doubleValue)return us.NEGATIVE_INFINITY}return new us(e.doubleValue)}if("stringValue"in e)return new hs(e.stringValue);if("mapValue"in e)return this.fromFields(e.mapValue.fields||{});if("arrayValue"in e){Gh(e.arrayValue,"arrayValue");var n=e.arrayValue.values||[];return new Os(n.map((function(e){return t.fromValue(e)})))}if("timestampValue"in e)return Gh(e.timestampValue,"timestampValue"),new ps(this.fromTimestamp(e.timestampValue));if("geoPointValue"in e){Gh(e.geoPointValue,"geoPointValue");var r=e.geoPointValue.latitude||0,i=e.geoPointValue.longitude||0;return new ks(new Zl(r,i))}if("bytesValue"in e){Gh(e.bytesValue,"bytesValue");var o=this.fromBlob(e.bytesValue);return new ws(o)}if("referenceValue"in e){Gh(e.referenceValue,"referenceValue");var a=this.fromResourceName(e.referenceValue),s=new _i(a.get(1),a.get(3)),u=new Qi(this.extractLocalPathFromResourceName(a));return new Ts(s,u)}return Ur("Unknown Value proto "+JSON.stringify(e))},$h.prototype.toMutationDocument=function(e,t){return{name:this.toName(e),fields:this.toFields(t)}},$h.prototype.toDocument=function(e){return Br(!e.hasLocalMutations,"Can't serialize documents with mutations."),{name:this.toName(e.key),fields:this.toFields(e.data()),updateTime:this.toTimestamp(e.version.toTimestamp())}},$h.prototype.fromDocument=function(e,t){var n=this,r=this.fromName(e.name),i=this.fromVersion(e.updateTime);return new Fs(r,i,{hasCommittedMutations:!!t},void 0,e,(function(e){return n.fromValue(e)}))},$h.prototype.toFields=function(e){var t=this,n={};return e.forEach((function(e,r){n[e]=t.toValue(r)})),n},$h.prototype.fromFields=function(e){var t=this,n=e,r=As.EMPTY;return Zr(n,(function(e,n){r=r.set(new ji([e]),t.fromValue(n))})),r},$h.prototype.toMapValue=function(e){return{fields:this.toFields(e)}},$h.prototype.toArrayValue=function(e){var t=this,n=[];return e.forEach((function(e){n.push(t.toValue(e))})),{values:n}},$h.prototype.fromFound=function(e){var t=this;Br(!!e.found,"Tried to deserialize a found document from a missing document."),Gh(e.found.name,"doc.found.name"),Gh(e.found.updateTime,"doc.found.updateTime");var n=this.fromName(e.found.name),r=this.fromVersion(e.found.updateTime);return new Fs(n,r,{},void 0,e.found,(function(e){return t.fromValue(e)}))},$h.prototype.fromMissing=function(e){Br(!!e.missing,"Tried to deserialize a missing document from a found document."),Br(!!e.readTime,"Tried to deserialize a missing document without a read time.");var t=this.fromName(e.missing),n=this.fromVersion(e.readTime);return new Us(t,n)},$h.prototype.fromMaybeDocument=function(e){return"found"in e?this.fromFound(e):"missing"in e?this.fromMissing(e):Ur("invalid batch get response: "+JSON.stringify(e))},$h.prototype.toWatchTargetChangeState=function(e){switch(e){case Vl.Added:return"ADD";case Vl.Current:return"CURRENT";case Vl.NoChange:return"NO_CHANGE";case Vl.Removed:return"REMOVE";case Vl.Reset:return"RESET";default:return Ur("Unknown WatchTargetChangeState: "+e)}},$h.prototype.toTestWatchChange=function(e){if(e instanceof jl)return{filter:{count:e.existenceFilter.count,targetId:e.targetId}};if(e instanceof Bl){if(e.newDoc instanceof Fs){var t=e.newDoc;return{documentChange:{document:{name:this.toName(t.key),fields:this.toFields(t.data()),updateTime:this.toVersion(t.version)},targetIds:e.updatedTargetIds,removedTargetIds:e.removedTargetIds}}}if(e.newDoc instanceof Us)return t=e.newDoc,{documentDelete:{document:this.toName(t.key),readTime:this.toVersion(t.version),removedTargetIds:e.removedTargetIds}};if(null===e.newDoc)return{documentRemove:{document:this.toName(e.key),removedTargetIds:e.removedTargetIds}}}if(e instanceof zl){var n=void 0;return e.cause&&(n={code:function(e){if(void 0===e)return bl.OK;switch(e){case Kr.OK:return bl.OK;case Kr.CANCELLED:return bl.CANCELLED;case Kr.UNKNOWN:return bl.UNKNOWN;case Kr.DEADLINE_EXCEEDED:return bl.DEADLINE_EXCEEDED;case Kr.RESOURCE_EXHAUSTED:return bl.RESOURCE_EXHAUSTED;case Kr.INTERNAL:return bl.INTERNAL;case Kr.UNAVAILABLE:return bl.UNAVAILABLE;case Kr.UNAUTHENTICATED:return bl.UNAUTHENTICATED;case Kr.INVALID_ARGUMENT:return bl.INVALID_ARGUMENT;case Kr.NOT_FOUND:return bl.NOT_FOUND;case Kr.ALREADY_EXISTS:return bl.ALREADY_EXISTS;case Kr.PERMISSION_DENIED:return bl.PERMISSION_DENIED;case Kr.FAILED_PRECONDITION:return bl.FAILED_PRECONDITION;case Kr.ABORTED:return bl.ABORTED;case Kr.OUT_OF_RANGE:return bl.OUT_OF_RANGE;case Kr.UNIMPLEMENTED:return bl.UNIMPLEMENTED;case Kr.DATA_LOSS:return bl.DATA_LOSS;default:return Ur("Unknown status code: "+e)}}(e.cause.code),message:e.cause.message}),{targetChange:{targetChangeType:this.toWatchTargetChangeState(e.state),targetIds:e.targetIds,resumeToken:this.unsafeCastProtoByteString(e.resumeToken),cause:n}}}return Ur("Unrecognized watch change: "+JSON.stringify(e))},$h.prototype.fromWatchChange=function(e){var t,n=this;if("targetChange"in e){Gh(e.targetChange,"targetChange");var r=this.fromWatchTargetChangeState(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=e.targetChange.resumeToken||this.emptyByteString(),a=e.targetChange.cause,s=a&&this.fromRpcStatus(a);t=new zl(r,i,o,s||null)}else if("documentChange"in e){Gh(e.documentChange,"documentChange"),Gh(e.documentChange.document,"documentChange.name"),Gh(e.documentChange.document.name,"documentChange.document.name"),Gh(e.documentChange.document.updateTime,"documentChange.document.updateTime");var u=e.documentChange,c=this.fromName(u.document.name),l=this.fromVersion(u.document.updateTime),h=new Fs(c,l,{},void 0,u.document,(function(e){return n.fromValue(e)})),f=u.targetIds||[],d=u.removedTargetIds||[];t=new Bl(f,d,h.key,h)}else if("documentDelete"in e){Gh(e.documentDelete,"documentDelete"),Gh(e.documentDelete.document,"documentDelete.document");var p=e.documentDelete;c=this.fromName(p.document),l=p.readTime?this.fromVersion(p.readTime):co.forDeletedDoc(),h=new Us(c,l),d=p.removedTargetIds||[],t=new Bl([],d,h.key,h)}else if("documentRemove"in e){Gh(e.documentRemove,"documentRemove"),Gh(e.documentRemove.document,"documentRemove");var m=e.documentRemove;c=this.fromName(m.document),d=m.removedTargetIds||[],t=new Bl([],d,c,null)}else{if(!("filter"in e))return Ur("Unknown change type "+JSON.stringify(e));Gh(e.filter,"filter"),Gh(e.filter.targetId,"filter.targetId");var y=e.filter,g=y.count||0,v=new Uh(g),b=y.targetId;t=new jl(b,v)}return t},$h.prototype.fromWatchTargetChangeState=function(e){return"NO_CHANGE"===e?Vl.NoChange:"ADD"===e?Vl.Added:"REMOVE"===e?Vl.Removed:"CURRENT"===e?Vl.Current:"RESET"===e?Vl.Reset:Ur("Got unexpected TargetChange.state: "+e)},$h.prototype.versionFromListenResponse=function(e){if(!("targetChange"in e))return co.MIN;var t=e.targetChange;return t.targetIds&&t.targetIds.length?co.MIN:t.readTime?this.fromVersion(t.readTime):co.MIN},$h.prototype.toMutation=function(e){var t,n=this;if(e instanceof Aa)t={update:this.toMutationDocument(e.key,e.value)};else if(e instanceof ja)t={delete:this.toName(e.key)};else if(e instanceof Oa)t={update:this.toMutationDocument(e.key,e.data),updateMask:this.toDocumentMask(e.fieldMask)};else{if(!(e instanceof Ma))return Ur("Unknown mutation type "+e.type);t={transform:{document:this.toName(e.key),fieldTransforms:e.fieldTransforms.map((function(e){return n.toFieldTransform(e)}))}}}return e.precondition.isNone||(t.currentDocument=this.toPrecondition(e.precondition)),t},$h.prototype.fromMutation=function(e){var t=this,n=e.currentDocument?this.fromPrecondition(e.currentDocument):Ca.NONE;if(e.update){Gh(e.update.name,"name");var r=this.fromName(e.update.name),i=this.fromFields(e.update.fields||{});if(e.updateMask){var o=this.fromDocumentMask(e.updateMask);return new Oa(r,i,o,n)}return new Aa(r,i,n)}if(e.delete)return r=this.fromName(e.delete),new ja(r,n);if(e.transform){r=this.fromName(e.transform.document);var a=e.transform.fieldTransforms.map((function(e){return t.fromFieldTransform(e)}));return Br(!0===n.exists,'Transforms only support precondition "exists == true"'),new Ma(r,a)}return Ur("unknown mutation proto: "+JSON.stringify(e))},$h.prototype.toPrecondition=function(e){return Br(!e.isNone,"Can't serialize an empty precondition"),void 0!==e.updateTime?{updateTime:this.toVersion(e.updateTime)}:void 0!==e.exists?{exists:e.exists}:Ur("Unknown precondition")},$h.prototype.fromPrecondition=function(e){return void 0!==e.updateTime?Ca.updateTime(this.fromVersion(e.updateTime)):void 0!==e.exists?Ca.exists(e.exists):Ca.NONE},$h.prototype.fromWriteResult=function(e,t){var n=this,r=e.updateTime?this.fromVersion(e.updateTime):this.fromVersion(t);r.isEqual(co.MIN)&&(r=this.fromVersion(t));var i=null;return e.transformResults&&0<e.transformResults.length&&(i=e.transformResults.map((function(e){return n.fromValue(e)}))),new Ta(r,i)},$h.prototype.fromWriteResults=function(e,t){var n=this;return e&&0<e.length?(Br(void 0!==t,"Received a write result without a commit time"),e.map((function(e){return n.fromWriteResult(e,t)}))):[]},$h.prototype.toFieldTransform=function(e){var t=this,n=e.transform;if(n instanceof xh)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Rh)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements.map((function(e){return t.toValue(e)}))}};if(n instanceof Mh)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements.map((function(e){return t.toValue(e)}))}};if(n instanceof Fh)return{fieldPath:e.field.canonicalString(),increment:this.toValue(n.operand)};throw Ur("Unknown transform: "+e.transform)},$h.prototype.fromFieldTransform=function(e){var t=this,n=null;if("setToServerValue"in e)Br("REQUEST_TIME"===e.setToServerValue,"Unknown server value transform proto: "+JSON.stringify(e)),n=xh.instance;else if("appendMissingElements"in e){var r=e.appendMissingElements.values||[];n=new Rh(r.map((function(e){return t.fromValue(e)})))}else if("removeAllFromArray"in e)r=e.removeAllFromArray.values||[],n=new Mh(r.map((function(e){return t.fromValue(e)})));else if("increment"in e){var i=this.fromValue(e.increment);Br(i instanceof ts,"NUMERIC_ADD transform requires a NumberValue"),n=new Fh(i)}else Ur("Unknown transform proto: "+JSON.stringify(e));var o=ji.fromServerFormat(e.fieldPath);return new ba(o,n)},$h.prototype.toDocumentsTarget=function(e){return{documents:[this.toQueryPath(e.path)]}},$h.prototype.fromDocumentsTarget=function(e){var t=e.documents.length;Br(1===t,"DocumentsTarget contained other than 1 document: "+t);var n=e.documents[0];return th.atPath(this.fromQueryPath(n))},$h.prototype.toQueryTarget=function(e){var t={structuredQuery:{}},n=e.path;null!==e.collectionGroup?(Br(n.length%2==0,"Collection Group queries should be within a document path or root."),t.parent=this.toQueryPath(n),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(Br(n.length%2!=0,"Document queries with filters are not supported."),t.parent=this.toQueryPath(n.popLast()),t.structuredQuery.from=[{collectionId:n.lastSegment()}]);var r=this.toFilter(e.filters);r&&(t.structuredQuery.where=r);var i=this.toOrder(e.orderBy);i&&(t.structuredQuery.orderBy=i);var o=this.toInt32Value(e.limit);return null!==o&&(t.structuredQuery.limit=o),e.startAt&&(t.structuredQuery.startAt=this.toCursor(e.startAt)),e.endAt&&(t.structuredQuery.endAt=this.toCursor(e.endAt)),t},$h.prototype.fromQueryTarget=function(e){var t=this.fromQueryPath(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(0<r){Br(1===r,"StructuredQuery.from with more than one collection is not supported.");var o=n.from[0];o.allDescendants?i=o.collectionId:t=t.child(o.collectionId)}var a=[];n.where&&(a=this.fromFilter(n.where));var s=[];n.orderBy&&(s=this.fromOrder(n.orderBy));var u=null;n.limit&&(u=this.fromInt32Value(n.limit));var c=null;n.startAt&&(c=this.fromCursor(n.startAt));var l=null;return n.endAt&&(l=this.fromCursor(n.endAt)),new th(t,i,s,a,u,c,l)},$h.prototype.toListenRequestLabels=function(e){var t=this.toLabel(e.purpose);return null==t?null:{"goog-listen-tags":t}},$h.prototype.toLabel=function(e){switch(e){case Lu.Listen:return null;case Lu.ExistenceFilterMismatch:return"existence-filter-mismatch";case Lu.LimboResolution:return"limbo-document";default:return Ur("Unrecognized query purpose: "+e)}},$h.prototype.toTarget=function(e){var t,n=e.query;return(t=n.isDocumentQuery()?{documents:this.toDocumentsTarget(n)}:{query:this.toQueryTarget(n)}).targetId=e.targetId,0<e.resumeToken.length&&(t.resumeToken=this.unsafeCastProtoByteString(e.resumeToken)),t},$h.prototype.toFilter=function(e){var t=this;if(0!==e.length){var n=e.map((function(e){return e instanceof ah?t.toUnaryOrFieldFilter(e):Ur("Unrecognized filter: "+JSON.stringify(e))}));return 1===n.length?n[0]:{compositeFilter:{op:"AND",filters:n}}}},$h.prototype.fromFilter=function(e){var t=this;return e?void 0!==e.unaryFilter?[this.fromUnaryFilter(e)]:void 0!==e.fieldFilter?[this.fromFieldFilter(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map((function(e){return t.fromFilter(e)})).reduce((function(e,t){return e.concat(t)})):Ur("Unknown filter: "+JSON.stringify(e)):[]},$h.prototype.toOrder=function(e){var t=this;if(0!==e.length)return e.map((function(e){return t.toPropertyOrder(e)}))},$h.prototype.fromOrder=function(e){var t=this;return e.map((function(e){return t.fromPropertyOrder(e)}))},$h.prototype.toCursor=function(e){var t=this;return{before:e.before,values:e.position.map((function(e){return t.toValue(e)}))}},$h.prototype.fromCursor=function(e){var t=this,n=!!e.before,r=e.values.map((function(e){return t.fromValue(e)}));return new Ih(r,n)},$h.prototype.toDirection=function(e){return Qh[e.name]},$h.prototype.fromDirection=function(e){switch(e){case"ASCENDING":return Th.ASCENDING;case"DESCENDING":return Th.DESCENDING;default:return}},$h.prototype.toOperatorName=function(e){return Wh[e.name]},$h.prototype.fromOperatorName=function(e){switch(e){case"EQUAL":return rh.EQUAL;case"GREATER_THAN":return rh.GREATER_THAN;case"GREATER_THAN_OR_EQUAL":return rh.GREATER_THAN_OR_EQUAL;case"LESS_THAN":return rh.LESS_THAN;case"LESS_THAN_OR_EQUAL":return rh.LESS_THAN_OR_EQUAL;case"ARRAY_CONTAINS":return rh.ARRAY_CONTAINS;case"IN":return rh.IN;case"ARRAY_CONTAINS_ANY":return rh.ARRAY_CONTAINS_ANY;case"OPERATOR_UNSPECIFIED":return Ur("Unspecified operator");default:return Ur("Unknown operator")}},$h.prototype.toFieldPathReference=function(e){return{fieldPath:e.canonicalString()}},$h.prototype.fromFieldPathReference=function(e){return ji.fromServerFormat(e.fieldPath)},$h.prototype.toPropertyOrder=function(e){return{field:this.toFieldPathReference(e.field),direction:this.toDirection(e.dir)}},$h.prototype.fromPropertyOrder=function(e){return new Nh(this.fromFieldPathReference(e.field),this.fromDirection(e.direction))},$h.prototype.fromFieldFilter=function(e){return ah.create(this.fromFieldPathReference(e.fieldFilter.field),this.fromOperatorName(e.fieldFilter.op),this.fromValue(e.fieldFilter.value))},$h.prototype.toUnaryOrFieldFilter=function(e){if(e.op===rh.EQUAL){if(e.value.isEqual(us.NAN))return{unaryFilter:{field:this.toFieldPathReference(e.field),op:"IS_NAN"}};if(e.value.isEqual(Ya.INSTANCE))return{unaryFilter:{field:this.toFieldPathReference(e.field),op:"IS_NULL"}}}return{fieldFilter:{field:this.toFieldPathReference(e.field),op:this.toOperatorName(e.op),value:this.toValue(e.value)}}},$h.prototype.fromUnaryFilter=function(e){switch(e.unaryFilter.op){case"IS_NAN":var t=this.fromFieldPathReference(e.unaryFilter.field);return ah.create(t,rh.EQUAL,us.NAN);case"IS_NULL":var n=this.fromFieldPathReference(e.unaryFilter.field);return ah.create(n,rh.EQUAL,Ya.INSTANCE);case"OPERATOR_UNSPECIFIED":return Ur("Unspecified filter");default:return Ur("Unknown filter")}},$h.prototype.toDocumentMask=function(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}},$h.prototype.fromDocumentMask=function(e){var t=(e.fieldPaths||[]).map((function(e){return ji.fromServerFormat(e)}));return ga.fromArray(t)},$h);function $h(e,t){this.databaseId=e,this.options=t}var Xh=function(){this.viewSnap=null,this.targetId=0,this.listeners=[]},Jh=(Zh.prototype.listen=function(e){var t=e.query,n=!1,r=this.queries.get(t);return r||(n=!0,r=new Xh,this.queries.set(t,r)),r.listeners.push(e),Br(!e.applyOnlineStateChange(this.onlineState),"applyOnlineStateChange() shouldn't raise an event for brand-new listeners."),!r.viewSnap||e.onViewSnapshot(r.viewSnap)&&this.raiseSnapshotsInSyncEvent(),n?this.syncEngine.listen(t).then((function(e){return r.targetId=e})):Promise.resolve(r.targetId)},Zh.prototype.unlisten=function(e){return s(this,void 0,void 0,(function(){var t,n,r,i;return u(this,(function(o){return t=e.query,n=!1,(r=this.queries.get(t))&&0<=(i=r.listeners.indexOf(e))&&(r.listeners.splice(i,1),n=0===r.listeners.length),n?(this.queries.delete(t),[2,this.syncEngine.unlisten(t)]):[2]}))}))},Zh.prototype.onWatchChange=function(e){for(var t=!1,n=0,r=e;n<r.length;n++){var i=r[n],o=i.query,a=this.queries.get(o);if(a){for(var s=0,u=a.listeners;s<u.length;s++)u[s].onViewSnapshot(i)&&(t=!0);a.viewSnap=i}}t&&this.raiseSnapshotsInSyncEvent()},Zh.prototype.onWatchError=function(e,t){var n=this.queries.get(e);if(n)for(var r=0,i=n.listeners;r<i.length;r++)i[r].onError(t);this.queries.delete(e)},Zh.prototype.onOnlineStateChange=function(e){this.onlineState=e;var t=!1;this.queries.forEach((function(n,r){for(var i=0,o=r.listeners;i<o.length;i++)o[i].applyOnlineStateChange(e)&&(t=!0)})),t&&this.raiseSnapshotsInSyncEvent()},Zh.prototype.addSnapshotsInSyncListener=function(e){this.snapshotsInSyncListeners.add(e),e.next()},Zh.prototype.removeSnapshotsInSyncListener=function(e){this.snapshotsInSyncListeners.delete(e)},Zh.prototype.raiseSnapshotsInSyncEvent=function(){this.snapshotsInSyncListeners.forEach((function(e){e.next()}))},Zh);function Zh(e){this.syncEngine=e,this.queries=new Ws((function(e){return e.canonicalId()})),this.onlineState=dl.Unknown,this.snapshotsInSyncListeners=new Set,this.syncEngine.subscribe(this)}var ef=(tf.prototype.onViewSnapshot=function(e){if(Br(0<e.docChanges.length||e.syncStateChanged,"We got a new snapshot with no changes?"),!this.options.includeMetadataChanges){for(var t=[],n=0,r=e.docChanges;n<r.length;n++){var i=r[n];i.type!==Il.Metadata&&t.push(i)}e=new Rl(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}var o=!1;return this.raisedInitialEvent?this.shouldRaiseEvent(e)&&(this.queryObserver.next(e),o=!0):this.shouldRaiseInitialEvent(e,this.onlineState)&&(this.raiseInitialEvent(e),o=!0),this.snap=e,o},tf.prototype.onError=function(e){this.queryObserver.error(e)},tf.prototype.applyOnlineStateChange=function(e){this.onlineState=e;var t=!1;return this.snap&&!this.raisedInitialEvent&&this.shouldRaiseInitialEvent(this.snap,e)&&(this.raiseInitialEvent(this.snap),t=!0),t},tf.prototype.shouldRaiseInitialEvent=function(e,t){if(Br(!this.raisedInitialEvent,"Determining whether to raise first event but already had first event"),!e.fromCache)return!0;var n=t!==dl.Offline;return this.options.waitForSyncWhenOnline&&n?(Br(e.fromCache,"Waiting for sync, but snapshot is not from cache"),!1):!e.docs.isEmpty()||t===dl.Offline},tf.prototype.shouldRaiseEvent=function(e){if(0<e.docChanges.length)return!0;var t=this.snap&&this.snap.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges},tf.prototype.raiseInitialEvent=function(e){Br(!this.raisedInitialEvent,"Trying to raise initial events for second time"),e=Rl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.raisedInitialEvent=!0,this.queryObserver.next(e)},tf);function tf(e,t,n){this.query=e,this.queryObserver=t,this.raisedInitialEvent=!1,this.snap=null,this.onlineState=dl.Unknown,this.options=n||{}}var nf=(rf.fromSnapshot=function(e,t){for(var n=Oo(),r=Oo(),i=0,o=t.docChanges;i<o.length;i++){var a=o[i];switch(a.type){case Il.Added:n=n.add(a.doc.key);break;case Il.Removed:r=r.add(a.doc.key)}}return new rf(e,t.fromCache,n,r)},rf);function rf(e,t,n,r){this.targetId=e,this.fromCache=t,this.addedKeys=n,this.removedKeys=r}var of=function(e){this.key=e},af=function(e){this.key=e},sf=(Object.defineProperty(uf.prototype,"syncedDocuments",{get:function(){return this._syncedDocuments},enumerable:!0,configurable:!0}),uf.prototype.computeDocChanges=function(e,t){var n=this,r=t?t.changeSet:new xl,i=t?t.documentSet:this.documentSet,o=t?t.mutatedKeys:this.mutatedKeys,a=i,s=!1,u=this.query.hasLimit()&&i.size===this.query.limit?i.last():null;if(e.inorderTraversal((function(e,t){var c=i.get(e),l=t instanceof Fs?t:null;l&&(Br(e.isEqual(l.key),"Mismatching keys found in document changes: "+e+" != "+l.key),l=n.query.matches(l)?l:null);var h=!!c&&n.mutatedKeys.has(c.key),f=!!l&&(l.hasLocalMutations||n.mutatedKeys.has(l.key)&&l.hasCommittedMutations),d=!1;c&&l?c.data().isEqual(l.data())?h!==f&&(r.track({type:Il.Metadata,doc:l}),d=!0):n.shouldWaitForSyncedDocument(c,l)||(r.track({type:Il.Modified,doc:l}),d=!0,u&&0<n.query.docComparator(l,u)&&(s=!0)):!c&&l?(r.track({type:Il.Added,doc:l}),d=!0):c&&!l&&(r.track({type:Il.Removed,doc:c}),d=!0,u&&(s=!0)),d&&(o=l?(a=a.add(l),f?o.add(e):o.delete(e)):(a=a.delete(e),o.delete(e)))})),this.query.hasLimit())for(;a.size>this.query.limit;){var c=a.last();a=a.delete(c.key),o=o.delete(c.key),r.track({type:Il.Removed,doc:c})}return Br(!s||!t,"View was refilled using docs that themselves needed refilling."),{documentSet:a,changeSet:r,needsRefill:s,mutatedKeys:o}},uf.prototype.shouldWaitForSyncedDocument=function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations},uf.prototype.applyChanges=function(e,t,n){var r=this;Br(!e.needsRefill,"Cannot apply changes that need a refill");var i=this.documentSet;this.documentSet=e.documentSet,this.mutatedKeys=e.mutatedKeys;var o=e.changeSet.getChanges();o.sort((function(e,t){return function(e,t){function n(e){switch(e){case Il.Added:return 1;case Il.Modified:case Il.Metadata:return 2;case Il.Removed:return 0;default:return Ur("Unknown ChangeType: "+e)}}return n(e)-n(t)}(e.type,t.type)||r.query.docComparator(e.doc,t.doc)})),this.applyTargetChange(n);var a=t?this.updateLimboDocuments():[],s=0===this.limboDocuments.size&&this.current?Nl.Synced:Nl.Local,u=s!==this.syncState;return this.syncState=s,0!==o.length||u?{snapshot:new Rl(this.query,e.documentSet,i,o,e.mutatedKeys,s===Nl.Local,u,!1),limboChanges:a}:{limboChanges:a}},uf.prototype.applyOnlineStateChange=function(e){return this.current&&e===dl.Offline?(this.current=!1,this.applyChanges({documentSet:this.documentSet,changeSet:new xl,mutatedKeys:this.mutatedKeys,needsRefill:!1},!1)):{limboChanges:[]}},uf.prototype.shouldBeInLimbo=function(e){return!this._syncedDocuments.has(e)&&!!this.documentSet.has(e)&&!this.documentSet.get(e).hasLocalMutations},uf.prototype.applyTargetChange=function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t._syncedDocuments=t._syncedDocuments.add(e)})),e.modifiedDocuments.forEach((function(e){return Br(t._syncedDocuments.has(e),"Modified document "+e+" not found in view.")})),e.removedDocuments.forEach((function(e){return t._syncedDocuments=t._syncedDocuments.delete(e)})),this.current=e.current)},uf.prototype.updateLimboDocuments=function(){var e=this;if(!this.current)return[];var t=this.limboDocuments;this.limboDocuments=Oo(),this.documentSet.forEach((function(t){e.shouldBeInLimbo(t.key)&&(e.limboDocuments=e.limboDocuments.add(t.key))}));var n=[];return t.forEach((function(t){e.limboDocuments.has(t)||n.push(new af(t))})),this.limboDocuments.forEach((function(e){t.has(e)||n.push(new of(e))})),n},uf.prototype.synchronizeWithPersistedState=function(e){this._syncedDocuments=e.remoteKeys,this.limboDocuments=Oo();var t=this.computeDocChanges(e.documents);return this.applyChanges(t,!0)},uf.prototype.computeInitialSnapshot=function(){return Rl.fromInitialDocuments(this.query,this.documentSet,this.mutatedKeys,this.syncState===Nl.Local)},uf);function uf(e,t){this.query=e,this._syncedDocuments=t,this.syncState=null,this.current=!1,this.limboDocuments=Oo(),this.mutatedKeys=Oo(),this.documentSet=new Al(e.docComparator.bind(e))}var cf=(lf.prototype.run=function(){this.runWithBackOff()},lf.prototype.runWithBackOff=function(){var e=this;this.backoff.backoffAndRun((function(){return s(e,void 0,void 0,(function(){var e,t,n=this;return u(this,(function(r){return e=this.remoteStore.createTransaction(),(t=this.tryRunUpdateFunction(e))&&t.then((function(t){n.asyncQueue.enqueueAndForget((function(){return e.commit().then((function(){n.deferred.resolve(t)})).catch((function(e){n.handleTransactionError(e)}))}))})).catch((function(e){n.handleTransactionError(e)})),[2]}))}))}))},lf.prototype.tryRunUpdateFunction=function(e){try{var t=this.updateFunction(e);return!$c(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}},lf.prototype.handleTransactionError=function(e){var t=this;0<this.retries&&this.isRetryableTransactionError(e)?(this.retries-=1,this.asyncQueue.enqueueAndForget((function(){return t.runWithBackOff(),Promise.resolve()}))):this.deferred.reject(e)},lf.prototype.isRetryableTransactionError=function(e){if("FirebaseError"!==e.name)return!1;var t=e.code;return"aborted"===t||"failed-precondition"===t||!Tl(t)},lf);function lf(e,t,n,r){this.asyncQueue=e,this.remoteStore=t,this.updateFunction=n,this.deferred=r,this.retries=5,this.backoff=new Jc(this.asyncQueue,Ki.RetryTransaction)}var hf="SyncEngine",ff=function(e,t,n){this.query=e,this.targetId=t,this.view=n},df=function(e){this.key=e,this.receivedDocument=!1},pf=(Object.defineProperty(mf.prototype,"isPrimaryClient",{get:function(){return!0===this.isPrimary},enumerable:!0,configurable:!0}),mf.prototype.subscribe=function(e){Br(null!==e,"SyncEngine listener cannot be null"),Br(null===this.syncEngineListener,"SyncEngine already has a subscriber."),this.syncEngineListener=e},mf.prototype.listen=function(e){return s(this,void 0,void 0,(function(){var t,n,r,i,o;return u(this,(function(a){switch(a.label){case 0:return this.assertSubscribed("listen()"),(r=this.queryViewsByQuery.get(e))?(t=r.targetId,this.sharedClientState.addLocalQueryTarget(t),n=r.view.computeInitialSnapshot(),[3,4]):[3,1];case 1:return[4,this.localStore.allocateQuery(e)];case 2:return i=a.sent(),o=this.sharedClientState.addLocalQueryTarget(i.targetId),t=i.targetId,[4,this.initializeViewAndComputeSnapshot(i,"current"===o)];case 3:n=a.sent(),this.isPrimary&&this.remoteStore.listen(i),a.label=4;case 4:return this.syncEngineListener.onWatchChange([n]),[2,t]}}))}))},mf.prototype.initializeViewAndComputeSnapshot=function(e,t){return s(this,void 0,void 0,(function(){var n,r,i,o,a,s,c;return u(this,(function(u){switch(u.label){case 0:return n=e.query,[4,this.localStore.executeQuery(n,!0)];case 1:return r=u.sent(),i=new sf(n,r.remoteKeys),o=i.computeDocChanges(r.documents),a=Fl.createSynthesizedTargetChangeForCurrentChange(e.targetId,t&&this.onlineState!==dl.Offline),Br(0===(s=i.applyChanges(o,!0===this.isPrimary,a)).limboChanges.length,"View returned limbo docs before target ack from the server."),Br(!!s.snapshot,"applyChanges for new view should always return a snapshot"),c=new ff(n,e.targetId,i),this.queryViewsByQuery.set(n,c),this.queryViewsByTarget[e.targetId]=c,[2,s.snapshot]}}))}))},mf.prototype.synchronizeViewAndComputeSnapshot=function(e){return s(this,void 0,void 0,(function(){var t,n;return u(this,(function(r){switch(r.label){case 0:return[4,this.localStore.executeQuery(e.query,!0)];case 1:return t=r.sent(),n=e.view.synchronizeWithPersistedState(t),this.isPrimary&&this.updateTrackedLimbos(e.targetId,n.limboChanges),[2,n]}}))}))},mf.prototype.unlisten=function(e){return s(this,void 0,void 0,(function(){var t,n=this;return u(this,(function(r){switch(r.label){case 0:return this.assertSubscribed("unlisten()"),Br(!!(t=this.queryViewsByQuery.get(e)),"Trying to unlisten on query not found:"+e),this.isPrimary?(this.sharedClientState.removeLocalQueryTarget(t.targetId),this.sharedClientState.isActiveQueryTarget(t.targetId)?[3,2]:[4,this.localStore.releaseQuery(e,!1).then((function(){n.sharedClientState.clearQueryState(t.targetId),n.remoteStore.unlisten(t.targetId),n.removeAndCleanupQuery(t)})).catch(fc)]):[3,3];case 1:r.sent(),r.label=2;case 2:return[3,5];case 3:return this.removeAndCleanupQuery(t),[4,this.localStore.releaseQuery(e,!0)];case 4:r.sent(),r.label=5;case 5:return[2]}}))}))},mf.prototype.write=function(e,t){return s(this,void 0,void 0,(function(){var n;return u(this,(function(r){switch(r.label){case 0:return this.assertSubscribed("write()"),[4,this.localStore.localWrite(e)];case 1:return n=r.sent(),this.sharedClientState.addPendingMutation(n.batchId),this.addMutationCallback(n.batchId,t),[4,this.emitNewSnapsAndNotifyLocalStore(n.changes)];case 2:return r.sent(),[4,this.remoteStore.fillWritePipeline()];case 3:return r.sent(),[2]}}))}))},mf.prototype.runTransaction=function(e,t,n){new cf(e,this.remoteStore,t,n).run()},mf.prototype.applyRemoteEvent=function(e){return s(this,void 0,void 0,(function(){var t,n=this;return u(this,(function(r){switch(r.label){case 0:this.assertSubscribed("applyRemoteEvent()"),r.label=1;case 1:return r.trys.push([1,4,,6]),[4,this.localStore.applyRemoteEvent(e)];case 2:return t=r.sent(),Zr(e.targetChanges,(function(e,t){var r=n.limboResolutionsByTarget[Number(e)];r&&(Br(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1,"Limbo resolution for single document contains multiple changes."),0<t.addedDocuments.size?r.receivedDocument=!0:0<t.modifiedDocuments.size?Br(r.receivedDocument,"Received change for limbo target document without add."):0<t.removedDocuments.size&&(Br(r.receivedDocument,"Received remove for limbo target document without add."),r.receivedDocument=!1))})),[4,this.emitNewSnapsAndNotifyLocalStore(t,e)];case 3:return r.sent(),[3,6];case 4:return[4,fc(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}}))}))},mf.prototype.applyOnlineStateChange=function(e,t){if(this.isPrimary&&t===ml.RemoteStore||!this.isPrimary&&t===ml.SharedClientState){this.assertSubscribed("applyOnlineStateChange()");var n=[];this.queryViewsByQuery.forEach((function(t,r){var i=r.view.applyOnlineStateChange(e);Br(0===i.limboChanges.length,"OnlineState should not affect limbo documents."),i.snapshot&&n.push(i.snapshot)})),this.syncEngineListener.onOnlineStateChange(e),this.syncEngineListener.onWatchChange(n),this.onlineState=e,this.isPrimary&&this.sharedClientState.setOnlineState(e)}},mf.prototype.rejectListen=function(e,t){return s(this,void 0,void 0,(function(){var n,r,i,o,a,s,c=this;return u(this,(function(u){switch(u.label){case 0:return this.assertSubscribed("rejectListens()"),this.sharedClientState.updateQueryState(e,"rejected",t),n=this.limboResolutionsByTarget[e],(r=n&&n.key)?(this.limboTargetsByKey=this.limboTargetsByKey.remove(r),delete this.limboResolutionsByTarget[e],i=(i=new ho(Qi.comparator)).insert(r,new Us(r,co.forDeletedDoc())),o=Oo().add(r),a=new Ml(co.MIN,{},new wo(wi),i,o),[2,this.applyRemoteEvent(a)]):[3,1];case 1:return Br(!!(s=this.queryViewsByTarget[e]),"Unknown targetId: "+e),[4,this.localStore.releaseQuery(s.query,!1).then((function(){return c.removeAndCleanupQuery(s)})).catch(fc)];case 2:u.sent(),this.syncEngineListener.onWatchError(s.query,t),u.label=3;case 3:return[2]}}))}))},mf.prototype.applyBatchState=function(e,t,n){return s(this,void 0,void 0,(function(){var r;return u(this,(function(i){switch(i.label){case 0:return this.assertSubscribed("applyBatchState()"),[4,this.localStore.lookupMutationDocuments(e)];case 1:return null===(r=i.sent())?(Fr(hf,"Cannot apply mutation batch with id: "+e),[2]):"pending"!==t?[3,3]:[4,this.remoteStore.fillWritePipeline()];case 2:return i.sent(),[3,4];case 3:"acknowledged"===t||"rejected"===t?(this.processUserCallback(e,n||null),this.localStore.removeCachedMutationBatchMetadata(e)):Ur("Unknown batchState: "+t),i.label=4;case 4:return[4,this.emitNewSnapsAndNotifyLocalStore(r)];case 5:return i.sent(),[2]}}))}))},mf.prototype.applySuccessfulWrite=function(e){return s(this,void 0,void 0,(function(){var t,n;return u(this,(function(r){switch(r.label){case 0:this.assertSubscribed("applySuccessfulWrite()"),t=e.batch.batchId,this.processUserCallback(t,null),this.triggerPendingWritesCallbacks(t),r.label=1;case 1:return r.trys.push([1,4,,6]),[4,this.localStore.acknowledgeBatch(e)];case 2:return n=r.sent(),this.sharedClientState.updateMutationState(t,"acknowledged"),[4,this.emitNewSnapsAndNotifyLocalStore(n)];case 3:return r.sent(),[3,6];case 4:return[4,fc(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}}))}))},mf.prototype.rejectFailedWrite=function(e,t){return s(this,void 0,void 0,(function(){var n;return u(this,(function(r){switch(r.label){case 0:this.assertSubscribed("rejectFailedWrite()"),this.processUserCallback(e,t),this.triggerPendingWritesCallbacks(e),r.label=1;case 1:return r.trys.push([1,4,,6]),[4,this.localStore.rejectBatch(e)];case 2:return n=r.sent(),this.sharedClientState.updateMutationState(e,"rejected",t),[4,this.emitNewSnapsAndNotifyLocalStore(n)];case 3:return r.sent(),[3,6];case 4:return[4,fc(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}}))}))},mf.prototype.registerPendingWritesCallback=function(e){return s(this,void 0,void 0,(function(){var t,n;return u(this,(function(r){switch(r.label){case 0:return this.remoteStore.canUseNetwork()||Fr(hf,"The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),[4,this.localStore.getHighestUnacknowledgedBatchId()];case 1:return-1===(t=r.sent())?e.resolve():((n=this.pendingWritesCallbacks.get(t)||[]).push(e),this.pendingWritesCallbacks.set(t,n)),[2]}}))}))},mf.prototype.triggerPendingWritesCallbacks=function(e){(this.pendingWritesCallbacks.get(e)||[]).forEach((function(e){e.resolve()})),this.pendingWritesCallbacks.delete(e)},mf.prototype.rejectOutstandingPendingWritesCallbacks=function(e){this.pendingWritesCallbacks.forEach((function(t){t.forEach((function(t){t.reject(new Gr(Kr.CANCELLED,e))}))})),this.pendingWritesCallbacks.clear()},mf.prototype.addMutationCallback=function(e,t){var n=this.mutationUserCallbacks[this.currentUser.toKey()];n=(n=n||new ho(wi)).insert(e,t),this.mutationUserCallbacks[this.currentUser.toKey()]=n},mf.prototype.processUserCallback=function(e,t){var n=this.mutationUserCallbacks[this.currentUser.toKey()];if(n){var r=n.get(e);r&&(Br(e===n.minKey(),"Mutation callbacks processed out-of-order?"),t?r.reject(t):r.resolve(),n=n.remove(e)),this.mutationUserCallbacks[this.currentUser.toKey()]=n}},mf.prototype.removeAndCleanupQuery=function(e){var t=this;if(this.sharedClientState.removeLocalQueryTarget(e.targetId),this.queryViewsByQuery.delete(e.query),delete this.queryViewsByTarget[e.targetId],this.isPrimary){var n=this.limboDocumentRefs.referencesForId(e.targetId);this.limboDocumentRefs.removeReferencesForId(e.targetId),n.forEach((function(e){t.limboDocumentRefs.containsKey(e)||t.removeLimboTarget(e)}))}},mf.prototype.removeLimboTarget=function(e){var t=this.limboTargetsByKey.get(e);null!==t&&(this.remoteStore.unlisten(t),this.limboTargetsByKey=this.limboTargetsByKey.remove(e),delete this.limboResolutionsByTarget[t])},mf.prototype.updateTrackedLimbos=function(e,t){for(var n=0,r=t;n<r.length;n++){var i=r[n];i instanceof of?(this.limboDocumentRefs.addReference(i.key,e),this.trackLimboChange(i)):i instanceof af?(Fr(hf,"Document no longer in limbo: "+i.key),this.limboDocumentRefs.removeReference(i.key,e),this.limboDocumentRefs.containsKey(i.key)||this.removeLimboTarget(i.key)):Ur("Unknown limbo change: "+JSON.stringify(i))}},mf.prototype.trackLimboChange=function(e){var t=e.key;if(!this.limboTargetsByKey.get(t)){Fr(hf,"New document in limbo: "+t);var n=this.limboTargetIdGenerator.next(),r=th.atPath(t.path);this.limboResolutionsByTarget[n]=new df(t),this.remoteStore.listen(new ju(r,n,Lu.LimboResolution,Oi.INVALID)),this.limboTargetsByKey=this.limboTargetsByKey.insert(t,n)}},mf.prototype.currentLimboDocs=function(){return this.limboTargetsByKey},mf.prototype.emitNewSnapsAndNotifyLocalStore=function(e,t){return s(this,void 0,void 0,(function(){var n,r,i,o=this;return u(this,(function(a){switch(a.label){case 0:return n=[],r=[],i=[],this.queryViewsByQuery.forEach((function(a,s){i.push(Promise.resolve().then((function(){var t=s.view.computeDocChanges(e);return t.needsRefill?o.localStore.executeQuery(s.query,!1).then((function(e){var n=e.documents;return s.view.computeDocChanges(n,t)})):t})).then((function(e){var i=t&&t.targetChanges[s.targetId],a=s.view.applyChanges(e,!0===o.isPrimary,i);if(o.updateTrackedLimbos(s.targetId,a.limboChanges),a.snapshot){o.isPrimary&&o.sharedClientState.updateQueryState(s.targetId,a.snapshot.fromCache?"not-current":"current"),n.push(a.snapshot);var u=nf.fromSnapshot(s.targetId,a.snapshot);r.push(u)}})))})),[4,Promise.all(i)];case 1:return a.sent(),this.syncEngineListener.onWatchChange(n),[4,this.localStore.notifyLocalViewChanges(r)];case 2:return a.sent(),[2]}}))}))},mf.prototype.assertSubscribed=function(e){Br(null!==this.syncEngineListener,"Trying to call "+e+" before calling subscribe().")},mf.prototype.handleCredentialChange=function(e){return s(this,void 0,void 0,(function(){var t,n;return u(this,(function(r){switch(r.label){case 0:return t=!this.currentUser.isEqual(e),this.currentUser=e,t?(this.rejectOutstandingPendingWritesCallbacks("'waitForPendingWrites' promise is rejected due to a user change."),[4,this.localStore.handleUserChange(e)]):[3,3];case 1:return n=r.sent(),this.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),[4,this.emitNewSnapsAndNotifyLocalStore(n.affectedDocuments)];case 2:r.sent(),r.label=3;case 3:return[4,this.remoteStore.handleCredentialChange()];case 4:return r.sent(),[2]}}))}))},mf.prototype.applyPrimaryState=function(e){return s(this,void 0,void 0,(function(){var t,n,r,i,o,a,s,c=this;return u(this,(function(u){switch(u.label){case 0:return!0!==e||!0===this.isPrimary?[3,3]:(this.isPrimary=!0,[4,this.remoteStore.applyPrimaryState(!0)]);case 1:return u.sent(),t=this.sharedClientState.getAllActiveQueryTargets(),[4,this.synchronizeQueryViewsAndRaiseSnapshots(t.toArray())];case 2:for(n=u.sent(),r=0,i=n;r<i.length;r++)o=i[r],this.remoteStore.listen(o);return[3,7];case 3:return!1!==e||!1===this.isPrimary?[3,7]:(this.isPrimary=!1,a=[],s=Promise.resolve(),Jr(this.queryViewsByTarget,(function(e,t){c.sharedClientState.isLocalQueryTarget(e)?a.push(e):s=s.then((function(){return c.unlisten(t.query)})),c.remoteStore.unlisten(t.targetId)})),[4,s]);case 4:return u.sent(),[4,this.synchronizeQueryViewsAndRaiseSnapshots(a)];case 5:return u.sent(),this.resetLimboDocuments(),[4,this.remoteStore.applyPrimaryState(!1)];case 6:u.sent(),u.label=7;case 7:return[2]}}))}))},mf.prototype.resetLimboDocuments=function(){var e=this;Jr(this.limboResolutionsByTarget,(function(t){e.remoteStore.unlisten(t)})),this.limboDocumentRefs.removeAllReferences(),this.limboResolutionsByTarget=[],this.limboTargetsByKey=new ho(Qi.comparator)},mf.prototype.synchronizeQueryViewsAndRaiseSnapshots=function(e){return s(this,void 0,void 0,(function(){var t,n,r,i,o,a,s,c,l;return u(this,(function(u){switch(u.label){case 0:t=[],n=[],r=0,i=e,u.label=1;case 1:return r<i.length?(o=i[r],a=void 0,(s=this.queryViewsByTarget[o])?[4,this.localStore.releaseQuery(s.query,!0)]:[3,5]):[3,11];case 2:return u.sent(),[4,this.localStore.allocateQuery(s.query)];case 3:return a=u.sent(),[4,this.synchronizeViewAndComputeSnapshot(s)];case 4:return(c=u.sent()).snapshot&&n.push(c.snapshot),[3,9];case 5:return Br(!0===this.isPrimary,"A secondary tab should never have an active query without an active view."),[4,this.localStore.getQueryForTarget(o)];case 6:return Br(!!(l=u.sent()),"Query data for target "+o+" not found"),[4,this.localStore.allocateQuery(l)];case 7:return a=u.sent(),[4,this.initializeViewAndComputeSnapshot(a,!1)];case 8:u.sent(),u.label=9;case 9:t.push(a),u.label=10;case 10:return r++,[3,1];case 11:return this.syncEngineListener.onWatchChange(n),[2,t]}}))}))},mf.prototype.getActiveClients=function(){return this.localStore.getActiveClients()},mf.prototype.applyTargetState=function(e,t,n){return s(this,void 0,void 0,(function(){var r,i,o;return u(this,(function(a){switch(a.label){case 0:if(this.isPrimary)return Fr(hf,"Ignoring unexpected query state notification."),[2];if(!this.queryViewsByTarget[e])return[3,7];switch(t){case"current":case"not-current":return[3,1];case"rejected":return[3,4]}return[3,6];case 1:return[4,this.localStore.getNewDocumentChanges()];case 2:return r=a.sent(),i=Ml.createSynthesizedRemoteEventForCurrentChange(e,"current"===t),[4,this.emitNewSnapsAndNotifyLocalStore(r,i)];case 3:return a.sent(),[3,7];case 4:return o=this.queryViewsByTarget[e],this.removeAndCleanupQuery(o),[4,this.localStore.releaseQuery(o.query,!0)];case 5:return a.sent(),this.syncEngineListener.onWatchError(o.query,n),[3,7];case 6:Ur("Unexpected target state: "+t),a.label=7;case 7:return[2]}}))}))},mf.prototype.applyActiveTargetsChange=function(e,t){return s(this,void 0,void 0,(function(){var n,r,i,o,a,s,c,l,h,f=this;return u(this,(function(d){switch(d.label){case 0:if(!this.isPrimary)return[2];n=0,r=e,d.label=1;case 1:return n<r.length?(h=r[n],Br(!this.queryViewsByTarget[h],"Trying to add an already active target"),[4,this.localStore.getQueryForTarget(h)]):[3,6];case 2:return Br(!!(i=d.sent()),"Query data for active target "+h+" not found"),[4,this.localStore.allocateQuery(i)];case 3:return o=d.sent(),[4,this.initializeViewAndComputeSnapshot(o,!1)];case 4:d.sent(),this.remoteStore.listen(o),d.label=5;case 5:return n++,[3,1];case 6:a=function(e){var t;return u(this,(function(n){switch(n.label){case 0:return(t=s.queryViewsByTarget[e])?[4,s.localStore.releaseQuery(t.query,!1).then((function(){f.remoteStore.unlisten(e),f.removeAndCleanupQuery(t)})).catch(fc)]:[3,2];case 1:n.sent(),n.label=2;case 2:return[2]}}))},s=this,c=0,l=t,d.label=7;case 7:return c<l.length?(h=l[c],[5,a(h)]):[3,10];case 8:d.sent(),d.label=9;case 9:return c++,[3,7];case 10:return[2]}}))}))},mf.prototype.enableNetwork=function(){return this.localStore.setNetworkEnabled(!0),this.remoteStore.enableNetwork()},mf.prototype.disableNetwork=function(){return this.localStore.setNetworkEnabled(!1),this.remoteStore.disableNetwork()},mf.prototype.getRemoteKeysForTarget=function(e){var t=this.limboResolutionsByTarget[e];return t&&t.receivedDocument?Oo().add(t.key):this.queryViewsByTarget[e]?this.queryViewsByTarget[e].view.syncedDocuments:Oo()},mf);function mf(e,t,n,r){this.localStore=e,this.remoteStore=t,this.sharedClientState=n,this.currentUser=r,this.syncEngineListener=null,this.queryViewsByQuery=new Ws((function(e){return e.canonicalId()})),this.queryViewsByTarget={},this.limboTargetsByKey=new ho(Qi.comparator),this.limboResolutionsByTarget={},this.limboDocumentRefs=new wc,this.mutationUserCallbacks={},this.pendingWritesCallbacks=new Map,this.limboTargetIdGenerator=Xo.forSyncEngine(),this.isPrimary=void 0,this.onlineState=dl.Unknown}var yf=(gf.prototype.isAuthenticated=function(){return null!=this.uid},gf.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},gf.prototype.isEqual=function(e){return e.uid===this.uid},gf.UNAUTHENTICATED=new gf(null),gf.GOOGLE_CREDENTIALS=new gf("google-credentials-uid"),gf.FIRST_PARTY=new gf("first-party-uid"),gf);function gf(e){this.uid=e}var vf="SharedClientState",bf="firestore_clients",wf="firestore_mutations",Ef="firestore_targets",Sf=(Tf.fromWebStorageEntry=function(e,t,n){var r=JSON.parse(n),i="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error),o=void 0;return i&&r.error&&(i="string"==typeof r.error.message&&"string"==typeof r.error.code)&&(o=new Gr(r.error.code,r.error.message)),i?new Tf(e,t,r.state,o):(qr(vf,"Failed to parse mutation state for ID '"+t+"': "+n),null)},Tf.prototype.toWebStorageJSON=function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)},Tf);function Tf(e,t,n,r){this.user=e,this.batchId=t,this.state=n,Br(void 0!==(this.error=r)==("rejected"===n),"MutationMetadata must contain an error iff state is 'rejected'")}var Cf=(If.fromWebStorageEntry=function(e,t){var n=JSON.parse(t),r="object"==typeof n&&-1!==["not-current","current","rejected"].indexOf(n.state)&&(void 0===n.error||"object"==typeof n.error),i=void 0;return r&&n.error&&(r="string"==typeof n.error.message&&"string"==typeof n.error.code)&&(i=new Gr(n.error.code,n.error.message)),r?new If(e,n.state,i):(qr(vf,"Failed to parse target state for ID '"+e+"': "+t),null)},If.prototype.toWebStorageJSON=function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)},If);function If(e,t,n){this.targetId=e,this.state=t,Br(void 0!==(this.error=n)==("rejected"===t),"QueryTargetMetadata must contain an error iff state is 'rejected'")}var kf=(Nf.fromWebStorageEntry=function(e,t){for(var n=JSON.parse(t),r="object"==typeof n&&n.activeTargetIds instanceof Array,i=Po(),o=0;r&&o<n.activeTargetIds.length;++o)r=Xc(n.activeTargetIds[o]),i=i.add(n.activeTargetIds[o]);return r?new Nf(e,i):(qr(vf,"Failed to parse client data for instance '"+e+"': "+t),null)},Nf);function Nf(e,t){this.clientId=e,this.activeTargetIds=t}var Df=(Af.fromWebStorageEntry=function(e){var t=JSON.parse(e);return"object"==typeof t&&t.onlineState in dl&&"string"==typeof t.clientId?new Af(t.clientId,dl[t.onlineState]):(qr(vf,"Failed to parse online state: "+e),null)},Af);function Af(e,t){this.clientId=e,this.onlineState=t}var _f=(xf.prototype.addQueryTarget=function(e){Br(!this.activeTargetIds.has(e),"Target with ID '"+e+"' already active."),this.activeTargetIds=this.activeTargetIds.add(e)},xf.prototype.removeQueryTarget=function(e){this.activeTargetIds=this.activeTargetIds.delete(e)},xf.prototype.toWebStorageJSON=function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)},xf);function xf(){this.activeTargetIds=Po()}var Of=(Rf.isAvailable=function(e){return!(!e.window||null==e.window.localStorage)},Rf.prototype.start=function(){return s(this,void 0,void 0,(function(){var e,t,n,r,i,o,a,s,c,l,h,f=this;return u(this,(function(u){switch(u.label){case 0:return Br(!this.started,"WebStorageSharedClientState already started"),Br(null!==this.syncEngine,"syncEngine property must be set before calling start()"),Br(null!==this.onlineStateHandler,"onlineStateHandler property must be set before calling start()"),[4,this.syncEngine.getActiveClients()];case 1:for(e=u.sent(),t=0,n=e;t<n.length;t++)(r=n[t])!==this.localClientId&&(i=this.getItem(this.toWebStorageClientStateKey(r)))&&(o=kf.fromWebStorageEntry(r,i))&&(this.activeClients[o.clientId]=o);for(this.persistClientState(),(a=this.storage.getItem(this.onlineStateKey))&&(s=this.fromWebStorageOnlineState(a))&&this.handleOnlineStateEvent(s),c=0,l=this.earlyEvents;c<l.length;c++)h=l[c],this.handleWebStorageEvent(h);return this.earlyEvents=[],this.platform.window.addEventListener("unload",(function(){return f.shutdown()})),this.started=!0,[2]}}))}))},Rf.prototype.writeSequenceNumber=function(e){this.setItem(this.sequenceNumberKey,JSON.stringify(e))},Rf.prototype.getAllActiveQueryTargets=function(){var e=Po();return Zr(this.activeClients,(function(t,n){e=e.unionWith(n.activeTargetIds)})),e},Rf.prototype.isActiveQueryTarget=function(e){for(var t in this.activeClients)if(this.activeClients.hasOwnProperty(t)&&this.activeClients[t].activeTargetIds.has(e))return!0;return!1},Rf.prototype.addPendingMutation=function(e){this.persistMutationState(e,"pending")},Rf.prototype.updateMutationState=function(e,t,n){this.persistMutationState(e,t,n),this.removeMutationState(e)},Rf.prototype.addLocalQueryTarget=function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(this.toWebStorageQueryTargetMetadataKey(e));if(n){var r=Cf.fromWebStorageEntry(e,n);r&&(t=r.state)}}return this.localClientState.addQueryTarget(e),this.persistClientState(),t},Rf.prototype.removeLocalQueryTarget=function(e){this.localClientState.removeQueryTarget(e),this.persistClientState()},Rf.prototype.isLocalQueryTarget=function(e){return this.localClientState.activeTargetIds.has(e)},Rf.prototype.clearQueryState=function(e){this.removeItem(this.toWebStorageQueryTargetMetadataKey(e))},Rf.prototype.updateQueryState=function(e,t,n){this.persistQueryTargetState(e,t,n)},Rf.prototype.handleUserChange=function(e,t,n){var r=this;t.forEach((function(e){r.removeMutationState(e)})),this.currentUser=e,n.forEach((function(e){r.addPendingMutation(e)}))},Rf.prototype.setOnlineState=function(e){this.persistOnlineState(e)},Rf.prototype.shutdown=function(){this.started&&(this.platform.window.removeEventListener("storage",this.storageListener),this.removeItem(this.localClientStorageKey),this.started=!1)},Rf.prototype.getItem=function(e){var t=this.storage.getItem(e);return Fr(vf,"READ",e,t),t},Rf.prototype.setItem=function(e,t){Fr(vf,"SET",e,t),this.storage.setItem(e,t)},Rf.prototype.removeItem=function(e){Fr(vf,"REMOVE",e),this.storage.removeItem(e)},Rf.prototype.handleWebStorageEvent=function(e){var t=this;if(e.storageArea===this.storage){if(Fr(vf,"EVENT",e.key,e.newValue),e.key===this.localClientStorageKey)return void qr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.queue.enqueueAndForget((function(){return s(t,void 0,void 0,(function(){var t,n,r,i,o,a;return u(this,(function(s){if(!this.started)return this.earlyEvents.push(e),[2];if(null===e.key)return[2];if(this.clientStateKeyRe.test(e.key)){if(null==e.newValue)return n=this.fromWebStorageClientStateKey(e.key),[2,this.handleClientStateEvent(n,null)];if(t=this.fromWebStorageClientState(e.key,e.newValue))return[2,this.handleClientStateEvent(t.clientId,t)]}else if(this.mutationBatchKeyRe.test(e.key)){if(null!==e.newValue&&(r=this.fromWebStorageMutationMetadata(e.key,e.newValue)))return[2,this.handleMutationBatchEvent(r)]}else if(this.queryTargetKeyRe.test(e.key)){if(null!==e.newValue&&(i=this.fromWebStorageQueryTargetMetadata(e.key,e.newValue)))return[2,this.handleQueryTargetEvent(i)]}else if(e.key===this.onlineStateKey){if(null!==e.newValue&&(o=this.fromWebStorageOnlineState(e.newValue)))return[2,this.handleOnlineStateEvent(o)]}else e.key===this.sequenceNumberKey&&(Br(!!this.sequenceNumberHandler,"Missing sequenceNumberHandler"),(a=function(e){var t=Oi.INVALID;if(null!=e)try{var n=JSON.parse(e);Br("number"==typeof n,"Found non-numeric sequence number"),t=n}catch(e){qr(vf,"Failed to read sequence number from WebStorage",e)}return t}(e.newValue))!==Oi.INVALID&&this.sequenceNumberHandler(a));return[2]}))}))}))}},Object.defineProperty(Rf.prototype,"localClientState",{get:function(){return this.activeClients[this.localClientId]},enumerable:!0,configurable:!0}),Rf.prototype.persistClientState=function(){this.setItem(this.localClientStorageKey,this.localClientState.toWebStorageJSON())},Rf.prototype.persistMutationState=function(e,t,n){var r=new Sf(this.currentUser,e,t,n),i=this.toWebStorageMutationBatchKey(e);this.setItem(i,r.toWebStorageJSON())},Rf.prototype.removeMutationState=function(e){var t=this.toWebStorageMutationBatchKey(e);this.removeItem(t)},Rf.prototype.persistOnlineState=function(e){var t={clientId:this.localClientId,onlineState:dl[e]};this.storage.setItem(this.onlineStateKey,JSON.stringify(t))},Rf.prototype.persistQueryTargetState=function(e,t,n){var r=this.toWebStorageQueryTargetMetadataKey(e),i=new Cf(e,t,n);this.setItem(r,i.toWebStorageJSON())},Rf.prototype.toWebStorageClientStateKey=function(e){return Br(-1===e.indexOf("_"),"Client key cannot contain '_', but was '"+e+"'"),bf+"_"+this.persistenceKey+"_"+e},Rf.prototype.toWebStorageQueryTargetMetadataKey=function(e){return Ef+"_"+this.persistenceKey+"_"+e},Rf.prototype.toWebStorageMutationBatchKey=function(e){var t=wf+"_"+this.persistenceKey+"_"+e;return this.currentUser.isAuthenticated()&&(t+="_"+this.currentUser.uid),t},Rf.prototype.fromWebStorageClientStateKey=function(e){var t=this.clientStateKeyRe.exec(e);return t?t[1]:null},Rf.prototype.fromWebStorageClientState=function(e,t){var n=this.fromWebStorageClientStateKey(e);return Br(null!==n,"Cannot parse client state key '"+e+"'"),kf.fromWebStorageEntry(n,t)},Rf.prototype.fromWebStorageMutationMetadata=function(e,t){var n=this.mutationBatchKeyRe.exec(e);Br(null!==n,"Cannot parse mutation batch key '"+e+"'");var r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return Sf.fromWebStorageEntry(new yf(i),r,t)},Rf.prototype.fromWebStorageQueryTargetMetadata=function(e,t){var n=this.queryTargetKeyRe.exec(e);Br(null!==n,"Cannot parse query target key '"+e+"'");var r=Number(n[1]);return Cf.fromWebStorageEntry(r,t)},Rf.prototype.fromWebStorageOnlineState=function(e){return Df.fromWebStorageEntry(e)},Rf.prototype.handleMutationBatchEvent=function(e){return s(this,void 0,void 0,(function(){return u(this,(function(t){return e.user.uid!==this.currentUser.uid?(Fr(vf,"Ignoring mutation for non-active user "+e.user.uid),[2]):[2,this.syncEngine.applyBatchState(e.batchId,e.state,e.error)]}))}))},Rf.prototype.handleQueryTargetEvent=function(e){return this.syncEngine.applyTargetState(e.targetId,e.state,e.error)},Rf.prototype.handleClientStateEvent=function(e,t){var n=this,r=this.getAllActiveQueryTargets();t?this.activeClients[e]=t:delete this.activeClients[e];var i=this.getAllActiveQueryTargets(),o=[],a=[];return i.forEach((function(e){return s(n,void 0,void 0,(function(){return u(this,(function(t){return r.has(e)||o.push(e),[2]}))}))})),r.forEach((function(e){return s(n,void 0,void 0,(function(){return u(this,(function(t){return i.has(e)||a.push(e),[2]}))}))})),this.syncEngine.applyActiveTargetsChange(o,a)},Rf.prototype.handleOnlineStateEvent=function(e){this.activeClients[e.clientId]&&this.onlineStateHandler(e.onlineState)},Rf);function Rf(e,t,n,r,i){if(this.queue=e,this.platform=t,this.persistenceKey=n,this.localClientId=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.activeClients={},this.storageListener=this.handleWebStorageEvent.bind(this),this.started=!1,this.earlyEvents=[],!Rf.isAvailable(this.platform))throw new Gr(Kr.UNIMPLEMENTED,"LocalStorage is not available on this platform.");var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.platform.window.localStorage,this.currentUser=i,this.localClientStorageKey=this.toWebStorageClientStateKey(this.localClientId),this.sequenceNumberKey="firestore_sequence_number_"+n,this.activeClients[this.localClientId]=new _f,this.clientStateKeyRe=new RegExp("^"+bf+"_"+o+"_([^_]*)$"),this.mutationBatchKeyRe=new RegExp("^"+wf+"_"+o+"_(\\d+)(?:_(.*))?$"),this.queryTargetKeyRe=new RegExp("^"+Ef+"_"+o+"_(\\d+)$"),this.onlineStateKey="firestore_online_state_"+n,this.platform.window.addEventListener("storage",this.storageListener)}var Pf=(Mf.prototype.addPendingMutation=function(e){},Mf.prototype.updateMutationState=function(e,t,n){},Mf.prototype.addLocalQueryTarget=function(e){return this.localState.addQueryTarget(e),this.queryState[e]||"not-current"},Mf.prototype.updateQueryState=function(e,t,n){this.queryState[e]=t},Mf.prototype.removeLocalQueryTarget=function(e){this.localState.removeQueryTarget(e)},Mf.prototype.isLocalQueryTarget=function(e){return this.localState.activeTargetIds.has(e)},Mf.prototype.clearQueryState=function(e){delete this.queryState[e]},Mf.prototype.getAllActiveQueryTargets=function(){return this.localState.activeTargetIds},Mf.prototype.isActiveQueryTarget=function(e){return this.localState.activeTargetIds.has(e)},Mf.prototype.start=function(){return this.localState=new _f,Promise.resolve()},Mf.prototype.handleUserChange=function(e,t,n){},Mf.prototype.setOnlineState=function(e){},Mf.prototype.shutdown=function(){},Mf.prototype.writeSequenceNumber=function(e){},Mf);function Mf(){this.localState=new _f,this.queryState={},this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null}var Lf="FirestoreClient",Ff=(qf.prototype.lruParams=function(){return $u.withCacheSize(this.cacheSizeBytes)},qf);function qf(e,t){this.cacheSizeBytes=e,this.synchronizeTabs=t}var Vf=function(){},Uf=(Bf.prototype.start=function(e){var t=this;this.verifyNotTerminated();var n=new Hi,r=new Hi,i=!1;return this.credentials.setChangeListener((function(o){i?t.asyncQueue.enqueueAndForget((function(){return t.handleCredentialChange(o)})):(i=!0,t.initializePersistence(e,r,o).then((function(e){return t.initializeRest(o,e)})).then(n.resolve,n.reject))})),this.asyncQueue.enqueueAndForget((function(){return n.promise})),r.promise},Bf.prototype.enableNetwork=function(){var e=this;return this.verifyNotTerminated(),this.asyncQueue.enqueue((function(){return e.syncEngine.enableNetwork()}))},Bf.prototype.initializePersistence=function(e,t,n){var r=this;return e instanceof Ff?this.startIndexedDbPersistence(n,e).then((function(e){return t.resolve(),e})).catch((function(e){if(t.reject(e),!r.canFallback(e))throw e;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+e),r.startMemoryPersistence()})):(t.resolve(),this.startMemoryPersistence())},Bf.prototype.canFallback=function(e){return e instanceof Gr?e.code===Kr.FAILED_PRECONDITION||e.code===Kr.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code},Bf.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new Gr(Kr.FAILED_PRECONDITION,"The client has already been terminated.")},Bf.prototype.startIndexedDbPersistence=function(e,t){var n=this,r=lc.buildStoragePrefix(this.databaseInfo),i=new Yh(this.databaseInfo.databaseId,{useProto3Json:!0});return Promise.resolve().then((function(){return s(n,void 0,void 0,(function(){var n,o;return u(this,(function(a){switch(a.label){case 0:if(t.synchronizeTabs&&!Of.isAvailable(this.platform))throw new Gr(Kr.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");return n=t.lruParams(),this.sharedClientState=t.synchronizeTabs?new Of(this.asyncQueue,this.platform,r,this.clientId,e):new Pf,[4,lc.createIndexedDbPersistence({allowTabSynchronization:t.synchronizeTabs,persistenceKey:r,clientId:this.clientId,platform:this.platform,queue:this.asyncQueue,serializer:i,lruParams:n,sequenceNumberSyncer:this.sharedClientState})];case 1:return o=a.sent(),[2,(this.persistence=o).referenceDelegate.garbageCollector]}}))}))}))},Bf.prototype.startMemoryPersistence=function(){return this.persistence=Mc.createEagerPersistence(this.clientId),this.sharedClientState=new Pf,Promise.resolve(null)},Bf.prototype.initializeRest=function(e,t){var n=this;return Fr(Lf,"Initializing. user=",e.uid),this.platform.loadConnection(this.databaseInfo).then((function(r){return s(n,void 0,void 0,(function(){var n,i,o,a,c,l,h=this;return u(this,(function(f){switch(f.label){case 0:return n=new Qc,this.localStore=new Ic(this.persistence,n,e),[4,this.localStore.start()];case 1:return f.sent(),t&&(this.lruScheduler=new Ju(t,this.asyncQueue,this.localStore)),i=this.platform.newConnectivityMonitor(),o=this.platform.newSerializer(this.databaseInfo.databaseId),a=new hl(this.asyncQueue,r,this.credentials,o),c=function(e){return h.syncEngine.applyOnlineStateChange(e,ml.RemoteStore)},l=function(e){return h.syncEngine.applyOnlineStateChange(e,ml.SharedClientState)},this.remoteStore=new Xl(this.localStore,a,this.asyncQueue,c,i),this.syncEngine=new pf(this.localStore,this.remoteStore,this.sharedClientState,e),this.sharedClientState.onlineStateHandler=l,this.remoteStore.syncEngine=this.syncEngine,this.sharedClientState.syncEngine=this.syncEngine,this.eventMgr=new Jh(this.syncEngine),[4,this.sharedClientState.start()];case 2:return f.sent(),[4,this.remoteStore.start()];case 3:return f.sent(),[4,this.persistence.setPrimaryStateListener((function(e){return s(h,void 0,void 0,(function(){return u(this,(function(t){switch(t.label){case 0:return[4,this.syncEngine.applyPrimaryState(e)];case 1:return t.sent(),this.lruScheduler&&(e&&!this.lruScheduler.started?this.lruScheduler.start():e||this.lruScheduler.stop()),[2]}}))}))}))];case 4:return f.sent(),[4,this.persistence.setDatabaseDeletedListener((function(){return s(h,void 0,void 0,(function(){return u(this,(function(e){switch(e.label){case 0:return[4,this.terminate()];case 1:return e.sent(),[2]}}))}))}))];case 5:return f.sent(),[2]}}))}))}))},Bf.prototype.handleCredentialChange=function(e){return this.asyncQueue.verifyOperationInProgress(),Fr(Lf,"Credential Changed. Current user: "+e.uid),this.syncEngine.handleCredentialChange(e)},Bf.prototype.disableNetwork=function(){var e=this;return this.verifyNotTerminated(),this.asyncQueue.enqueue((function(){return e.syncEngine.disableNetwork()}))},Bf.prototype.terminate=function(){var e=this;return this.asyncQueue.enqueueAndInitiateShutdown((function(){return s(e,void 0,void 0,(function(){return u(this,(function(e){switch(e.label){case 0:return this.lruScheduler&&this.lruScheduler.stop(),[4,this.remoteStore.shutdown()];case 1:return e.sent(),[4,this.sharedClientState.shutdown()];case 2:return e.sent(),[4,this.persistence.shutdown()];case 3:return e.sent(),this.credentials.removeChangeListener(),[2]}}))}))}))},Bf.prototype.waitForPendingWrites=function(){var e=this;this.verifyNotTerminated();var t=new Hi;return this.asyncQueue.enqueueAndForget((function(){return e.syncEngine.registerPendingWritesCallback(t)})),t.promise},Bf.prototype.listen=function(e,t,n){var r=this;this.verifyNotTerminated();var i=new ef(e,t,n);return this.asyncQueue.enqueueAndForget((function(){return r.eventMgr.listen(i)})),i},Bf.prototype.unlisten=function(e){var t=this;this.clientTerminated||this.asyncQueue.enqueueAndForget((function(){return t.eventMgr.unlisten(e)}))},Bf.prototype.getDocumentFromLocalCache=function(e){var t=this;return this.verifyNotTerminated(),this.asyncQueue.enqueue((function(){return t.localStore.readDocument(e)})).then((function(e){if(e instanceof Fs)return e;if(e instanceof Us)return null;throw new Gr(Kr.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")}))},Bf.prototype.getDocumentsFromLocalCache=function(e){var t=this;return this.verifyNotTerminated(),this.asyncQueue.enqueue((function(){return s(t,void 0,void 0,(function(){var t,n,r;return u(this,(function(i){switch(i.label){case 0:return[4,this.localStore.executeQuery(e,!0)];case 1:return t=i.sent(),n=new sf(e,t.remoteKeys),r=n.computeDocChanges(t.documents),[2,n.applyChanges(r,!1).snapshot]}}))}))}))},Bf.prototype.write=function(e){var t=this;this.verifyNotTerminated();var n=new Hi;return this.asyncQueue.enqueueAndForget((function(){return t.syncEngine.write(e,n)})),n.promise},Bf.prototype.databaseId=function(){return this.databaseInfo.databaseId},Bf.prototype.addSnapshotsInSyncListener=function(e){var t=this;this.verifyNotTerminated(),this.asyncQueue.enqueueAndForget((function(){return t.eventMgr.addSnapshotsInSyncListener(e),Promise.resolve()}))},Bf.prototype.removeSnapshotsInSyncListener=function(e){this.clientTerminated||this.eventMgr.removeSnapshotsInSyncListener(e)},Object.defineProperty(Bf.prototype,"clientTerminated",{get:function(){return this.asyncQueue.isShuttingDown},enumerable:!0,configurable:!0}),Bf.prototype.transaction=function(e){var t=this;this.verifyNotTerminated();var n=new Hi;return this.asyncQueue.enqueueAndForget((function(){return t.syncEngine.runTransaction(t.asyncQueue,e,n),Promise.resolve()})),n.promise},Bf);function Bf(e,t,n,r){this.platform=e,this.databaseInfo=t,this.credentials=n,this.asyncQueue=r,this.clientId=vi.newId()}var jf=(zf.prototype.next=function(e){this.scheduleEvent(this.observer.next,e)},zf.prototype.error=function(e){this.scheduleEvent(this.observer.error,e)},zf.prototype.mute=function(){this.muted=!0},zf.prototype.scheduleEvent=function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)},zf);function zf(e){this.observer=e,this.muted=!1}var Qf=(Wf.documentId=function(){return Wf._DOCUMENT_ID},Wf.prototype.isEqual=function(e){if(!(e instanceof Wf))throw mi("isEqual","FieldPath",1,e);return this._internalPath.isEqual(e._internalPath)},Wf._DOCUMENT_ID=new Wf(ji.keyField().canonicalString()),Wf);function Wf(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];!function(e,t,n,r){if(!(t instanceof Array)||t.length<1)throw new Gr(Kr.INVALID_ARGUMENT,"Function FieldPath() requires its fieldNames argument to be an array with at least "+gi(1,"element")+".")}(0,e);for(var n=0;n<e.length;++n)if(oi("FieldPath","string",n,e[n]),0===e[n].length)throw new Gr(Kr.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ji(e)}var Kf=new RegExp("[~\\*/\\[\\]]"),Gf=function(e,t){this.user=t,this.type="OAuth",this.authHeaders={Authorization:"Bearer "+e}},Hf=(Yf.prototype.getToken=function(){return Promise.resolve(null)},Yf.prototype.invalidateToken=function(){},Yf.prototype.setChangeListener=function(e){Br(!this.changeListener,"Can only call setChangeListener() once."),(this.changeListener=e)(yf.UNAUTHENTICATED)},Yf.prototype.removeChangeListener=function(){Br(null!==this.changeListener,"removeChangeListener() when no listener registered"),this.changeListener=null},Yf);function Yf(){this.changeListener=null}var $f=(Xf.prototype.getToken=function(){var e=this;Br(null!=this.tokenListener,"getToken cannot be called after listener removed.");var t=this.tokenCounter,n=this.forceRefresh;return this.forceRefresh=!1,this.app.INTERNAL.getToken(n).then((function(n){if(e.tokenCounter!==t)throw new Gr(Kr.ABORTED,"getToken aborted due to token change.");return n?(Br("string"==typeof n.accessToken,"Invalid tokenData returned from getToken():"+n),new Gf(n.accessToken,e.currentUser)):null}))},Xf.prototype.invalidateToken=function(){this.forceRefresh=!0},Xf.prototype.setChangeListener=function(e){Br(!this.changeListener,"Can only call setChangeListener() once."),(this.changeListener=e)(this.currentUser)},Xf.prototype.removeChangeListener=function(){Br(null!=this.tokenListener,"removeChangeListener() called twice"),Br(null!==this.changeListener,"removeChangeListener() called when no listener registered"),this.app.INTERNAL.removeAuthTokenListener(this.tokenListener),this.tokenListener=null,this.changeListener=null},Xf.prototype.getUser=function(){var e=this.app.INTERNAL.getUid();return Br(null===e||"string"==typeof e,"Received invalid UID: "+e),new yf(e)},Xf);function Xf(e){var t=this;this.app=e,this.tokenListener=null,this.currentUser=yf.UNAUTHENTICATED,this.tokenCounter=0,this.changeListener=null,this.forceRefresh=!1,this.tokenListener=function(){t.tokenCounter++,t.currentUser=t.getUser(),t.changeListener&&t.changeListener(t.currentUser)},this.currentUser=this.getUser(),this.tokenCounter=0,this.app.INTERNAL.addAuthTokenListener(this.tokenListener)}var Jf=(Object.defineProperty(Zf.prototype,"authHeaders",{get:function(){var e={"X-Goog-AuthUser":this.sessionIndex},t=this.gapi.auth.getAuthHeaderValueForFirstParty([]);return t&&(e.Authorization=t),e},enumerable:!0,configurable:!0}),Zf);function Zf(e,t){this.gapi=e,this.sessionIndex=t,this.type="FirstParty",this.user=yf.FIRST_PARTY}var ed=(td.prototype.getToken=function(){return Promise.resolve(new Jf(this.gapi,this.sessionIndex))},td.prototype.setChangeListener=function(e){e(yf.FIRST_PARTY)},td.prototype.removeChangeListener=function(){},td.prototype.invalidateToken=function(){},td);function td(e,t){this.gapi=e,this.sessionIndex=t}function nd(e){return function(e,t){if("object"!=typeof e||null===e)return!1;for(var n=e,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(e)}var rd=(id.delete=function(){return ti("FieldValue.delete",arguments),ad.instance},id.serverTimestamp=function(){return ti("FieldValue.serverTimestamp",arguments),cd.instance},id.arrayUnion=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return ri("FieldValue.arrayUnion",arguments,1),new fd(e)},id.arrayRemove=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return ri("FieldValue.arrayRemove",arguments,1),new md(e)},id.increment=function(e){return oi("FieldValue.increment","number",1,e),ni("FieldValue.increment",arguments,1),new vd(e)},id.prototype.isEqual=function(e){return this===e},id);function id(e){this._methodName=e}var od,ad=(r(sd,od=rd),sd.instance=new sd,sd);function sd(){return od.call(this,"FieldValue.delete")||this}var ud,cd=(r(ld,ud=rd),ld.instance=new ld,ld);function ld(){return ud.call(this,"FieldValue.serverTimestamp")||this}var hd,fd=(r(dd,hd=rd),dd);function dd(e){var t=hd.call(this,"FieldValue.arrayUnion")||this;return t._elements=e,t}var pd,md=(r(yd,pd=rd),yd);function yd(e){var t=pd.call(this,"FieldValue.arrayRemove")||this;return t._elements=e,t}var gd,vd=(r(bd,gd=rd),bd);function bd(e){var t=gd.call(this,"FieldValue.increment")||this;return t._operand=e,t}var wd=Yr(rd,"Use FieldValue.<field>() instead."),Ed=/^__.*__$/,Sd=(Td.prototype.toMutations=function(e,t){var n=[];return null!==this.fieldMask?n.push(new Oa(e,this.data,this.fieldMask,t)):n.push(new Aa(e,this.data,t)),0<this.fieldTransforms.length&&n.push(new Ma(e,this.fieldTransforms)),n},Td);function Td(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}var Cd,Id,kd=(Nd.prototype.toMutations=function(e,t){var n=[new Oa(e,this.data,this.fieldMask,t)];return 0<this.fieldTransforms.length&&n.push(new Ma(e,this.fieldTransforms)),n},Nd);function Nd(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}function Dd(e){switch(e){case Cd.Set:case Cd.MergeSet:case Cd.Update:return!0;case Cd.Argument:return!1;default:throw Ur("Unexpected case for UserDataSource: "+e)}}(Id=Cd=Cd||{})[Id.Set=0]="Set",Id[Id.Update=1]="Update",Id[Id.MergeSet=2]="MergeSet",Id[Id.Argument=3]="Argument";var Ad=(_d.prototype.childContextForField=function(e){var t=null==this.path?null:this.path.child(e),n=new _d(this.dataSource,this.methodName,t,!1,this.fieldTransforms,this.fieldMask);return n.validatePathSegment(e),n},_d.prototype.childContextForFieldPath=function(e){var t=null==this.path?null:this.path.child(e),n=new _d(this.dataSource,this.methodName,t,!1,this.fieldTransforms,this.fieldMask);return n.validatePath(),n},_d.prototype.childContextForArray=function(e){return new _d(this.dataSource,this.methodName,null,!0,this.fieldTransforms,this.fieldMask)},_d.prototype.createError=function(e){var t=null===this.path||this.path.isEmpty()?"":" (found in field "+this.path.toString()+")";return new Gr(Kr.INVALID_ARGUMENT,"Function "+this.methodName+"() called with invalid data. "+e+t)},_d.prototype.contains=function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))},_d.prototype.validatePath=function(){if(null!==this.path)for(var e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))},_d.prototype.validatePathSegment=function(e){if(Dd(this.dataSource)&&Ed.test(e))throw this.createError("Document fields cannot begin and end with __")},_d);function _d(e,t,n,r,i,o){this.dataSource=e,this.methodName=t,this.path=n,this.arrayElement=r,void 0===i&&this.validatePath(),this.arrayElement=void 0!==r&&r,this.fieldTransforms=i||[],this.fieldMask=o||[]}var xd=function(e,t){this.databaseId=e,this.key=t},Od=(Rd.prototype.parseSetData=function(e,t){var n=new Ad(Cd.Set,e,ji.EMPTY_PATH);Md("Data must be an object, but it was:",n,t);var r=this.parseData(t,n);return new Sd(r,null,n.fieldTransforms)},Rd.prototype.parseMergeData=function(e,t,n){var r=new Ad(Cd.MergeSet,e,ji.EMPTY_PATH);Md("Data must be an object, but it was:",r,t);var i,o,a=this.parseData(t,r);if(n){for(var s=new wo(ji.comparator),u=0,c=n;u<c.length;u++){var l=c[u],h=void 0;if(l instanceof Qf)h=l._internalPath;else{if("string"!=typeof l)throw Ur("Expected stringOrFieldPath to be a string or a FieldPath");h=Fd(e,l)}if(!r.contains(h))throw new Gr(Kr.INVALID_ARGUMENT,"Field '"+h+"' is specified in your field mask but missing from your input data.");s=s.add(h)}i=ga.fromSet(s),o=r.fieldTransforms.filter((function(e){return i.covers(e.field)}))}else i=ga.fromArray(r.fieldMask),o=r.fieldTransforms;return new Sd(a,i,o)},Rd.prototype.parseUpdateData=function(e,t){var n=this,r=new Ad(Cd.Update,e,ji.EMPTY_PATH);Md("Data must be an object, but it was:",r,t);var i=new wo(ji.comparator),o=As.EMPTY;Zr(t,(function(t,a){var s=Fd(e,t),u=r.childContextForFieldPath(s);if((a=n.runPreConverter(a,u))instanceof ad)i=i.add(s);else{var c=n.parseData(a,u);null!=c&&(i=i.add(s),o=o.set(s,c))}}));var a=ga.fromSet(i);return new kd(o,a,r.fieldTransforms)},Rd.prototype.parseUpdateVarargs=function(e,t,n,r){var i=new Ad(Cd.Update,e,ji.EMPTY_PATH),o=[Ld(e,t)],a=[n];if(r.length%2!=0)throw new Gr(Kr.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var s=0;s<r.length;s+=2)o.push(Ld(e,r[s])),a.push(r[s+1]);var u=new wo(ji.comparator),c=As.EMPTY;for(s=0;s<o.length;++s){var l=o[s],h=i.childContextForFieldPath(l),f=this.runPreConverter(a[s],h);if(f instanceof ad)u=u.add(l);else{var d=this.parseData(f,h);null!=d&&(u=u.add(l),c=c.set(l,d))}}var p=ga.fromSet(u);return new kd(c,p,i.fieldTransforms)},Rd.prototype.parseQueryValue=function(e,t){var n=new Ad(Cd.Argument,e,ji.EMPTY_PATH),r=this.parseData(t,n);return Br(null!=r,"Parsed data should not be null."),Br(0===n.fieldTransforms.length,"Field transforms should have been disallowed."),r},Rd.prototype.runPreConverter=function(e,t){try{return this.preConverter(e)}catch(e){var n=qd(e);throw t.createError(n)}},Rd.prototype.parseData=function(e,t){if(Pd(e=this.runPreConverter(e,t)))return Md("Unsupported field value:",t,e),this.parseObject(e,t);if(e instanceof rd)return this.parseSentinelFieldValue(e,t),null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.arrayElement)throw t.createError("Nested arrays are not supported");return this.parseArray(e,t)}return this.parseScalarValue(e,t)},Rd.prototype.parseObject=function(e,t){var n=this,r=new ho(wi);return ei(e)?t.path&&0<t.path.length&&t.fieldMask.push(t.path):Zr(e,(function(e,i){var o=n.parseData(i,t.childContextForField(e));null!=o&&(r=r.insert(e,o))})),new As(r)},Rd.prototype.parseArray=function(e,t){for(var n=[],r=0,i=0,o=e;i<o.length;i++){var a=o[i],s=this.parseData(a,t.childContextForArray(r));null==s&&(s=Ya.INSTANCE),n.push(s),r++}return new Os(n)},Rd.prototype.parseSentinelFieldValue=function(e,t){if(!Dd(t.dataSource))throw t.createError(e._methodName+"() can only be used with update() and set()");if(null===t.path)throw t.createError(e._methodName+"() is not currently supported inside arrays");if(e instanceof ad){if(t.dataSource!==Cd.MergeSet)throw t.dataSource===Cd.Update?(Br(0<t.path.length,"FieldValue.delete() at the top level should have already been handled."),t.createError("FieldValue.delete() can only appear at the top level of your update data")):t.createError("FieldValue.delete() cannot be used with set() unless you pass {merge:true}");t.fieldMask.push(t.path)}else if(e instanceof cd)t.fieldTransforms.push(new ba(t.path,xh.instance));else if(e instanceof fd){var n=this.parseArrayTransformElements(e._methodName,e._elements),r=new Rh(n);t.fieldTransforms.push(new ba(t.path,r))}else if(e instanceof md){n=this.parseArrayTransformElements(e._methodName,e._elements);var i=new Mh(n);t.fieldTransforms.push(new ba(t.path,i))}else if(e instanceof vd){var o=this.parseQueryValue("FieldValue.increment",e._operand),a=new Fh(o);t.fieldTransforms.push(new ba(t.path,a))}else Ur("Unknown FieldValue type: "+e)},Rd.prototype.parseScalarValue=function(e,t){if(null===e)return Ya.INSTANCE;if("number"==typeof e)return Xc(e)?new os(e):new us(e);if("boolean"==typeof e)return Ja.of(e);if("string"==typeof e)return new hs(e);if(e instanceof Date)return new ps(so.fromDate(e));if(e instanceof so)return new ps(new so(e.seconds,1e3*Math.floor(e.nanoseconds/1e3)));if(e instanceof Zl)return new ks(e);if(e instanceof Ii)return new ws(e);if(e instanceof xd)return new Ts(e.databaseId,e.key);throw t.createError("Unsupported field value: "+fi(e))},Rd.prototype.parseArrayTransformElements=function(e,t){var n=this;return t.map((function(t,r){var i=new Ad(Cd.Argument,e,ji.EMPTY_PATH);return n.parseData(t,i.childContextForArray(r))}))},Rd);function Rd(e){this.preConverter=e}function Pd(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof so||e instanceof Zl||e instanceof Ii||e instanceof xd||e instanceof rd)}function Md(e,t,n){if(!Pd(n)||!hi(n)){var r=fi(n);throw"an object"===r?t.createError(e+" a custom object"):t.createError(e+" "+r)}}function Ld(e,t){if(t instanceof Qf)return t._internalPath;if("string"==typeof t)return Fd(e,t);throw new Gr(Kr.INVALID_ARGUMENT,"Function "+e+"() called with invalid data. Field path arguments must be of type string or FieldPath.")}function Fd(e,t){try{return function(e){if(0<=e.search(Kf))throw new Gr(Kr.INVALID_ARGUMENT,"Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'");try{return new(Qf.bind.apply(Qf,c([void 0],e.split("."))))}catch(t){throw new Gr(Kr.INVALID_ARGUMENT,"Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'")}}(t)._internalPath}catch(t){var n=qd(t);throw new Gr(Kr.INVALID_ARGUMENT,"Function "+e+"() called with invalid data. "+n)}}function qd(e){return e instanceof Error?e.message:e.toString()}var Vd=$u.COLLECTION_DISABLED,Ud=(Bd.prototype.isEqual=function(e){return this.host===e.host&&this.ssl===e.ssl&&this.timestampsInSnapshots===e.timestampsInSnapshots&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.forceLongPolling===e.forceLongPolling},Bd);function Bd(e){if(void 0===e.host){if(void 0!==e.ssl)throw new Gr(Kr.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else si("settings","non-empty string","host",e.host),this.host=e.host,ui("settings","boolean","ssl",e.ssl),this.ssl=Xr(e.ssl,!0);if(pi("settings",e,["host","ssl","credentials","timestampsInSnapshots","cacheSizeBytes","experimentalForceLongPolling"]),ui("settings","object","credentials",e.credentials),this.credentials=e.credentials,ui("settings","boolean","timestampsInSnapshots",e.timestampsInSnapshots),!0===e.timestampsInSnapshots?qr("\n  The timestampsInSnapshots setting now defaults to true and you no\n  longer need to explicitly set it. In a future release, the setting\n  will be removed entirely and so it is recommended that you remove it\n  from your firestore.settings() call now."):!1===e.timestampsInSnapshots&&qr("\n  The timestampsInSnapshots setting will soon be removed. YOU MUST UPDATE\n  YOUR CODE.\n\n  To hide this warning, stop using the timestampsInSnapshots setting in your\n  firestore.settings({ ... }) call.\n\n  Once you remove the setting, Timestamps stored in Cloud Firestore will be\n  read back as Firebase Timestamp objects instead of as system Date objects.\n  So you will also need to update code expecting a Date to instead expect a\n  Timestamp. For example:\n\n  // Old:\n  const date = snapshot.get('created_at');\n  // New:\n  const timestamp = snapshot.get('created_at'); const date =\n  timestamp.toDate();\n\n  Please audit all existing usages of Date when you enable the new\n  behavior."),this.timestampsInSnapshots=Xr(e.timestampsInSnapshots,!0),ui("settings","number","cacheSizeBytes",e.cacheSizeBytes),void 0===e.cacheSizeBytes)this.cacheSizeBytes=$u.DEFAULT_CACHE_SIZE_BYTES;else{if(e.cacheSizeBytes!==Vd&&e.cacheSizeBytes<$u.MINIMUM_CACHE_SIZE_BYTES)throw new Gr(Kr.INVALID_ARGUMENT,"cacheSizeBytes must be at least "+$u.MINIMUM_CACHE_SIZE_BYTES);this.cacheSizeBytes=e.cacheSizeBytes}ui("settings","boolean","experimentalForceLongPolling",e.experimentalForceLongPolling),this.forceLongPolling=void 0!==e.experimentalForceLongPolling&&e.experimentalForceLongPolling}var jd=(zd.prototype.settings=function(e){if(ni("Firestore.settings",arguments,1),oi("Firestore.settings","object",1,e),$r(e,"persistence"))throw new Gr(Kr.INVALID_ARGUMENT,'"persistence" is now specified with a separate call to firestore.enablePersistence().');var t=new Ud(e);if(this._firestoreClient&&!this._settings.isEqual(t))throw new Gr(Kr.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only call settings() before calling any other methods on a Firestore object.");void 0!==(this._settings=t).credentials&&(this._credentials=function(e){if(!e)return new Hf;switch(e.type){case"gapi":var t=e.client;return Br(!("object"!=typeof t||null===t||!t.auth||!t.auth.getAuthHeaderValueForFirstParty),"unexpected gapi interface"),new ed(t,e.sessionIndex||"0");case"provider":return e.client;default:throw new Gr(Kr.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},zd.prototype.enableNetwork=function(){return this.ensureClientConfigured(),this._firestoreClient.enableNetwork()},zd.prototype.disableNetwork=function(){return this.ensureClientConfigured(),this._firestoreClient.disableNetwork()},zd.prototype.enablePersistence=function(e){if(this._firestoreClient)throw new Gr(Kr.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only call enablePersistence() before calling any other methods on a Firestore object.");var t=!1;return e&&(void 0!==e.experimentalTabSynchronization&&qr("The 'experimentalTabSynchronization' setting has been renamed to 'synchronizeTabs'. In a future release, the setting will be removed and it is recommended that you update your firestore.enablePersistence() call to use 'synchronizeTabs'."),t=Xr(void 0!==e.synchronizeTabs?e.synchronizeTabs:e.experimentalTabSynchronization,!1)),this.configureClient(new Ff(this._settings.cacheSizeBytes,t))},zd.prototype.clearPersistence=function(){var e=this,t=lc.buildStoragePrefix(this.makeDatabaseInfo()),n=new Hi;return this._queue.enqueueAndForgetEvenAfterShutdown((function(){return s(e,void 0,void 0,(function(){var e;return u(this,(function(r){switch(r.label){case 0:if(r.trys.push([0,2,,3]),void 0!==this._firestoreClient&&!this._firestoreClient.clientTerminated)throw new Gr(Kr.FAILED_PRECONDITION,"Persistence cannot be cleared after this Firestore instance is initialized.");return[4,lc.clearPersistence(t)];case 1:return r.sent(),n.resolve(),[3,3];case 2:return e=r.sent(),n.reject(e),[3,3];case 3:return[2]}}))}))})),n.promise},zd.prototype.terminate=function(){return this.app._removeServiceInstance("firestore"),this.INTERNAL.delete()},Object.defineProperty(zd.prototype,"_isTerminated",{get:function(){return this.ensureClientConfigured(),this._firestoreClient.clientTerminated},enumerable:!0,configurable:!0}),zd.prototype.waitForPendingWrites=function(){return this.ensureClientConfigured(),this._firestoreClient.waitForPendingWrites()},zd.prototype.onSnapshotsInSync=function(e){if(this.ensureClientConfigured(),nd(e))return this.onSnapshotsInSyncInternal(e);oi("Firestore.onSnapshotsInSync","function",1,e);var t={next:e};return this.onSnapshotsInSyncInternal(t)},zd.prototype.onSnapshotsInSyncInternal=function(e){var t=this,n=new jf({next:function(){e.next&&e.next()},error:function(e){throw Ur("Uncaught Error in onSnapshotsInSync")}});return this._firestoreClient.addSnapshotsInSyncListener(n),function(){n.mute(),t._firestoreClient.removeSnapshotsInSyncListener(n)}},zd.prototype.ensureClientConfigured=function(){return this._firestoreClient||this.configureClient(new Vf),this._firestoreClient},zd.prototype.makeDatabaseInfo=function(){return new Di(this._databaseId,this._persistenceKey,this._settings.host,this._settings.ssl,this._settings.forceLongPolling)},zd.prototype.configureClient=function(e){Br(!!this._settings.host,"FirestoreSettings.host is not set"),Br(!this._firestoreClient,"configureClient() called multiple times");var t=this.makeDatabaseInfo();return this._firestoreClient=new Uf(jr.getPlatform(),t,this._credentials,this._queue),this._firestoreClient.start(e)},zd.prototype.createDataConverter=function(e){return new Od((function(t){if(t instanceof Hd){var n=e,r=t.firestore._databaseId;if(!r.isEqual(n))throw new Gr(Kr.INVALID_ARGUMENT,"Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return new xd(e,t._key)}return t}))},zd.databaseIdFromApp=function(e){var t=e.options;if(!$r(t,"projectId"))throw new Gr(Kr.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');var n=t.projectId;if(!n||"string"!=typeof n)throw new Gr(Kr.INVALID_ARGUMENT,"projectId must be a string in FirebaseApp.options");return new _i(n)},Object.defineProperty(zd.prototype,"app",{get:function(){if(!this._firebaseApp)throw new Gr(Kr.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._firebaseApp},enumerable:!0,configurable:!0}),zd.prototype.collection=function(e){return ni("Firestore.collection",arguments,1),oi("Firestore.collection","non-empty string",1,e),this.ensureClientConfigured(),new up(qi.fromString(e),this)},zd.prototype.doc=function(e){return ni("Firestore.doc",arguments,1),oi("Firestore.doc","non-empty string",1,e),this.ensureClientConfigured(),Hd.forPath(qi.fromString(e),this)},zd.prototype.collectionGroup=function(e){if(ni("Firestore.collectionGroup",arguments,1),oi("Firestore.collectionGroup","non-empty string",1,e),0<=e.indexOf("/"))throw new Gr(Kr.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function Firestore.collectionGroup(). Collection IDs must not contain '/'.");return this.ensureClientConfigured(),new rp(new th(qi.EMPTY_PATH,e),this)},zd.prototype.runTransaction=function(e){var t=this;return ni("Firestore.runTransaction",arguments,1),oi("Firestore.runTransaction","function",1,e),this.ensureClientConfigured().transaction((function(n){return e(new Qd(t,n))}))},zd.prototype.batch=function(){return this.ensureClientConfigured(),new Kd(this)},Object.defineProperty(zd,"logLevel",{get:function(){switch(Mr()){case Ir.DEBUG:return"debug";case Ir.ERROR:return"error";case Ir.SILENT:return"silent";default:return Ur("Unknown log level: "+Mr())}},enumerable:!0,configurable:!0}),zd.setLogLevel=function(e){switch(ni("Firestore.setLogLevel",arguments,1),oi("Firestore.setLogLevel","non-empty string",1,e),e){case"debug":Lr(Ir.DEBUG);break;case"error":Lr(Ir.ERROR);break;case"silent":Lr(Ir.SILENT);break;default:throw new Gr(Kr.INVALID_ARGUMENT,"Invalid log level: "+e)}},zd.prototype._areTimestampsInSnapshotsEnabled=function(){return this._settings.timestampsInSnapshots},zd);function zd(e){var t=this;if(this._firebaseApp=null,this._queue=new Xi,this.INTERNAL={delete:function(){return s(t,void 0,void 0,(function(){return u(this,(function(e){switch(e.label){case 0:return this.ensureClientConfigured(),[4,this._firestoreClient.terminate()];case 1:return e.sent(),[2]}}))}))}},"object"==typeof e.options){var n=e;this._firebaseApp=n,this._databaseId=zd.databaseIdFromApp(n),this._persistenceKey=n.name,this._credentials=new $f(n)}else{var r=e;if(!r.projectId)throw new Gr(Kr.INVALID_ARGUMENT,"Must provide projectId");this._databaseId=new _i(r.projectId,r.database),this._persistenceKey="[DEFAULT]",this._credentials=new Hf}this._settings=new Ud({}),this._dataConverter=this.createDataConverter(this._databaseId)}var Qd=(Wd.prototype.get=function(e){var t=this;ni("Transaction.get",arguments,1);var n=dp("Transaction.get",e,this._firestore);return this._transaction.lookup([n._key]).then((function(e){if(!e||1!==e.length)return Ur("Mismatch in docs returned from document lookup.");var r=e[0];if(r instanceof Us)return new Jd(t._firestore,n._key,null,!1,!1);if(r instanceof Fs)return new Jd(t._firestore,n._key,r,!1,!1);throw Ur("BatchGetDocumentsRequest returned unexpected document type: "+r.constructor.name)}))},Wd.prototype.set=function(e,t,n){ii("Transaction.set",arguments,2,3);var r=dp("Transaction.set",e,this._firestore),i=(n=lp("Transaction.set",n)).merge||n.mergeFields?this._firestore._dataConverter.parseMergeData("Transaction.set",t,n.mergeFields):this._firestore._dataConverter.parseSetData("Transaction.set",t);return this._transaction.set(r._key,i),this},Wd.prototype.update=function(e,t,n){for(var r,i,o=[],a=3;a<arguments.length;a++)o[a-3]=arguments[a];return i="string"==typeof t||t instanceof Qf?(ri("Transaction.update",arguments,3),r=dp("Transaction.update",e,this._firestore),this._firestore._dataConverter.parseUpdateVarargs("Transaction.update",t,n,o)):(ni("Transaction.update",arguments,2),r=dp("Transaction.update",e,this._firestore),this._firestore._dataConverter.parseUpdateData("Transaction.update",t)),this._transaction.update(r._key,i),this},Wd.prototype.delete=function(e){ni("Transaction.delete",arguments,1);var t=dp("Transaction.delete",e,this._firestore);return this._transaction.delete(t._key),this},Wd);function Wd(e,t){this._firestore=e,this._transaction=t}var Kd=(Gd.prototype.set=function(e,t,n){ii("WriteBatch.set",arguments,2,3),this.verifyNotCommitted();var r=dp("WriteBatch.set",e,this._firestore),i=(n=lp("WriteBatch.set",n)).merge||n.mergeFields?this._firestore._dataConverter.parseMergeData("WriteBatch.set",t,n.mergeFields):this._firestore._dataConverter.parseSetData("WriteBatch.set",t);return this._mutations=this._mutations.concat(i.toMutations(r._key,Ca.NONE)),this},Gd.prototype.update=function(e,t,n){for(var r,i,o=[],a=3;a<arguments.length;a++)o[a-3]=arguments[a];return this.verifyNotCommitted(),i="string"==typeof t||t instanceof Qf?(ri("WriteBatch.update",arguments,3),r=dp("WriteBatch.update",e,this._firestore),this._firestore._dataConverter.parseUpdateVarargs("WriteBatch.update",t,n,o)):(ni("WriteBatch.update",arguments,2),r=dp("WriteBatch.update",e,this._firestore),this._firestore._dataConverter.parseUpdateData("WriteBatch.update",t)),this._mutations=this._mutations.concat(i.toMutations(r._key,Ca.exists(!0))),this},Gd.prototype.delete=function(e){ni("WriteBatch.delete",arguments,1),this.verifyNotCommitted();var t=dp("WriteBatch.delete",e,this._firestore);return this._mutations=this._mutations.concat(new ja(t._key,Ca.NONE)),this},Gd.prototype.commit=function(){return s(this,void 0,void 0,(function(){return u(this,(function(e){return this.verifyNotCommitted(),this._committed=!0,0<this._mutations.length?[2,this._firestore.ensureClientConfigured().write(this._mutations)]:[2]}))}))},Gd.prototype.verifyNotCommitted=function(){if(this._committed)throw new Gr(Kr.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},Gd);function Gd(e){this._firestore=e,this._mutations=[],this._committed=!1}var Hd=(Yd.forPath=function(e,t){if(e.length%2!=0)throw new Gr(Kr.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+e.canonicalString()+" has "+e.length);return new Yd(new Qi(e),t)},Object.defineProperty(Yd.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!0,configurable:!0}),Object.defineProperty(Yd.prototype,"parent",{get:function(){return new up(this._key.path.popLast(),this.firestore)},enumerable:!0,configurable:!0}),Object.defineProperty(Yd.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!0,configurable:!0}),Yd.prototype.collection=function(e){if(ni("DocumentReference.collection",arguments,1),oi("DocumentReference.collection","non-empty string",1,e),!e)throw new Gr(Kr.INVALID_ARGUMENT,"Must provide a non-empty collection name to collection()");var t=qi.fromString(e);return new up(this._key.path.child(t),this.firestore)},Yd.prototype.isEqual=function(e){if(!(e instanceof Yd))throw mi("isEqual","DocumentReference",1,e);return this.firestore===e.firestore&&this._key.isEqual(e._key)},Yd.prototype.set=function(e,t){ii("DocumentReference.set",arguments,1,2);var n=(t=lp("DocumentReference.set",t)).merge||t.mergeFields?this.firestore._dataConverter.parseMergeData("DocumentReference.set",e,t.mergeFields):this.firestore._dataConverter.parseSetData("DocumentReference.set",e);return this._firestoreClient.write(n.toMutations(this._key,Ca.NONE))},Yd.prototype.update=function(e,t){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];return n="string"==typeof e||e instanceof Qf?(ri("DocumentReference.update",arguments,2),this.firestore._dataConverter.parseUpdateVarargs("DocumentReference.update",e,t,r)):(ni("DocumentReference.update",arguments,1),this.firestore._dataConverter.parseUpdateData("DocumentReference.update",e)),this._firestoreClient.write(n.toMutations(this._key,Ca.exists(!0)))},Yd.prototype.delete=function(){return ni("DocumentReference.delete",arguments,0),this._firestoreClient.write([new ja(this._key,Ca.NONE)])},Yd.prototype.onSnapshot=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];ii("DocumentReference.onSnapshot",arguments,1,4);var n,r={includeMetadataChanges:!1},i=0;"object"!=typeof e[i]||nd(e[i])||(pi("DocumentReference.onSnapshot",r=e[i],["includeMetadataChanges"]),ui("DocumentReference.onSnapshot","boolean","includeMetadataChanges",r.includeMetadataChanges),i++);var o={includeMetadataChanges:r.includeMetadataChanges};return n=nd(e[i])?e[i]:(oi("DocumentReference.onSnapshot","function",i,e[i]),ai("DocumentReference.onSnapshot","function",i+1,e[i+1]),ai("DocumentReference.onSnapshot","function",i+2,e[i+2]),{next:e[i],error:e[i+1],complete:e[i+2]}),this.onSnapshotInternal(o,n)},Yd.prototype.onSnapshotInternal=function(e,t){var n=this,r=function(e){console.error("Uncaught Error in onSnapshot:",e)};t.error&&(r=t.error.bind(t));var i=new jf({next:function(e){if(t.next){Br(e.docs.size<=1,"Too many documents returned on a document query");var r=e.docs.get(n._key);t.next(new Jd(n.firestore,n._key,r,e.fromCache,e.hasPendingWrites))}},error:r}),o=this._firestoreClient.listen(th.atPath(this._key.path),i,e);return function(){i.mute(),n._firestoreClient.unlisten(o)}},Yd.prototype.get=function(e){var t=this;return ii("DocumentReference.get",arguments,0,1),fp("DocumentReference.get",e),new Promise((function(n,r){e&&"cache"===e.source?t.firestore.ensureClientConfigured().getDocumentFromLocalCache(t._key).then((function(e){n(new Jd(t.firestore,t._key,e,!0,e instanceof Fs&&e.hasLocalMutations))}),r):t.getViaSnapshotListener(n,r,e)}))},Yd.prototype.getViaSnapshotListener=function(e,t,n){var r=this.onSnapshotInternal({includeMetadataChanges:!0,waitForSyncWhenOnline:!0},{next:function(i){r(),!i.exists&&i.metadata.fromCache?t(new Gr(Kr.UNAVAILABLE,"Failed to get document because the client is offline.")):i.exists&&i.metadata.fromCache&&n&&"server"===n.source?t(new Gr(Kr.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):e(i)},error:t})},Yd);function Yd(e,t){this._key=e,this.firestore=t,this._firestoreClient=this.firestore.ensureClientConfigured()}var $d=(Xd.prototype.isEqual=function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache},Xd);function Xd(e,t){this.hasPendingWrites=e,this.fromCache=t}var Jd=(Zd.prototype.data=function(e){return ii("DocumentSnapshot.data",arguments,0,1),e=hp("DocumentSnapshot.data",e),this._document?this.convertObject(this._document.data(),Qa.fromSnapshotOptions(e,this._firestore._areTimestampsInSnapshotsEnabled())):void 0},Zd.prototype.get=function(e,t){if(ii("DocumentSnapshot.get",arguments,1,2),t=hp("DocumentSnapshot.get",t),this._document){var n=this._document.data().field(Ld("DocumentSnapshot.get",e));if(null!==n)return this.convertValue(n,Qa.fromSnapshotOptions(t,this._firestore._areTimestampsInSnapshotsEnabled()))}},Object.defineProperty(Zd.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!0,configurable:!0}),Object.defineProperty(Zd.prototype,"ref",{get:function(){return new Hd(this._key,this._firestore)},enumerable:!0,configurable:!0}),Object.defineProperty(Zd.prototype,"exists",{get:function(){return null!==this._document},enumerable:!0,configurable:!0}),Object.defineProperty(Zd.prototype,"metadata",{get:function(){return new $d(this._hasPendingWrites,this._fromCache)},enumerable:!0,configurable:!0}),Zd.prototype.isEqual=function(e){if(!(e instanceof Zd))throw mi("isEqual","DocumentSnapshot",1,e);return this._firestore===e._firestore&&this._fromCache===e._fromCache&&this._key.isEqual(e._key)&&(null===this._document?null===e._document:this._document.isEqual(e._document))},Zd.prototype.convertObject=function(e,t){var n=this,r={};return e.forEach((function(e,i){r[e]=n.convertValue(i,t)})),r},Zd.prototype.convertValue=function(e,t){if(e instanceof As)return this.convertObject(e,t);if(e instanceof Os)return this.convertArray(e,t);if(e instanceof Ts){var n=e.value(t),r=this._firestore.ensureClientConfigured().databaseId();return e.databaseId.isEqual(r)||qr("Document "+this._key.path+" contains a document reference within a different database ("+e.databaseId.projectId+"/"+e.databaseId.database+") which is not supported. It will be treated as a reference in the current database ("+r.projectId+"/"+r.database+") instead."),new Hd(n,this._firestore)}return e.value(t)},Zd.prototype.convertArray=function(e,t){var n=this;return e.internalValue.map((function(e){return n.convertValue(e,t)}))},Zd);function Zd(e,t,n,r,i){this._firestore=e,this._key=t,this._document=n,this._fromCache=r,this._hasPendingWrites=i}var ep,tp=(r(np,ep=Jd),np.prototype.data=function(e){var t=ep.prototype.data.call(this,e);return Br("object"==typeof t,"Document in a QueryDocumentSnapshot should exist"),t},np);function np(){return null!==ep&&ep.apply(this,arguments)||this}var rp=(ip.prototype.where=function(e,t,n){ni("Query.where",arguments,3),di("Query.where",3,n),"in"!==t&&"array-contains-any"!==t&&function(e,t,n,r){if(!t.some((function(e){return e===r})))throw new Gr(Kr.INVALID_ARGUMENT,"Invalid value "+fi(r)+" provided to function Query.where() for its "+yi(2)+" argument. Acceptable values: "+t.join(", "))}(0,["<","<=","==",">=",">","array-contains"],0,t);var r,i=Ld("Query.where",e),o=rh.fromString(t);if(i.isKeyField()){if(o===rh.ARRAY_CONTAINS||o===rh.ARRAY_CONTAINS_ANY)throw new Gr(Kr.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o.toString()+"' queries on FieldPath.documentId().");if(o===rh.IN){this.validateDisjunctiveFilterElements(n,o);for(var a=[],s=0,u=n;s<u.length;s++){var c=u[s];a.push(this.parseDocumentIdValue(c))}r=new Os(a)}else r=this.parseDocumentIdValue(n)}else o!==rh.IN&&o!==rh.ARRAY_CONTAINS_ANY||this.validateDisjunctiveFilterElements(n,o),r=this.firestore._dataConverter.parseQueryValue("Query.where",n);var l=ah.create(i,o,r);return this.validateNewFilter(l),new ip(this._query.addFilter(l),this.firestore)},ip.prototype.orderBy=function(e,t){var n;if(ii("Query.orderBy",arguments,1,2),ai("Query.orderBy","non-empty string",2,t),void 0===t||"asc"===t)n=Th.ASCENDING;else{if("desc"!==t)throw new Gr(Kr.INVALID_ARGUMENT,"Function Query.orderBy() has unknown direction '"+t+"', expected 'asc' or 'desc'.");n=Th.DESCENDING}if(null!==this._query.startAt)throw new Gr(Kr.INVALID_ARGUMENT,"Invalid query. You must not call Query.startAt() or Query.startAfter() before calling Query.orderBy().");if(null!==this._query.endAt)throw new Gr(Kr.INVALID_ARGUMENT,"Invalid query. You must not call Query.endAt() or Query.endBefore() before calling Query.orderBy().");var r=Ld("Query.orderBy",e),i=new Nh(r,n);return this.validateNewOrderBy(i),new ip(this._query.addOrderBy(i),this.firestore)},ip.prototype.limit=function(e){if(ni("Query.limit",arguments,1),oi("Query.limit","number",1,e),e<=0)throw new Gr(Kr.INVALID_ARGUMENT,"Invalid Query. Query limit ("+e+") is invalid. Limit must be positive.");return new ip(this._query.withLimit(e),this.firestore)},ip.prototype.startAt=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];ri("Query.startAt",arguments,1);var r=this.boundFromDocOrFields("Query.startAt",e,t,!0);return new ip(this._query.withStartAt(r),this.firestore)},ip.prototype.startAfter=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];ri("Query.startAfter",arguments,1);var r=this.boundFromDocOrFields("Query.startAfter",e,t,!1);return new ip(this._query.withStartAt(r),this.firestore)},ip.prototype.endBefore=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];ri("Query.endBefore",arguments,1);var r=this.boundFromDocOrFields("Query.endBefore",e,t,!0);return new ip(this._query.withEndAt(r),this.firestore)},ip.prototype.endAt=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];ri("Query.endAt",arguments,1);var r=this.boundFromDocOrFields("Query.endAt",e,t,!1);return new ip(this._query.withEndAt(r),this.firestore)},ip.prototype.isEqual=function(e){if(!(e instanceof ip))throw mi("isEqual","Query",1,e);return this.firestore===e.firestore&&this._query.isEqual(e._query)},ip.prototype.boundFromDocOrFields=function(e,t,n,r){if(di(e,1,t),t instanceof Jd){if(0<n.length)throw new Gr(Kr.INVALID_ARGUMENT,"Too many arguments provided to "+e+"().");var i=t;if(!i.exists)throw new Gr(Kr.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+e+"().");return this.boundFromDocument(e,i._document,r)}var o=[t].concat(n);return this.boundFromFields(e,o,r)},ip.prototype.boundFromDocument=function(e,t,n){for(var r=[],i=0,o=this._query.orderBy;i<o.length;i++){var a=o[i];if(a.field.isKeyField())r.push(new Ts(this.firestore._databaseId,t.key));else{var s=t.field(a.field);if(s instanceof gs)throw new Gr(Kr.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+a.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===s){var u=a.field.canonicalString();throw new Gr(Kr.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+u+"' (used as the orderBy) does not exist.")}r.push(s)}}return new Ih(r,n)},ip.prototype.boundFromFields=function(e,t,n){var r=this._query.explicitOrderBy;if(t.length>r.length)throw new Gr(Kr.INVALID_ARGUMENT,"Too many arguments provided to "+e+"(). The number of arguments must be less than or equal to the number of Query.orderBy() clauses");for(var i=[],o=0;o<t.length;o++){var a=t[o];if(r[o].field.isKeyField()){if("string"!=typeof a)throw new Gr(Kr.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+e+"(), but got a "+typeof a);if(!this._query.isCollectionGroupQuery()&&-1!==a.indexOf("/"))throw new Gr(Kr.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+e+"() must be a plain document ID, but '"+a+"' contains a slash.");var s=this._query.path.child(qi.fromString(a));if(!Qi.isDocumentKey(s))throw new Gr(Kr.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+e+"() must result in a valid document path, but '"+s+"' is not because it contains an odd number of segments.");var u=new Qi(s);i.push(new Ts(this.firestore._databaseId,u))}else{var c=this.firestore._dataConverter.parseQueryValue(e,a);i.push(c)}}return new Ih(i,n)},ip.prototype.onSnapshot=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];ii("Query.onSnapshot",arguments,1,4);var n,r={},i=0;return"object"!=typeof e[i]||nd(e[i])||(pi("Query.onSnapshot",r=e[i],["includeMetadataChanges"]),ui("Query.onSnapshot","boolean","includeMetadataChanges",r.includeMetadataChanges),i++),n=nd(e[i])?e[i]:(oi("Query.onSnapshot","function",i,e[i]),ai("Query.onSnapshot","function",i+1,e[i+1]),ai("Query.onSnapshot","function",i+2,e[i+2]),{next:e[i],error:e[i+1],complete:e[i+2]}),this.onSnapshotInternal(r,n)},ip.prototype.onSnapshotInternal=function(e,t){var n=this,r=function(e){console.error("Uncaught Error in onSnapshot:",e)};t.error&&(r=t.error.bind(t));var i=new jf({next:function(e){t.next&&t.next(new op(n.firestore,n._query,e))},error:r}),o=this.firestore.ensureClientConfigured(),a=o.listen(this._query,i,e);return function(){i.mute(),o.unlisten(a)}},ip.prototype.get=function(e){var t=this;return ii("Query.get",arguments,0,1),fp("Query.get",e),new Promise((function(n,r){e&&"cache"===e.source?t.firestore.ensureClientConfigured().getDocumentsFromLocalCache(t._query).then((function(e){n(new op(t.firestore,t._query,e))}),r):t.getViaSnapshotListener(n,r,e)}))},ip.prototype.getViaSnapshotListener=function(e,t,n){var r=this.onSnapshotInternal({includeMetadataChanges:!0,waitForSyncWhenOnline:!0},{next:function(i){r(),i.metadata.fromCache&&n&&"server"===n.source?t(new Gr(Kr.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):e(i)},error:t})},ip.prototype.parseDocumentIdValue=function(e){if("string"==typeof e){if(""===e)throw new Gr(Kr.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!this._query.isCollectionGroupQuery()&&-1!==e.indexOf("/"))throw new Gr(Kr.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+e+"' contains a '/' character.");var t=this._query.path.child(qi.fromString(e));if(!Qi.isDocumentKey(t))throw new Gr(Kr.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+t+"' is not because it has an odd number of segments ("+t.length+").");return new Ts(this.firestore._databaseId,new Qi(t))}if(e instanceof Hd){var n=e;return new Ts(this.firestore._databaseId,n._key)}throw new Gr(Kr.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+fi(e)+".")},ip.prototype.validateDisjunctiveFilterElements=function(e,t){if(!Array.isArray(e)||0===e.length)throw new Gr(Kr.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+t.toString()+"' filters.");if(10<e.length)throw new Gr(Kr.INVALID_ARGUMENT,"Invalid Query. '"+t.toString()+"' filters support a maximum of 10 elements in the value array.");if(0<=e.indexOf(null))throw new Gr(Kr.INVALID_ARGUMENT,"Invalid Query. '"+t.toString()+"' filters cannot contain 'null' in the value array.");if(0<e.filter((function(e){return Number.isNaN(e)})).length)throw new Gr(Kr.INVALID_ARGUMENT,"Invalid Query. '"+t.toString()+"' filters cannot contain 'NaN' in the value array.")},ip.prototype.validateNewFilter=function(e){if(e instanceof ah){var t=[rh.ARRAY_CONTAINS,rh.ARRAY_CONTAINS_ANY],n=[rh.IN,rh.ARRAY_CONTAINS_ANY],r=0<=t.indexOf(e.op),i=0<=n.indexOf(e.op);if(e.isInequality()){var o=this._query.getInequalityFilterField();if(null!==o&&!o.isEqual(e.field))throw new Gr(Kr.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, >, or >=) must be on the same field. But you have inequality filters on '"+o.toString()+"' and '"+e.field.toString()+"'");var a=this._query.getFirstOrderByField();null!==a&&this.validateOrderByAndInequalityMatch(e.field,a)}else if(i||r){var s=null;if(i&&(s=this._query.findFilterOperator(n)),null===s&&r&&(s=this._query.findFilterOperator(t)),null!=s)throw s===e.op?new Gr(Kr.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter."):new Gr(Kr.INVALID_ARGUMENT,"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+s.toString()+"' filters.")}}},ip.prototype.validateNewOrderBy=function(e){if(null===this._query.getFirstOrderByField()){var t=this._query.getInequalityFilterField();null!==t&&this.validateOrderByAndInequalityMatch(t,e.field)}},ip.prototype.validateOrderByAndInequalityMatch=function(e,t){if(!t.isEqual(e))throw new Gr(Kr.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first Query.orderBy(), but your first Query.orderBy() is on field '"+t.toString()+"' instead.")},ip);function ip(e,t){this._query=e,this.firestore=t}var op=(Object.defineProperty(ap.prototype,"docs",{get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e},enumerable:!0,configurable:!0}),Object.defineProperty(ap.prototype,"empty",{get:function(){return this._snapshot.docs.isEmpty()},enumerable:!0,configurable:!0}),Object.defineProperty(ap.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!0,configurable:!0}),ap.prototype.forEach=function(e,t){var n=this;ii("QuerySnapshot.forEach",arguments,1,2),oi("QuerySnapshot.forEach","function",1,e),this._snapshot.docs.forEach((function(r){e.call(t,n.convertToDocumentImpl(r))}))},Object.defineProperty(ap.prototype,"query",{get:function(){return new rp(this._originalQuery,this._firestore)},enumerable:!0,configurable:!0}),ap.prototype.docChanges=function(e){e&&(pi("QuerySnapshot.docChanges",e,["includeMetadataChanges"]),ui("QuerySnapshot.docChanges","boolean","includeMetadataChanges",e.includeMetadataChanges));var t=!(!e||!e.includeMetadataChanges);if(t&&this._snapshot.excludesMetadataChanges)throw new Gr(Kr.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t,n){if(n.oldDocs.isEmpty()){var r,i=0;return n.docChanges.map((function(t){var o=new tp(e,t.doc.key,t.doc,n.fromCache,n.mutatedKeys.has(t.doc.key));return Br(t.type===Il.Added,"Invalid event type for first snapshot"),Br(!r||n.query.docComparator(r,t.doc)<0,"Got added events in wrong order"),r=t.doc,{type:"added",doc:o,oldIndex:-1,newIndex:i++}}))}var o=n.oldDocs;return n.docChanges.filter((function(e){return t||e.type!==Il.Metadata})).map((function(t){var r=new tp(e,t.doc.key,t.doc,n.fromCache,n.mutatedKeys.has(t.doc.key)),i=-1,a=-1;return t.type!==Il.Added&&(Br(0<=(i=o.indexOf(t.doc.key)),"Index for document not found"),o=o.delete(t.doc.key)),t.type!==Il.Removed&&(a=(o=o.add(t.doc)).indexOf(t.doc.key)),{type:function(e){switch(e){case Il.Added:return"added";case Il.Modified:case Il.Metadata:return"modified";case Il.Removed:return"removed";default:return Ur("Unknown change type: "+e)}}(t.type),doc:r,oldIndex:i,newIndex:a}}))}(this._firestore,t,this._snapshot),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges},ap.prototype.isEqual=function(e){if(!(e instanceof ap))throw mi("isEqual","QuerySnapshot",1,e);return this._firestore===e._firestore&&this._originalQuery.isEqual(e._originalQuery)&&this._snapshot.isEqual(e._snapshot)},ap.prototype.convertToDocumentImpl=function(e){return new tp(this._firestore,e.key,e,this.metadata.fromCache,this._snapshot.mutatedKeys.has(e.key))},ap);function ap(e,t,n){this._firestore=e,this._originalQuery=t,this._snapshot=n,this._cachedChanges=null,this._cachedChangesIncludeMetadataChanges=null,this.metadata=new $d(n.hasPendingWrites,n.fromCache)}c(["length","forEach","map"],"undefined"!=typeof Symbol?[Symbol.iterator]:[]).forEach((function(e){try{Object.defineProperty(op.prototype.docChanges,e,{get:function(){return function(){throw new Gr(Kr.INVALID_ARGUMENT,'QuerySnapshot.docChanges has been changed from a property into a method, so usages like "querySnapshot.docChanges" should become "querySnapshot.docChanges()"')}()}})}catch(e){}}));var sp,up=(r(cp,sp=rp),Object.defineProperty(cp.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!0,configurable:!0}),Object.defineProperty(cp.prototype,"parent",{get:function(){var e=this._query.path.popLast();return e.isEmpty()?null:new Hd(new Qi(e),this.firestore)},enumerable:!0,configurable:!0}),Object.defineProperty(cp.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!0,configurable:!0}),cp.prototype.doc=function(e){if(ii("CollectionReference.doc",arguments,0,1),0===arguments.length&&(e=vi.newId()),oi("CollectionReference.doc","non-empty string",1,e),""===e)throw new Gr(Kr.INVALID_ARGUMENT,"Document path must be a non-empty string");var t=qi.fromString(e);return Hd.forPath(this._query.path.child(t),this.firestore)},cp.prototype.add=function(e){ni("CollectionReference.add",arguments,1),oi("CollectionReference.add","object",1,e);var t=this.doc();return t.set(e).then((function(){return t}))},cp);function cp(e,t){var n=sp.call(this,th.atPath(e),t)||this;if(e.length%2!=1)throw new Gr(Kr.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+e.canonicalString()+" has "+e.length);return n}function lp(e,t){if(void 0===t)return{merge:!1};if(pi(e,t,["merge","mergeFields"]),ui(e,"boolean","merge",t.merge),function(e,t,n,r,i){void 0!==r&&function(e,t,n,r,i){if(!(r instanceof Array))throw new Gr(Kr.INVALID_ARGUMENT,"Function "+e+"() requires its "+t+" option to be an array, but it was: "+fi(r));for(var o=0;o<r.length;++o)if(!i(r[o]))throw new Gr(Kr.INVALID_ARGUMENT,"Function "+e+"() requires all "+t+" elements to be "+n+", but the value at index "+o+" was: "+fi(r[o]))}(e,t,n,r,i)}(e,"mergeFields","a string or a FieldPath",t.mergeFields,(function(e){return"string"==typeof e||e instanceof Qf})),void 0!==t.mergeFields&&void 0!==t.merge)throw new Gr(Kr.INVALID_ARGUMENT,"Invalid options passed to function "+e+'(): You cannot specify both "merge" and "mergeFields".');return t}function hp(e,t){return void 0===t?{}:(pi(e,t,["serverTimestamps"]),ci(e,0,"serverTimestamps",t.serverTimestamps,["estimate","previous","none"]),t)}function fp(e,t){ai(e,"object",1,t),t&&(pi(e,t,["source"]),ci(e,0,"source",t.source,["default","server","cache"]))}function dp(e,t,n){if(t instanceof Hd){if(t.firestore!==n)throw new Gr(Kr.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}throw mi(e,"DocumentReference",1,t)}var pp=Yr(jd,"Use firebase.firestore() instead."),mp=Yr(Qd,"Use firebase.firestore().runTransaction() instead."),yp=Yr(Kd,"Use firebase.firestore().batch() instead."),gp=Yr(Hd,"Use firebase.firestore().doc() instead."),vp=Yr(Jd),bp=Yr(tp),wp=Yr(rp),Ep=Yr(op),Sp=Yr(up,"Use firebase.firestore().collection() instead."),Tp={Firestore:pp,GeoPoint:Zl,Timestamp:so,Blob:Ni,Transaction:mp,WriteBatch:yp,DocumentReference:gp,DocumentSnapshot:vp,Query:wp,QueryDocumentSnapshot:bp,QuerySnapshot:Ep,CollectionReference:Sp,FieldPath:Qf,FieldValue:wd,setLogLevel:jd.setLogLevel,CACHE_SIZE_UNLIMITED:Vd},Cp=(Ip.prototype.addCallback=function(e){},Ip.prototype.shutdown=function(){},Ip);function Ip(){}var kp="ConnectivityMonitor",Np=(Dp.prototype.addCallback=function(e){this.callbacks.push(e)},Dp.prototype.shutdown=function(){window.removeEventListener("online",this.networkAvailableListener),window.removeEventListener("offline",this.networkUnavailableListener)},Dp.prototype.configureNetworkMonitoring=function(){window.addEventListener("online",this.networkAvailableListener),window.addEventListener("offline",this.networkUnavailableListener)},Dp.prototype.onNetworkAvailable=function(){Fr(kp,"Network connectivity changed: AVAILABLE");for(var e=0,t=this.callbacks;e<t.length;e++)(0,t[e])(0)},Dp.prototype.onNetworkUnavailable=function(){Fr(kp,"Network connectivity changed: UNAVAILABLE");for(var e=0,t=this.callbacks;e<t.length;e++)(0,t[e])(1)},Dp.isAvailable=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},Dp);function Dp(){var e=this;this.networkAvailableListener=function(){return e.onNetworkAvailable()},this.networkUnavailableListener=function(){return e.onNetworkUnavailable()},this.callbacks=[],this.configureNetworkMonitoring()}var Ap=(_p.prototype.onOpen=function(e){Br(!this.wrappedOnOpen,"Called onOpen on stream twice!"),this.wrappedOnOpen=e},_p.prototype.onClose=function(e){Br(!this.wrappedOnClose,"Called onClose on stream twice!"),this.wrappedOnClose=e},_p.prototype.onMessage=function(e){Br(!this.wrappedOnMessage,"Called onMessage on stream twice!"),this.wrappedOnMessage=e},_p.prototype.close=function(){this.closeFn()},_p.prototype.send=function(e){this.sendFn(e)},_p.prototype.callOnOpen=function(){Br(void 0!==this.wrappedOnOpen,"Cannot call onOpen because no callback was set"),this.wrappedOnOpen()},_p.prototype.callOnClose=function(e){Br(void 0!==this.wrappedOnClose,"Cannot call onClose because no callback was set"),this.wrappedOnClose(e)},_p.prototype.callOnMessage=function(e){Br(void 0!==this.wrappedOnMessage,"Cannot call onMessage because no callback was set"),this.wrappedOnMessage(e)},_p);function _p(e){this.sendFn=e.sendFn,this.closeFn=e.closeFn}var xp="Connection",Op={BatchGetDocuments:"batchGet",Commit:"commit"},Rp="gl-js/ fire/"+Rr,Pp=(Mp.prototype.modifyHeadersForRequest=function(e,t){if(t)for(var n in t.authHeaders)t.authHeaders.hasOwnProperty(n)&&(e[n]=t.authHeaders[n]);e["X-Goog-Api-Client"]=Rp},Mp.prototype.invokeRPC=function(e,t,n){var r=this,i=this.makeUrl(e);return new Promise((function(o,s){var u=new Or;u.listenOnce(_r.COMPLETE,(function(){try{switch(u.getLastErrorCode()){case Ar.NO_ERROR:var t=u.getResponseJson();Fr(xp,"XHR received:",JSON.stringify(t)),o(t);break;case Ar.TIMEOUT:Fr(xp,'RPC "'+e+'" timed out'),s(new Gr(Kr.DEADLINE_EXCEEDED,"Request time out"));break;case Ar.HTTP_ERROR:var n=u.getStatus();if(Fr(xp,'RPC "'+e+'" failed with status:',n,"response text:",u.getResponseText()),0<n){var r=u.getResponseJson().error;if(r&&r.status&&r.message){var i=function(e){var t=e.toLowerCase().replace("_","-");return 0<=Object.values(Kr).indexOf(t)?t:Kr.UNKNOWN}(r.status);s(new Gr(i,r.message))}else s(new Gr(Kr.UNKNOWN,"Server responded with status "+u.getStatus()))}else Fr(xp,'RPC "'+e+'" failed'),s(new Gr(Kr.UNAVAILABLE,"Connection failed."));break;default:Ur('RPC "'+e+'" failed with unanticipated webchannel error '+u.getLastErrorCode()+": "+u.getLastError()+", giving up.")}}finally{Fr(xp,'RPC "'+e+'" completed.')}}));var c=a({},t);delete c.database;var l=JSON.stringify(c);Fr(xp,"XHR sending: ",i+" "+l);var h={"Content-Type":"text/plain"};r.modifyHeadersForRequest(h,n),u.send(i,"POST",l,h,15)}))},Mp.prototype.invokeStreamingRPC=function(e,t,n){return this.invokeRPC(e,t,n)},Mp.prototype.openStream=function(e,t){var n=[this.baseUrl,"/","google.firestore.v1.Firestore","/",e,"/channel"],r=Dr(),i={backgroundChannelTest:!0,httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling};this.modifyHeadersForRequest(i.initMessageHeaders,t),"object"==typeof navigator&&"ReactNative"===navigator.product||(i.httpHeadersOverwriteParam="$httpHeaders");var o=n.join("");function a(e,t){s.listen(e,(function(e){try{t(e)}catch(e){setTimeout((function(){throw e}),0)}}))}Fr(xp,"Creating WebChannel: "+o+" "+i);var s=r.createWebChannel(o,i),u=!1,c=!1,l=new Ap({sendFn:function(e){c?Fr(xp,"Not sending because WebChannel is closed:",e):(u||(Fr(xp,"Opening WebChannel transport."),s.open(),u=!0),Fr(xp,"WebChannel sending:",e),s.send(e))},closeFn:function(){return s.close()}});return a(xr.EventType.OPEN,(function(){c||Fr(xp,"WebChannel transport opened.")})),a(xr.EventType.CLOSE,(function(){c||(c=!0,Fr(xp,"WebChannel transport closed"),l.callOnClose())})),a(xr.EventType.ERROR,(function(e){c||(c=!0,Fr(xp,"WebChannel transport errored:",e),l.callOnClose(new Gr(Kr.UNAVAILABLE,"The operation could not be completed")))})),a(xr.EventType.MESSAGE,(function(e){if(!c){var t=e.data[0];Br(!!t,"Got a webchannel message without data.");var n=t,r=n.error||n[0]&&n[0].error;if(r){Fr(xp,"WebChannel received error:",r);var i=r.status,o=function(e){var t=bl[e];if(void 0!==t)return Cl(t)}(i),a=r.message;void 0===o&&(o=Kr.INTERNAL,a="Unknown error status: "+i+" with message "+r.message),c=!0,l.callOnClose(new Gr(o,a)),s.close()}else Fr(xp,"WebChannel received:",t),l.callOnMessage(t)}})),setTimeout((function(){l.callOnOpen()}),0),l},Mp.prototype.makeUrl=function(e){var t=Op[e];Br(void 0!==t,"Unknown REST mapping for: "+e);var n=[this.baseUrl,"/","v1"];return n.push("/projects/"),n.push(this.databaseId.projectId),n.push("/databases/"),n.push(this.databaseId.database),n.push("/documents"),n.push(":"),n.push(t),n.join("")},Mp);function Mp(e){this.databaseId=e.databaseId;var t=e.ssl?"https":"http";this.baseUrl=t+"://"+e.host,this.forceLongPolling=e.forceLongPolling}var Lp=(Object.defineProperty(Fp.prototype,"document",{get:function(){return"undefined"!=typeof document?document:null},enumerable:!0,configurable:!0}),Object.defineProperty(Fp.prototype,"window",{get:function(){return"undefined"!=typeof window?window:null},enumerable:!0,configurable:!0}),Fp.prototype.loadConnection=function(e){return Promise.resolve(new Pp(e))},Fp.prototype.newConnectivityMonitor=function(){return Np.isAvailable()?new Np:new Cp},Fp.prototype.newSerializer=function(e){return new Yh(e,{useProto3Json:!0})},Fp.prototype.formatJSON=function(e){return JSON.stringify(e)},Fp.prototype.atob=function(e){return atob(e)},Fp.prototype.btoa=function(e){return btoa(e)},Fp);function Fp(){this.emptyByteString="",this.base64Available="undefined"!=typeof atob}jr.setPlatform(new Lp),function(e){e.INTERNAL.registerService("firestore",(function(e){return new jd(e)}),function(e){Br(e&&"object"==typeof e,"shallowCopy() expects object parameter.");var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}(Tp))}(t)}).apply(this,arguments)}catch(n){throw console.error(n),new Error("Cannot instantiate firebase-firestore - be sure to load firebase-app.js first.")}}(n(10))}).call(this,n(12))},function(e,t){var n,r,i=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(e){if(n===setTimeout)return setTimeout(e,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"===typeof setTimeout?setTimeout:o}catch(e){n=o}try{r="function"===typeof clearTimeout?clearTimeout:a}catch(e){r=a}}();var u,c=[],l=!1,h=-1;function f(){l&&u&&(l=!1,u.length?c=u.concat(c):h=-1,c.length&&d())}function d(){if(!l){var e=s(f);l=!0;for(var t=c.length;t;){for(u=c,c=[];++h<t;)u&&u[h].run();h=-1,t=c.length}u=null,l=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function m(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new p(e,t)),1!==c.length||l||s(d)},p.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=m,i.addListener=m,i.once=m,i.off=m,i.removeListener=m,i.removeAllListeners=m,i.emit=m,i.prependListener=m,i.prependOnceListener=m,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="function"===typeof Symbol&&Symbol.for,i=r?Symbol.for("react.element"):60103,o=r?Symbol.for("react.portal"):60106,a=r?Symbol.for("react.fragment"):60107,s=r?Symbol.for("react.strict_mode"):60108,u=r?Symbol.for("react.profiler"):60114,c=r?Symbol.for("react.provider"):60109,l=r?Symbol.for("react.context"):60110,h=r?Symbol.for("react.async_mode"):60111,f=r?Symbol.for("react.concurrent_mode"):60111,d=r?Symbol.for("react.forward_ref"):60112,p=r?Symbol.for("react.suspense"):60113,m=r?Symbol.for("react.suspense_list"):60120,y=r?Symbol.for("react.memo"):60115,g=r?Symbol.for("react.lazy"):60116,v=r?Symbol.for("react.fundamental"):60117,b=r?Symbol.for("react.responder"):60118,w=r?Symbol.for("react.scope"):60119;function E(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case i:switch(e=e.type){case h:case f:case a:case u:case s:case p:return e;default:switch(e=e&&e.$$typeof){case l:case d:case c:return e;default:return t}}case g:case y:case o:return t}}}function S(e){return E(e)===f}t.typeOf=E,t.AsyncMode=h,t.ConcurrentMode=f,t.ContextConsumer=l,t.ContextProvider=c,t.Element=i,t.ForwardRef=d,t.Fragment=a,t.Lazy=g,t.Memo=y,t.Portal=o,t.Profiler=u,t.StrictMode=s,t.Suspense=p,t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===a||e===f||e===u||e===s||e===p||e===m||"object"===typeof e&&null!==e&&(e.$$typeof===g||e.$$typeof===y||e.$$typeof===c||e.$$typeof===l||e.$$typeof===d||e.$$typeof===v||e.$$typeof===b||e.$$typeof===w)},t.isAsyncMode=function(e){return S(e)||E(e)===h},t.isConcurrentMode=S,t.isContextConsumer=function(e){return E(e)===l},t.isContextProvider=function(e){return E(e)===c},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===i},t.isForwardRef=function(e){return E(e)===d},t.isFragment=function(e){return E(e)===a},t.isLazy=function(e){return E(e)===g},t.isMemo=function(e){return E(e)===y},t.isPortal=function(e){return E(e)===o},t.isProfiler=function(e){return E(e)===u},t.isStrictMode=function(e){return E(e)===s},t.isSuspense=function(e){return E(e)===p}},function(e,t,n){e.exports=n(30)()},function(e,t,n){"use strict";var r=n(31);function i(){}function o(){}o.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,o,a){if(a!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:o,resetWarningCache:i};return n.PropTypes=n,n}},function(e,t,n){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"}]]);
//# sourceMappingURL=2.3f21a9d7.chunk.js.map